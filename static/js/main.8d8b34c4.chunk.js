(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{50:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var i=n(16),a=n.n(i),s=n(45),c=n.n(s),r=(n(50),n(0)),l=n.n(r),d=n(5),o=n(3),j=n(15),u=n(38),b=n(34),h=n(41),O=n(7),p=(n(53),n(54),n(26)),x=n(27),f=n(6);var m=function(e){return Object(f.jsxs)("div",{id:"topTab",children:[Object(f.jsx)("div",{className:"topTabThird first",children:Object(f.jsxs)("select",{id:"sortParameterSelector",value:e.sortParameter,disabled:e.dataLength<=1||e.appMode===M.LOADING_MODE,onChange:function(t){return e.setSortParameter(t.target.value)},children:[Object(f.jsx)("option",{"aria-label":"Increasing by taskname",value:"taskName asc",children:"Name \u2b06"}),Object(f.jsx)("option",{"aria-label":"Decreasing by taskname",value:"taskName desc",children:"Name \u2b07"}),Object(f.jsx)("option",{"aria-label":"Increasing by date created",value:"created asc",children:"Date \u2b06"}),Object(f.jsx)("option",{"aria-label":"Decreasing by date created",value:"created desc",children:"Date \u2b07"}),Object(f.jsx)("option",{"aria-label":"Increasing by priority level",value:"priorityLevel asc",children:"Priority \u2b06"}),Object(f.jsx)("option",{"aria-label":"Decreasing by priority level",value:"priorityLevel desc",children:"Priority \u2b07"})]})}),Object(f.jsx)("div",{className:"topTabThird",children:Object(f.jsx)("h1",{id:"title",children:"To-Do"})}),Object(f.jsx)("div",{className:"topTabThird last",children:e.appMode===M.EDIT_MODE?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{"aria-label":"Cancel Edits",id:"cancelEdits",onClick:function(){e.setDataChanges({}),e.setAppMode(M.DEFAULT_MODE)},children:Object(f.jsx)(p.a,{icon:x.f})}),Object(f.jsx)("button",{"aria-label":"Save Edits",id:"saveEdits",onClick:function(){e.applyDataChanges(),e.setAppMode(M.DEFAULT_MODE)},children:Object(f.jsx)(p.a,{icon:x.d})})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{"aria-label":"Edit Button",id:"editButton",onClick:function(){return e.setAppMode(M.EDIT_MODE)},disabled:e.dataLength<1||e.appMode!==M.DEFAULT_MODE,children:Object(f.jsx)(p.a,{icon:x.a})}),Object(f.jsx)("button",{"aria-label":"Add Button",id:"addItem",onClick:function(){e.setAppMode(M.ADD_TASK_MODE),console.log(e.appMode)},disabled:e.appMode!==M.DEFAULT_MODE,children:Object(f.jsx)(p.a,{icon:x.c})})]})})]})},D=n(32);n(60),n(61);var g=function(e){var t,n,i;function a(t,n){e.addToTaskChangeList(e.task.id,Object(D.a)(Object(D.a)({},e.taskChangeList),{},Object(d.a)({},t,n)))}return Object(f.jsx)(f.Fragment,{children:!("delete"in e.taskChangeList)&&Object(f.jsx)("li",{className:"listItem",children:Object(f.jsxs)("label",{className:"taskLabel",children:[Object(f.jsx)("input",{className:"checkbox",type:"checkbox",checked:e.task.isChecked,disabled:e.appMode===M.EDIT_MODE,onChange:function(t){return e.onTaskChanged(e.task.id,"isChecked",t.target.checked)}}),Object(f.jsx)("div",{className:"taskContent",children:e.appMode===M.EDIT_MODE?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{className:"editInput",type:"text",value:(null===(t=e.taskChangeList)||void 0===t?void 0:t.taskName)||e.task.taskName,onChange:function(e){a("taskName",e.target.value)}}),Object(f.jsxs)("select",{className:"prioritySelector",value:(null===(n=e.taskChangeList)||void 0===n?void 0:n.priorityLevel)||e.task.priorityLevel,onChange:function(e){return a("priorityLevel",parseInt(e.target.value))},children:[Object(f.jsx)("option",{"aria-label":"Low priority",value:"1",children:"!"}),Object(f.jsx)("option",{"aria-label":"Medium priority",value:"2",children:"!!"}),Object(f.jsx)("option",{"aria-label":"High priority",value:"3",children:"!!!"})]}),Object(f.jsx)("button",{"aria-label":"Delete task",className:"deleteButton",onClick:function(){a("delete",!0)},children:Object(f.jsx)(p.a,{icon:x.e,size:"xs"})})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"taskName",children:e.task.taskName}),Object(f.jsx)("span",{className:(i=e.task.priorityLevel,1===i?"priorityLevel low":2===i?"priorityLevel medium":"priorityLevel high"),children:"!".repeat(e.task.priorityLevel)})]})})]})})})};var v=function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.filter((function(t){return e.tasksShowing===N.ALL||e.tasksShowing===N.UNCOMPLETED&&!t.isChecked}));function i(t,n){e.setDataChanges(Object(D.a)(Object(D.a)({},e.dataChanges),{},Object(d.a)({},t,n)))}return Object(f.jsx)("ul",{id:"itemList",children:e.appMode===M.LOADING_MODE?Object(f.jsx)("div",{id:"loader"}):Object(f.jsx)(f.Fragment,{children:n.length>0?n.map((function(t){return Object(f.jsx)(g,{task:t,onTaskChanged:e.onTaskChanged,appMode:e.appMode,addToTaskChangeList:i,taskChangeList:t.id in e.dataChanges?e.dataChanges[t.id]:{}},t.id)})):Object(f.jsx)("li",{id:"noItems",children:Object(f.jsx)("h3",{children:e.appMode===M.EDIT_MODE?"No tasks to edit.":"You have completed all your tasks, woohoo!"})},"1")})})};n(62);var k=function(e){var t=Object(i.useState)(null),n=Object(j.a)(t,2),a=n[0],s=n[1];function c(e){return e>1?e+" tasks":e+" task"}var r=Object(f.jsxs)("div",{id:"deleteButtonContainer",children:[null===a?Object(f.jsx)("button",{type:"button",id:"deleteCompleted",disabled:e.tasksShowing===N.UNCOMPLETED||0===e.data.filter((function(e){return e.isChecked})).length,onClick:function(){return s("completed")},children:" Delete All Completed"}):Object(f.jsx)("button",{type:"button",id:"cancel",onClick:function(){return s(null)},children:" Cancel"}),null===a?Object(f.jsx)("button",{type:"button",id:"deleteAll",disabled:0===e.data.length,onClick:function(){s("all")},children:" Delete All"}):Object(f.jsxs)("button",{type:"button",id:"confirm",onClick:function(){e.onTasksDeleted("all"===a?e.data.map((function(e){return e.id})):e.data.filter((function(e){return e.isChecked})).map((function(e){return e.id}))),s(null)},children:[" Delete ",c("all"===a?e.data.length:e.data.filter((function(e){return e.isChecked})).length)]})]}),l=Object(f.jsxs)("div",{"aria-label":"Select Shown Tasks",id:"switcherContainer",children:[Object(f.jsx)("button",{"aria-label":"Show All Tasks",type:"button",id:"showAll",disabled:e.tasksShowing===N.ALL,onClick:function(){return e.setTasksShowing(N.ALL)},children:" All"}),Object(f.jsx)("button",{"aria-label":"Show Uncompleted Tasks",type:"button",id:"showUncompleted",disabled:e.tasksShowing===N.UNCOMPLETED,onClick:function(){return e.setTasksShowing(N.UNCOMPLETED)},children:" Uncompleted"})]});return Object(f.jsx)("div",{id:"footer",children:e.appMode===M.EDIT_MODE?r:l})};n(63);var L=function(e){var t=Object(i.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(1),r=Object(j.a)(c,2),l=r[0],d=r[1];return Object(f.jsx)(f.Fragment,{children:e.appMode===M.ADD_TASK_MODE&&Object(f.jsx)("div",{id:"createPopUpBackground",children:Object(f.jsxs)("div",{id:"createPopUp",children:[Object(f.jsxs)("div",{id:"createHeader",children:[Object(f.jsx)("button",{id:"closeCreate",onClick:function(){s(""),d(1),e.setAppMode(M.DEFAULT_MODE)},children:"X"}),Object(f.jsx)("h2",{children:" New Task "}),Object(f.jsx)("button",{children:"X"})]}),Object(f.jsxs)("form",{id:"createForm",onSubmit:function(t){t.preventDefault(),e.onItemAdded(a,l),s(""),d(1),e.setAppMode(M.DEFAULT_MODE)},children:[Object(f.jsx)("input",{id:"taskName",type:"text",value:a,onChange:function(e){return s(e.target.value)},autoFocus:!0}),Object(f.jsxs)("div",{id:"prioritySelector",children:[Object(f.jsx)("button",{"aria-label":"Low priority",className:"priorityButton",type:"button",id:"low",disabled:1===l,onClick:function(){return d(1)},children:"Low!"}),Object(f.jsx)("button",{"aria-label":"Medium priority",className:"priorityButton",type:"button",id:"medium",disabled:2===l,onClick:function(){return d(2)},children:"Medium!!"}),Object(f.jsx)("button",{"aria-label":"High priority",className:"priorityButton",type:"button",id:"high",disabled:3===l,onClick:function(){return d(3)},children:"High!!!"})]}),Object(f.jsx)("button",{id:"addTask",type:"submit",disabled:0===a.length,children:"Add Task"})]})]})})})};n(64);var C=function(e){return Object(f.jsx)(f.Fragment,{children:e.error&&Object(f.jsx)("div",{id:"errorPopUpBackground",children:Object(f.jsxs)("div",{id:"errorPopUp",children:[Object(f.jsxs)("div",{id:"errorHeader",children:[Object(f.jsx)("button",{id:"closeError",onClick:function(){return window.location.reload(!0)},children:"X"}),Object(f.jsx)("h2",{children:"ERROR"}),Object(f.jsx)("button",{children:"X"})]}),Object(f.jsxs)("span",{id:"errorMessage",children:["Type: ",JSON.stringify(e.error.name),Object(f.jsx)("br",{}),"Message: ",JSON.stringify(e.error.code)]})]})})})};n(65);var E=function(e){return Object(f.jsxs)("div",{id:"listSelectorRow",children:[Object(f.jsx)("div",{className:"topTabThird first",children:Object(f.jsx)("select",{id:"listSelector",value:e.currentListID,onChange:function(t){return e.setCurrentListID(t.target.value)},children:e.lists.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.listName},e.id)}))})}),Object(f.jsx)("div",{className:"topTabThird"}),Object(f.jsx)("div",{className:"topTabThird last",children:Object(f.jsx)("button",{id:"editLists",onClick:function(){return e.setAppMode(M.EDIT_LISTS_MODE)},children:Object(f.jsx)(p.a,{icon:x.b})})})]})};n(66);var T=function(e){var t=Object(i.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(null),r=Object(j.a)(c,2),l=r[0],d=r[1];return Object(f.jsx)(f.Fragment,{children:e.appMode===M.EDIT_LISTS_MODE&&Object(f.jsx)("div",{id:"listPopUpBackground",children:Object(f.jsxs)("div",{id:"listPopUp",children:[Object(f.jsxs)("div",{id:"listHeader",children:[Object(f.jsx)("button",{id:"closeList",disabled:0===e.lists.length,onClick:function(){s(""),d(null),e.setAppMode(M.DEFAULT_MODE)},children:"X"}),Object(f.jsx)("h2",{children:" Lists "}),Object(f.jsx)("button",{children:"X"})]}),Object(f.jsx)("div",{id:"listsContainer",children:Object(f.jsxs)("table",{id:"lists",border:"1",frame:"void",rules:"rows",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"default",children:"Default"}),Object(f.jsx)("th",{className:"name"}),Object(f.jsx)("th",{className:"deleteCell"})]})}),Object(f.jsx)("tbody",{children:e.lists.map((function(t){return Object(f.jsx)("tr",{id:"list",children:l===t.id?Object(f.jsxs)("td",{colSpan:"3",className:"confirmCell",children:[Object(f.jsxs)("span",{children:["Delete ",t.listName,"?"]}),Object(f.jsx)("button",{className:"cancelDelete",onClick:function(){return d(null)},children:"No"}),Object(f.jsx)("button",{className:"deleteConfirm",onClick:function(){e.onListDeleted(t.id),d(null)},children:"Yes"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("td",{className:"default",children:Object(f.jsx)("input",{className:"defaultRadio",type:"radio",checked:t.isDefault,onChange:function(){return e.onListChanged(t.id,"isDefault",!0)}})}),Object(f.jsx)("td",{className:"name",children:Object(f.jsx)("input",{className:"listName",type:"text",value:t.listName,onChange:function(n){return e.onListChanged(t.id,"listName",n.target.value)}})}),Object(f.jsx)("td",{className:"deleteCell",children:Object(f.jsx)("button",{className:t.isDefault?"hidden":"deleteListButton",disabled:t.isDefault,onClick:function(){return d(t.id)},children:Object(f.jsx)(p.a,{icon:x.e,size:"xs"})})})]})},t.id)}))})]})}),Object(f.jsxs)("div",{id:"createListRow",children:[Object(f.jsx)("div",{id:"createInputWrapper",children:Object(f.jsx)("input",{id:"createListInput",type:"text",value:a,placeholder:"New list",onChange:function(e){return s(e.target.value)}})}),Object(f.jsx)("div",{id:"createListWrapper",children:Object(f.jsx)("button",{id:"createNewList",disabled:0===a.length,onClick:function(){e.onListAdded(a,0===e.lists.length),s("")},children:Object(f.jsx)(p.a,{icon:x.c})})})]})]})})})},M={ADD_TASK_MODE:"add_task_mode",EDIT_LISTS_MODE:"add_list_mode",DEFAULT_MODE:"default_mode",EDIT_MODE:"edit_mode",LOADING_MODE:"loading_mode"},N={ALL:"all",UNCOMPLETED:"uncompleted"};var y=function(e){var t=Object(i.useState)(M.LOADING_MODE),n=Object(j.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(M.DEFAULT_MODE),r=Object(j.a)(c,2),l=r[0],d=r[1],o=Object(i.useState)(N.ALL),u=Object(j.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)({}),p=Object(j.a)(O,2),x=p[0],D=p[1];return Object(i.useEffect)((function(){e.loading?(a!==M.LOADING_MODE&&d(a),s(M.LOADING_MODE)):0===e.lists.length||a===M.EDIT_LISTS_MODE?s(M.EDIT_LISTS_MODE):a===M.LOADING_MODE&&s(l)}),[e.loading,e.lists,a,l]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(C,{error:e.error}),Object(f.jsx)(T,{appMode:a,setAppMode:s,lists:e.lists,onListAdded:e.onListAdded,onListChanged:e.onListChanged,onListDeleted:e.onListDeleted}),Object(f.jsx)(L,{appMode:a,setAppMode:s,onItemAdded:e.onTaskAdded}),Object(f.jsx)(m,{dataLength:e.data.length,appMode:a,setAppMode:s,applyDataChanges:function(){var t=[];Object.keys(x).forEach((function(n){"delete"in x[n]&&t.push(n),Object.keys(x[n]).filter((function(e){return"delete"!==e})).forEach((function(t){e.onTaskChanged(n,t,x[n][t])}))})),t.length>0&&e.onTasksDeleted(t)},setDataChanges:D,sortParameter:e.sortParameter,setSortParameter:e.setSortParameter}),Object(f.jsx)(E,{currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,lists:e.lists,setAppMode:s}),Object(f.jsx)(v,{data:e.data,onTaskChanged:e.onTaskChanged,appMode:a,tasksShowing:b,setDataChanges:D,dataChanges:x}),Object(f.jsx)(k,{data:e.data,appMode:a,tasksShowing:b,setTasksShowing:h,onTasksDeleted:e.onTasksDeleted})]})};var A=function(e){var t=Object(i.useState)("priorityLevel desc"),n=Object(j.a)(t,2),a=n[0],s=n[1],c=e.collection.orderBy(a.split(" ")[0],a.split(" ")[1]),r=Object(h.a)(c),l=Object(j.a)(r,3),o=l[0],p=l[1],x=l[2],m=(null===o||void 0===o?void 0:o.docs.map((function(e){return e.data()})))||[];return Object(f.jsx)(y,{lists:e.lists,data:m,loading:p||e.loading,error:x||e.error,currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,onListAdded:e.onListAdded,onListDeleted:e.onListDeleted,onListChanged:e.onListChanged,sortParameter:a,setSortParameter:s,onTaskAdded:function(t,n){var i=Object(u.a)();e.collection.doc(i).set({id:i,taskName:t,priorityLevel:n,isChecked:!1,created:b.a.firestore.FieldValue.serverTimestamp()})},onTaskChanged:function(t,n,i){e.collection.doc(t).update(Object(d.a)({},n,i))},onTasksDeleted:function(t){var n,i=Object(O.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.collection.doc(a).delete()}}catch(s){i.e(s)}finally{i.f()}}})};b.a.initializeApp({apiKey:"AIzaSyDbDnRMAuOjcmsEB2iwcbt2_w6SPX-EAQo",authDomain:"cs124lab3.firebaseapp.com",projectId:"cs124lab3",storageBucket:"cs124lab3.appspot.com",messagingSenderId:"191143519167",appId:"1:191143519167:web:f33464f0d0ede5b538370a",measurementId:"G-B8CQHTFNQE"});var S=b.a.firestore(),I="lists";var _=function(){var e=Object(i.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],s=S.collection(I),c=Object(h.a)(s),r=Object(j.a)(c,3),b=r[0],O=r[1],p=r[2],x=(null===b||void 0===b?void 0:b.docs.map((function(e){return e.data()})))||[];function m(){return(m=Object(o.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.collection(I).doc(t).collection("tasks").get();case 2:return i=e.sent,e.next=5,i.docs.forEach((function(e){return e.ref.delete()}));case 5:return e.next=7,S.collection(I).doc(t).delete();case 7:n===t&&x.forEach((function(e){e.isDefault&&a(e.id)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return x.length>0&&!n&&x.forEach((function(e){e.isDefault&&a(e.id)})),Object(f.jsx)(f.Fragment,{children:n&&Object(f.jsx)(A,{collection:S.collection(I).doc(n).collection("tasks"),lists:x,loading:O,error:p,currentListID:n,setCurrentListID:a,onListAdded:function(e,t){var n=Object(u.a)();S.collection(I).doc(n).set({id:n,listName:e,isDefault:t}),a(n)},onListDeleted:function(e){return m.apply(this,arguments)},onListChanged:function e(t,n,i){"isDefault"===n&&i&&x.filter((function(e){return e.id!==t})).forEach((function(t){return e(t.id,"isDefault",!1)})),S.collection(I).doc(t).update(Object(d.a)({},n,i))}})})};c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.8d8b34c4.chunk.js.map