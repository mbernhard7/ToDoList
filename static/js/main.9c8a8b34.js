/*! For license information please see main.9c8a8b34.js.LICENSE.txt */
(()=>{var e={725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in s=Object(arguments[c]))n.call(s,l)&&(a[l]=s[l]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(725),s=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=60103,E=60106,k=60107,T=60108,S=60114,C=60109,x=60110,A=60112,N=60113,D=60120,P=60115,O=60116,R=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;I=U("react.element"),E=U("react.portal"),k=U("react.fragment"),T=U("react.strict_mode"),S=U("react.profiler"),C=U("react.provider"),x=U("react.context"),A=U("react.forward_ref"),N=U("react.suspense"),D=U("react.suspense_list"),P=U("react.memo"),O=U("react.lazy"),R=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return W(e.type);case R:return W(e._render);case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function le(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,xe=null;function Ae(e){if(e=ni(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Se(e.stateNode,e.type,t))}}function Ne(e){Ce?xe?xe.push(e):xe=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=xe;if(xe=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Le=Pe,Me=!1,Fe=!1;function je(){null===Ce&&null===xe||(Re(),De())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function Be(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var qe=!1,Ke=null,Ge=!1,He=null,We={onError:function(e){qe=!0,Ke=e}};function Qe(e,t,n,r,i,s,o,a,c){qe=!1,Ke=null,Be.apply(We,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,ct=null,lt=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(vt),ut.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==ct&&bt(ct,e),lt.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},kt={},Tt={};function St(e){if(kt[e])return kt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return kt[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=St("animationend"),xt=St("animationiteration"),At=St("animationstart"),Nt=St("transitionend"),Dt=new Map,Pt=new Map,Ot=["abort","abort",Ct,"animationEnd",xt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),l(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!==(s=134217727&n)){var c=s&~o;0!==c?(r=Mt(c),i=Lt):0!==(a&=s)&&(r=Mt(a),i=Lt)}else 0!==(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Ht=s.unstable_UserBlockingPriority,Wt=s.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||Re();var i=Jt,s=Me;Me=!0;try{Oe(i,e,t,n,r)}finally{(Me=s)||je()}}function Xt(e,t,n,r){Wt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=$t(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lt.set(s,mt(lt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Rr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Te(r);if(null!==(i=ti(i))){var s=Ye(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Xe(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var cn,ln,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(cn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=cn=0,un=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),In=an(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var xn=i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(xn),Nn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){xr(e,0)}function Jn(e){if(J(ri(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Wn(t,Yn,e,Te(e)),e=Xn,Me)e(t);else{Me=!0;try{Pe(e,t)}finally{Me=!1,je()}}}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ar(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==$(r)||("selectionStart"in(r=vr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Ot,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Er.length;kr++)Pt.set(Er[kr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=Ke;qe=!1,Ke=null,Ge||(Ge=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,l),s=c}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Nr]||(e[Nr]=!0,a.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Or(s,e,i,t),o.add(a))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=s,i=Te(n),o=[];e:{var a=Dt.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":l="focus",c=vn;break;case"focusout":l="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Dn;break;case Ct:case xt:case At:c=wn;break;case Nt:c=Pn;break;case"scroll":c=pn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ue(p,d))&&u.push(Lr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ti(l)&&!l[Zr])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?ti(l):null)&&(l!==(h=Ye(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:ri(c),f=null==l?a:ri(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==c&&jr(o,a,c,u,!1),null!==l&&null!==h&&jr(o,h,l,u,!0)}if("select"===(c=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Hn(a))if(Zn)g=cr;else{g=or;var y=sr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Ir(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Ir(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(y=Mr(r,w)).length&&(w=new In(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=qn(n))&&(w.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}xr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ue(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Ue(n,s))&&o.unshift(Lr(n,c,a)):i||null!=(c=Ue(n,s))&&o.push(Lr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,Zr="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[$r]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function ci(e){return{current:e}}function li(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=ci(hi),fi=ci(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){li(fi),li(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ui(di,t),ui(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,W(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,li(fi),li(di),ui(di,e)):li(fi),ui(fi,n)}var Ii=null,Ei=null,ki=s.unstable_runWithPriority,Ti=s.unstable_scheduleCallback,Si=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,xi=s.unstable_requestPaint,Ai=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,Pi=s.unstable_UserBlockingPriority,Oi=s.unstable_NormalPriority,Ri=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==xi?xi:function(){},ji=null,Ui=null,Vi=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function qi(){switch(Ni()){case Di:return 99;case Pi:return 98;case Oi:return 97;case Ri:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Oi;case 96:return Ri;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),ki(e,t)}function Hi(e,t,n){return e=Ki(e),Ti(e,t,n)}function Wi(){if(null!==Ui){var e=Ui;Ui=null,Si(e)}Qi()}function Qi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Di,Wi),n}finally{Vi=!1}}}var Yi=_.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),$i=null,Zi=null,es=null;function ts(){es=Zi=$i=null}function ns(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){$i=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===$i)throw Error(o(308));Zi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(null!==c){s.shared.pending=null;var l=c,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=l)}}if(null!==o){for(d=s.baseState,a=0,h=u=l=null;;){c=o.lane;var f=o.eventTime;if((r&c)===c){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(c=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,c);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=m.payload)?p.call(f,d,c):p)||void 0===c)break e;d=i({},d,c);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(c=s.effects)?s.effects=[o]:c.push(o))}else f={eventTime:f,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,a|=c;if(null===(o=o.next)){if(null===(c=s.shared.pending))break;o=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}null===h&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,za|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=fc(e),i=ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),us(e,i),pc(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Is(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Es(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ks(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Xc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Is(e,t,n),r.return=e,r):((r=Wc(n.type,n.key,n.props,null,e.mode,r)).ref=Is(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Qc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case I:return(n=Wc(t.type,t.key,t.props,null,e.mode,n)).ref=Is(e,null,t),n.return=e,n;case E:return(t=Jc(t,e.mode,n)).return=e,t}if(_s(t)||B(t))return(t=Qc(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?n.type===k?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null}if(_s(n)||B(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case I:return e=e.get(null===r.key?n:r.key)||null,r.type===k?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,c,l){var u=B(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,c){var l="object"===typeof s&&null!==s&&s.type===k&&null===s.key;l&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case I:e:{for(u=s.key,l=r;null!==l;){if(l.key===u){if(7===l.tag){if(s.type===k){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}}else if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=Is(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===k?((r=Qc(s.props.children,e.mode,c,s.key)).return=e,e=r):((c=Wc(s.type,s.key,s.props,null,e.mode,c)).ref=Is(e,r,s),c.return=e,e=c)}return a(e);case E:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jc(s,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Xc(s,e.mode,c)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,c);if(B(s))return g(e,r,s,c);if(u&&Es(e,s),"undefined"===typeof s&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Ts=ks(!0),Ss=ks(!1),Cs={},xs=ci(Cs),As=ci(Cs),Ns=ci(Cs);function Ds(e){if(e===Cs)throw Error(o(174));return e}function Ps(e,t){switch(ui(Ns,t),ui(As,e),ui(xs,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(xs),ui(xs,t)}function Os(){li(xs),li(As),li(Ns)}function Rs(e){Ds(Ns.current);var t=Ds(xs.current),n=fe(t,e.type);t!==n&&(ui(As,e),ui(xs,n))}function Ls(e){As.current===e&&(li(xs),li(As))}var Ms=ci(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=null,Us=null,Vs=!1;function zs(e,t){var n=Kc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(Vs){var t=Us;if(t){var n=t;if(!Bs(e,t)){if(!(t=Wr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Vs=!1,void(js=e);zs(js,n)}js=e,Us=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Vs=!1,js=e}}function Ks(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;js=e}function Gs(e){if(e!==js)return!1;if(!Vs)return Ks(e),Vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Us;t;)zs(e,t),t=Wr(t.nextSibling);if(Ks(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Us=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Us=null}}else Us=js?Wr(e.stateNode.nextSibling):null;return!0}function Hs(){Us=js=null,Vs=!1}var Ws=[];function Qs(){for(var e=0;e<Ws.length;e++)Ws[e]._workInProgressVersionPrimary=null;Ws.length=0}var Ys=_.ReactCurrentDispatcher,Xs=_.ReactCurrentBatchConfig,Js=0,$s=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,$s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Ys.current=Ro,e=n(r,i)}while(no)}if(Ys.current=Do,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=$s=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?$s.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=$s.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?$s.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?$s.memoizedState=eo=e:eo=eo.next=e}return eo}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=s=null,l=i;do{var u=l.lane;if((Js&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,$s.lanes|=u,za|=u}l=l.next}while(null!==l&&l!==i);null===c?s=r:c.next=a,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);lr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Ws.push(t))),e)return n(t._source);throw Ws.push(t),Error(o(350))}function fo(e,t,n,r){var i=Oa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),c=Ys.current,l=c.useState((function(){return ho(i,t,n)})),u=l[1],h=l[0];l=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=$s;return e.memoizedState={refs:f,source:t,subscribe:r},c.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!lr(a,e)){e=n(t._source),lr(h,e)||(u(e),e=fc(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var c=31-qt(o),l=1<<c;r[c]|=e,o&=~l}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fc(g);i.mutableReadLanes|=r&i.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,r]),lr(p,n)&&lr(m,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=u=No.bind(null,$s,e),l.queue=e,l.baseQueue=null,h=ho(i,t,n),l.memoizedState=l.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=No.bind(null,$s,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$s.updateQueue)?(t={lastEffect:null},$s.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();$s.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}$s.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Io(e,t){return bo(516,4,e,t)}function Eo(e,t){return bo(4,2,e,t)}function ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,ko.bind(null,t,e),n)}function So(){}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Xs.transition;Xs.transition=1;try{e(!1),t()}finally{Xs.transition=n}}))}function No(e,t,n){var r=dc(),i=fc(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===$s||null!==o&&o===$s)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=o(a,n);if(s.eagerReducer=o,s.eagerState=c,lr(c,a))return}catch(l){}pc(e,i,r)}}var Do={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Po={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,$s,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$s.mode)&&($s.flags|=516,go(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:xo,useReducer:lo,useRef:vo,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Io((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:xo,useReducer:uo,useRef:vo,useState:function(){return uo(co)},useDebugValue:So,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return Io((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ss(t,null,n,r):Ts(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Uo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Gc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?sa(e,t,s):(t.flags|=1,(e=Hc(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(s&i))return t.lanes=e.lanes,sa(e,t,s);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function zo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Ic(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ic(t,e),null;t.memoizedState={baseLanes:0},Ic(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ic(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Ko(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ss(l):l=mi(t,l=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&ws(t,o,r,l),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),c=t.memoizedState,a!==r||d!==c||fi.current||os?("function"===typeof u&&(ms(t,n,u,r),c=t.memoizedState),(a=os||ys(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Xi(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ss(c):c=mi(t,c=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&ws(t,o,r,c),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"===typeof f&&(ms(t,n,f,r),p=t.memoizedState),(l=os||ys(t,n,l,r,d,p,c))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,s,i)}function Go(e,t,n,r,i,s){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),sa(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ts(t,e.child,null,s),t.child=Ts(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Ps(e,t.containerInfo)}var Wo,Qo,Yo,Xo,Jo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ui(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ta(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Yc(t,i,0,null),n=Qc(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Hc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hc(o,a),null!==e?r=Hc(e,r):(r=Qc(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ra(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,s,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function sa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function oa(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Os(),li(fi),li(di),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gs(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:Ls(t);var s=Ds(Ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ds(xs.current),Gs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[$r]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":ce(r,a),Ar("invalid",r)}for(var l in Ee(n,a),e=null,a)a.hasOwnProperty(l)&&(s=a[l],"children"===l?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):c.hasOwnProperty(l)&&null!=s&&"onScroll"===l&&Ar("scroll",r));switch(n){case"input":X(r),re(r,a,!0);break;case"textarea":X(r),ue(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Jr]=t,e[$r]=r,Wo(e,t,!1,!1),t.stateNode=e,l=ke(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<Tr.length;s++)Ar(Tr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ce(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}Ee(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&b(e,a,h,l))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ur)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ds(Ns.current),Ds(xs.current),Gs(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gs(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Oa||0===(134217727&za)&&0===(134217727&Ba)||vc(Oa,La))),(r||n)&&(t.flags|=4),null);case 4:return Os(),Qo(t),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(li(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(l=r.rendering))if(a)oa(r,!1);else{if(0!==ja||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Fs(e))){for(t.flags|=64,oa(r,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Ha&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(l))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),oa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Vs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Ha&&1073741824!==n&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ui(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return Ec(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function ca(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Os(),li(fi),li(di),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return li(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ms),null;case 4:return Os(),null;case 10:return ns(e),null;case 23:case 24:return Ec(),null;default:return null}}function la(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},Yo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ds(xs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ee(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(l=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ar("scroll",e),a||l===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xa||(Xa=!0,Ja=r),ua(0,t)},n}function fa(e,t,n){(n=ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$a?$a=new Set([this]):$a.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pa="function"===typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vc(e,n)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function ya(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fc(n,e),Mc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function va(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wa(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Ii,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fc(t,n);else{r=t;try{i()}catch(s){Vc(r,s)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vc(t,s)}break;case 5:ma(t);break;case 4:Ta(e,t)}}function ba(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _a(e){return 5===e.tag||3===e.tag||4===e.tag}function Ia(e){e:{for(var t=e.return;null!==t;){if(_a(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ea(e,n,t):ka(e,n,t)}function Ea(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ea(e,t,n),e=e.sibling;null!==e;)Ea(e,t,n),e=e.sibling}function ka(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ka(e,t,n),e=e.sibling;null!==e;)ka(e,t,n),e=e.sibling}function Ta(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,c=i,l=c;;)if(wa(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(a=n,c=i.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Sa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,i),t=ke(e,r),i=0;i<s.length;i+=2){var a=s[i],c=s[i+1];"style"===a?_e(n,c):"dangerouslySetInnerHTML"===a?ge(n,c):"children"===a?ye(n,c):b(n,a,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ga=Bi(),va(t.child,!0)),void Ca(t);case 19:return void Ca(t);case 23:case 24:return void va(t,null!==t.memoizedState)}throw Error(o(163))}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pa),t.forEach((function(t){var r=Bc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function xa(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Aa=Math.ceil,Na=_.ReactCurrentDispatcher,Da=_.ReactCurrentOwner,Pa=0,Oa=null,Ra=null,La=0,Ma=0,Fa=ci(0),ja=0,Ua=null,Va=0,za=0,Ba=0,qa=0,Ka=null,Ga=0,Ha=1/0;function Wa(){Ha=Bi()+500}var Qa,Ya=null,Xa=!1,Ja=null,$a=null,Za=!1,ec=null,tc=90,nc=[],rc=[],ic=null,sc=0,oc=null,ac=-1,cc=0,lc=0,uc=null,hc=!1;function dc(){return 0!==(48&Pa)?Bi():-1!==ac?ac:ac=Bi()}function fc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===cc&&(cc=Va),0!==Yi.transition){0!==lc&&(lc=null!==Ka?Ka.pendingLanes:0),e=cc;var t=4186112&~lc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Pa)&&98===e?e=Ut(12,cc):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cc),e}function pc(e,t,n){if(50<sc)throw sc=0,oc=null,Error(o(185));if(null===(e=mc(e,t)))return null;Bt(e,t,n),e===Oa&&(Ba|=t,4===ja&&vc(e,La));var r=qi();1===t?0!==(8&Pa)&&0===(48&Pa)?wc(e):(gc(e,n),0===Pa&&(Wa(),Wi())):(0===(4&Pa)||98!==r&&99!==r||(null===ic?ic=new Set([e]):ic.add(e)),gc(e,n)),Ka=e}function mc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-qt(a),l=1<<c,u=s[c];if(-1===u){if(0===(l&r)||0!==(l&i)){u=t,Mt(l);var h=Lt;s[c]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(r=Ft(e,e===Oa?La:0),t=Lt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=wc.bind(null,e),null===ji?(ji=[n],Ui=Ti(Di,Qi)):ji.push(n),n=Mi):14===t?n=Hi(99,wc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,yc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yc(e){if(ac=-1,lc=cc=0,0!==(48&Pa))throw Error(o(327));var t=e.callbackNode;if(Lc()&&e.callbackNode!==t)return null;var n=Ft(e,e===Oa?La:0);if(0===n)return null;var r=n,i=Pa;Pa|=16;var s=Sc();for(Oa===e&&La===r||(Wa(),kc(e,r));;)try{Ac();break}catch(c){Tc(e,c)}if(ts(),Na.current=s,Pa=i,null!==Ra?r=0:(Oa=null,La=0,r=ja),0!==(Va&Ba))kc(e,0);else if(0!==r){if(2===r&&(Pa|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Cc(e,n))),1===r)throw t=Ua,kc(e,0),vc(e,n),gc(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pc(e);break;case 3:if(vc(e,n),(62914560&n)===n&&10<(r=Ga+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Pc.bind(null,e),r);break}Pc(e);break;case 4:if(vc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Aa(n/1960))-n)){e.timeoutHandle=Kr(Pc.bind(null,e),n);break}Pc(e);break;default:throw Error(o(329))}}return gc(e,Bi()),e.callbackNode===t?yc.bind(null,e):null}function vc(e,t){for(t&=~qa,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function wc(e){if(0!==(48&Pa))throw Error(o(327));if(Lc(),e===Oa&&0!==(e.expiredLanes&La)){var t=La,n=Cc(e,t);0!==(Va&Ba)&&(n=Cc(e,t=Ft(e,t)))}else n=Cc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Pa|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Cc(e,t))),1===n)throw n=Ua,kc(e,0),vc(e,t),gc(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pc(e),gc(e,Bi()),null}function bc(e,t){var n=Pa;Pa|=1;try{return e(t)}finally{0===(Pa=n)&&(Wa(),Wi())}}function _c(e,t){var n=Pa;Pa&=-2,Pa|=8;try{return e(t)}finally{0===(Pa=n)&&(Wa(),Wi())}}function Ic(e,t){ui(Fa,Ma),Ma|=t,Va|=t}function Ec(){Ma=Fa.current,li(Fa)}function kc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ra)for(n=Ra.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Os(),li(fi),li(di),Qs();break;case 5:Ls(r);break;case 4:Os();break;case 13:case 19:li(Ms);break;case 10:ns(r);break;case 23:case 24:Ec()}n=n.return}Oa=e,Ra=Hc(e.current,null),La=Ma=Va=t,ja=0,Ua=null,qa=Ba=za=0}function Tc(e,t){for(;;){var n=Ra;try{if(ts(),Ys.current=Do,to){for(var r=$s.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=$s=null,no=!1,Da.current=null,null===n||null===n.return){ja=1,Ua=t,Ra=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=ls(-1,1);v.tag=2,us(a,v)}a.lanes|=1;break e}c=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ha,c=new Set,w.set(l,c)):void 0===(c=w.get(l))&&(c=new Set,w.set(l,c)),!c.has(a)){c.add(a);var b=zc.bind(null,s,l,a);l.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),c=la(c,a),d=o;do{switch(d.tag){case 3:s=c,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,da(0,s,t));break e;case 1:s=c;var _=d.type,I=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==I&&"function"===typeof I.componentDidCatch&&(null===$a||!$a.has(I)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,fa(d,s,t));break e}}d=d.return}while(null!==d)}Dc(n)}catch(E){t=E,Ra===n&&null!==n&&(Ra=n=n.return);continue}break}}function Sc(){var e=Na.current;return Na.current=Do,null===e?Do:e}function Cc(e,t){var n=Pa;Pa|=16;var r=Sc();for(Oa===e&&La===t||kc(e,t);;)try{xc();break}catch(i){Tc(e,i)}if(ts(),Pa=n,Na.current=r,null!==Ra)throw Error(o(261));return Oa=null,La=0,ja}function xc(){for(;null!==Ra;)Nc(Ra)}function Ac(){for(;null!==Ra&&!Ci();)Nc(Ra)}function Nc(e){var t=Qa(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,null===t?Dc(e):Ra=t,Da.current=null}function Dc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=aa(n,t,Ma)))return void(Ra=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ca(t)))return n.flags&=2047,void(Ra=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ra=t);Ra=t=e}while(null!==t);0===ja&&(ja=5)}function Pc(e){var t=qi();return Gi(99,Oc.bind(null,e,t)),null}function Oc(e,t){do{Lc()}while(null!==ec);if(0!==(48&Pa))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<s;){var l=31-qt(s),u=1<<l;i[l]=0,a[l]=-1,c[l]=-1,s&=~u}if(null!==ic&&0===(24&r)&&ic.has(e)&&ic.delete(e),e===Oa&&(Ra=Oa=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pa,Pa|=32,Da.current=null,Vr=Qt,gr(a=mr())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(u=c.getSelection&&c.getSelection())&&0!==u.rangeCount){c=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{c.nodeType,l.nodeType}catch(S){c=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==c||0!==s&&3!==g.nodeType||(d=h+s),g!==l||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===c&&++p===s&&(d=h),y===l&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}c=-1===d||-1===f?null:{start:d,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;zr={focusedElem:a,selectionRange:c},Qt=!1,uc=null,hc=!1,Ya=r;do{try{Rc()}catch(S){if(null===Ya)throw Error(o(330));Vc(Ya,S),Ya=Ya.nextEffect}}while(null!==Ya);uc=null,Ya=r;do{try{for(a=e;null!==Ya;){var w=Ya.flags;if(16&w&&ye(Ya.stateNode,""),128&w){var b=Ya.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:Ia(Ya),Ya.flags&=-3;break;case 6:Ia(Ya),Ya.flags&=-3,Sa(Ya.alternate,Ya);break;case 1024:Ya.flags&=-1025;break;case 1028:Ya.flags&=-1025,Sa(Ya.alternate,Ya);break;case 4:Sa(Ya.alternate,Ya);break;case 8:Ta(a,c=Ya);var I=c.alternate;ba(c),null!==I&&ba(I)}Ya=Ya.nextEffect}}catch(S){if(null===Ya)throw Error(o(330));Vc(Ya,S),Ya=Ya.nextEffect}}while(null!==Ya);if(_=zr,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),c=w.textContent.length,I=Math.min(a.start,c),a=void 0===a.end?I:Math.min(a.end,c),!_.extend&&I>a&&(c=a,a=I,I=c),c=fr(w,I),s=fr(w,a),c&&s&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),I>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!Vr,zr=Vr=null,e.current=n,Ya=r;do{try{for(w=e;null!==Ya;){var E=Ya.flags;if(36&E&&ya(w,Ya.alternate,Ya),128&E){b=void 0;var k=Ya.ref;if(null!==k){var T=Ya.stateNode;Ya.tag,b=T,"function"===typeof k?k(b):k.current=b}}Ya=Ya.nextEffect}}catch(S){if(null===Ya)throw Error(o(330));Vc(Ya,S),Ya=Ya.nextEffect}}while(null!==Ya);Ya=null,Fi(),Pa=i}else e.current=n;if(Za)Za=!1,ec=e,tc=t;else for(Ya=r;null!==Ya;)t=Ya.nextEffect,Ya.nextEffect=null,8&Ya.flags&&((E=Ya).sibling=null,E.stateNode=null),Ya=t;if(0===(r=e.pendingLanes)&&($a=null),1===r?e===oc?sc++:(sc=0,oc=e):sc=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Ii,n,void 0,64===(64&n.current.flags))}catch(S){}if(gc(e,Bi()),Xa)throw Xa=!1,e=Ja,Ja=null,e;return 0!==(8&Pa)||Wi(),null}function Rc(){for(;null!==Ya;){var e=Ya.alternate;hc||null===uc||(0!==(8&Ya.flags)?Ze(Ya,uc)&&(hc=!0):13===Ya.tag&&xa(e,Ya)&&Ze(Ya,uc)&&(hc=!0));var t=Ya.flags;0!==(256&t)&&ga(e,Ya),0===(512&t)||Za||(Za=!0,Hi(97,(function(){return Lc(),null}))),Ya=Ya.nextEffect}}function Lc(){if(90!==tc){var e=97<tc?97:tc;return tc=90,Gi(e,jc)}return!1}function Mc(e,t){nc.push(t,e),Za||(Za=!0,Hi(97,(function(){return Lc(),null})))}function Fc(e,t){rc.push(t,e),Za||(Za=!0,Hi(97,(function(){return Lc(),null})))}function jc(){if(null===ec)return!1;var e=ec;if(ec=null,0!==(48&Pa))throw Error(o(331));var t=Pa;Pa|=32;var n=rc;rc=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(n=nc,nc=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var c=i.create;i.destroy=c()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Pa=t,Wi(),!0}function Uc(e,t,n){us(e,t=da(0,t=la(n,t),1)),t=dc(),null!==(e=mc(e,1))&&(Bt(e,1,t),gc(e,t))}function Vc(e,t){if(3===e.tag)Uc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$a||!$a.has(r))){var i=fa(n,e=la(t,e),1);if(us(n,i),i=dc(),null!==(n=mc(n,1)))Bt(n,1,i),gc(n,i);else if("function"===typeof r.componentDidCatch&&(null===$a||!$a.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function zc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Oa===e&&(La&n)===n&&(4===ja||3===ja&&(62914560&La)===La&&500>Bi()-Ga?kc(e,0):qa|=n),gc(e,t)}function Bc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===cc&&(cc=Va),0===(t=Vt(62914560&~cc))&&(t=4194304))),n=dc(),null!==(e=mc(e,t))&&(Bt(e,t,n),gc(e,n))}function qc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Kc(e,t,n,r){return new qc(e,t,n,r)}function Gc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hc(e,t){var n=e.alternate;return null===n?((n=Kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Gc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Qc(n.children,i,s,t);case M:a=8,i|=16;break;case T:a=8,i|=1;break;case S:return(e=Kc(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=s,e;case N:return(e=Kc(13,n,t,i)).type=N,e.elementType=N,e.lanes=s,e;case D:return(e=Kc(19,n,t,i)).elementType=D,e.lanes=s,e;case F:return Yc(n,i,s,t);case j:return(e=Kc(24,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case x:a=9;break e;case A:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e;case R:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Kc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Qc(e,t,n,r){return(e=Kc(7,e,r,t)).lanes=n,e}function Yc(e,t,n,r){return(e=Kc(23,e,r,t)).elementType=F,e.lanes=n,e}function Xc(e,t,n){return(e=Kc(6,e,null,t)).lanes=n,e}function Jc(e,t,n){return(t=Kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zc(e,t,n,r){var i=t.current,s=dc(),a=fc(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(gi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=wi(n,l,c);break e}}n=c}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ls(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),us(i,t),pc(i,a,s),a}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $c(e,t,null!=n&&!0===n.hydrate),t=Kc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=el(o);a.call(e)}}Zc(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var c=i;i=function(){var e=el(o);c.call(e)}}_c((function(){Zc(t,o,e,i)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Ho(t),Hs();break;case 5:Rs(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Ps(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(ui(Ms,1&Ms.current),null!==(t=sa(e,t,n))?t.sibling:null);ui(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return sa(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Go(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Gc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Hs(),t=sa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Us=Wr(t.stateNode.containerInfo.firstChild),js=t,s=Vs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Ws.push(s);for(n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Hs();t=t.child}return t;case 5:return Rs(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),Bo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return $o(e,t,n);case 4:return Ps(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ts(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var c=t.type._context;if(ui(Ji,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=lr(c,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823))){if(a.children===i.children&&!fi.current){t=sa(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===c.tag&&((u=ls(-1,n&-n)).tag=2,us(c,u)),c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),rs(c.return,n),l.lanes|=n;break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Xi(i=t.type,t.pendingProps),Uo(e,t,i,s=Xi(i.type,s),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rl.prototype.render=function(e){Zc(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zc(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pc(e,4,dc()),nl(e,4))},tt=function(e){13===e.tag&&(pc(e,67108864,dc()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=dc(),n=fc(e);pc(e,n,t),nl(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=bc,Oe=function(e,t,n,r,i){var s=Pa;Pa|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Pa=s)&&(Wa(),Wi())}},Re=function(){0===(49&Pa)&&(function(){if(null!==ic){var e=ic;ic=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gc(e,Bi())}))}Wi()}(),Lc())},Le=function(e,t){var n=Pa;Pa|=2;try{return e(t)}finally{0===(Pa=n)&&(Wa(),Wi())}};var al={Events:[ni,ri,ii,Ne,De,Lc,{current:!1}]},cl={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ll={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{Ii=ul.inject(ll),Ei=ul}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pa;if(0!==(48&n))return e(t);Pa|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Pa=n,Wi()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(_c((function(){sl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bc,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return sl(e,t,n,!1,r)},t.version="17.0.2"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:o.current}}t.jsx=l,t.jsxs=l},117:(e,t,n)=>{"use strict";var r=n(725),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,c=60112;t.Suspense=60113;var l=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!I.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===s[r]&&(s[r]=c[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case s:c=!0}}if(c)return o=o(c=e),e=""===r?"."+S(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=r+S(a=e[l],l);c+=C(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=C(a=a.value,t,n,u=r+S(a,l++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function x(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function D(){var e=N.current;if(null===e)throw Error(f(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!I.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,u=null,h=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>T(o,n))void 0!==c&&0>T(c,o)?(e[r]=c,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==c&&0>T(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],x=1,A=null,N=3,D=!1,P=!1,O=!1;function R(e){for(var t=E(C);null!==t;){if(null===t.callback)k(C);else{if(!(t.startTime<=e))break;k(C),t.sortIndex=t.expirationTime,I(S,t)}t=E(C)}}function L(e){if(O=!1,R(e),!P)if(null!==E(S))P=!0,n(M);else{var t=E(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,O&&(O=!1,i()),D=!0;var s=N;try{for(R(n),A=E(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var a=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?A.callback=a:A===E(S)&&k(S),R(n)}else k(S);A=E(S)}if(null!==A)var c=!0;else{var l=E(C);null!==l&&r(L,l.startTime-n),c=!1}return c}finally{A=null,N=s,D=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return E(S)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:x++,callback:s,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>a?(e.sortIndex=o,I(C,e),null===E(S)&&e===E(C)&&(O?i():O=!0,r(L,o-a))):(e.sortIndex=c,I(S,e),P||D||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>b,SDK_VERSION:()=>Ee,_DEFAULT_ENTRY_NAME:()=>he,_addComponent:()=>me,_addOrOverwriteComponent:()=>ge,_apps:()=>fe,_clearComponents:()=>be,_components:()=>pe,_getProvider:()=>ve,_registerComponent:()=>ye,_removeServiceInstance:()=>we,deleteApp:()=>Ce,getApp:()=>Te,getApps:()=>Se,initializeApp:()=>ke,onLog:()=>Ae,registerVersion:()=>xe,setLogLevel:()=>Ne});var t=n(791),r=n(164);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const c=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==c)throw new o;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=l(e[n],t[n]));return e}const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function g(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function y(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function v(){const e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(I,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b(n,s,t)}}const I=/\{\$([^}]+)}/g;function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(T(n)&&T(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function S(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function C(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function x(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function A(e,t){const n=new N(e,t);return n.subscribe.bind(n)}class N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function D(){}function P(e){return e&&e._delegate?e._delegate:e}class O{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const R="[DEFAULT]";class L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:R})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Kw){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===R?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Kw){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.component?this.component.multipleInstances?e:R:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const F=[];var j;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(j||(j={}));const U={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},V=j.INFO,z={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},B=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=z[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class q{constructor(e){this.name=e,this._logLevel=V,this._logHandler=B,this._userLogHandler=null,F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in j))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?U[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...t),this._logHandler(this,j.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...t),this._logHandler(this,j.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,j.INFO,...t),this._logHandler(this,j.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,j.WARN,...t),this._logHandler(this,j.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,j.ERROR,...t),this._logHandler(this,j.ERROR,...t)}}const K=(e,t)=>t.some((t=>e instanceof t));let G,H;const W=new WeakMap,Q=new WeakMap,Y=new WeakMap,X=new WeakMap,J=new WeakMap;let $={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Q.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return te(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ne(this),n),te(W.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(e.apply(ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ne(this),t,...r);return Y.set(s,t.sort?t.sort():[t]),te(s)}}function ee(e){return"function"===typeof e?Z(e):(e instanceof IDBTransaction&&function(e){if(Q.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Q.set(e,t)}(e),K(e,G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$):e)}function te(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(te(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&W.set(t,e)})).catch((()=>{})),J.set(t,e),t}(e);if(X.has(e))return X.get(e);const t=ee(e);return t!==e&&(X.set(e,t),J.set(t,e)),t}const ne=e=>J.get(e);const re=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],se=new Map;function oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(se.get(t))return se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!re.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return se.set(t,s),s}$=(e=>({...e,get:(t,n,r)=>oe(t,n)||e.get(t,n,r),has:(t,n)=>!!oe(t,n)||e.has(t,n)}))($);class ae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ce="@firebase/app",le="0.9.13",ue=new q("@firebase/app"),he="[DEFAULT]",de={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,pe=new Map;function me(e,t){try{e.container.addComponent(t)}catch(n){ue.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ge(e,t){e.container.addOrOverwriteComponent(t)}function ye(e){const t=e.name;if(pe.has(t))return ue.debug("There were multiple attempts to register component ".concat(t,".")),!1;pe.set(t,e);for(const n of fe.values())me(n,e);return!0}function ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function we(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:he;ve(e,t).clearInstance(n)}function be(){pe.clear()}const _e=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ie{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new O("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _e.create("app-deleted",{appName:this._name})}}const Ee="9.23.0";function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:he,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw _e.create("bad-app-name",{appName:String(i)});if(n||(n=d()),!n)throw _e.create("no-options");const s=fe.get(i);if(s){if(k(n,s.options)&&k(r,s.config))return s;throw _e.create("duplicate-app",{appName:i})}const o=new M(i);for(const c of pe.values())o.addComponent(c);const a=new Ie(n,r,o);return fe.set(i,a),a}function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;const t=fe.get(e);if(!t&&e===he&&d())return ke();if(!t)throw _e.create("no-app",{appName:e});return t}function Se(){return Array.from(fe.values())}async function Ce(e){const t=e.name;fe.has(t)&&(fe.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function xe(e,t,n){var r;let i=null!==(r=de[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ue.warn(e.join(" "))}ye(new O("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ae(e,t){if(null!==e&&"function"!==typeof e)throw _e.create("invalid-log-argument");!function(e,t){for(const n of F){let r=null;t&&t.level&&(r=U[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:j[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Ne(e){var t;t=e,F.forEach((e=>{e.setLogLevel(t)}))}const De="firebase-heartbeat-database",Pe=1,Oe="firebase-heartbeat-store";let Re=null;function Le(){return Re||(Re=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=te(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(te(o.result),e.oldVersion,e.newVersion,te(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(De,Pe,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Oe)}}).catch((e=>{throw _e.create("idb-open",{originalErrorMessage:e.message})}))),Re}async function Me(e,t){try{const n=(await Le()).transaction(Oe,"readwrite"),r=n.objectStore(Oe);await r.put(t,Fe(e)),await n.done}catch(n){if(n instanceof b)ue.warn(n.message);else{const e=_e.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ue.warn(e.message)}}}function Fe(e){return"".concat(e.name,"!").concat(e.options.appId)}class je{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ve(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ue();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ue(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ze(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ze(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=a(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ue(){return(new Date).toISOString().substring(0,10)}class Ve{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Le();return await t.transaction(Oe).objectStore(Oe).get(Fe(e))}catch(t){if(t instanceof b)ue.warn(t.message);else{const e=_e.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ue.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Me(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Me(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ze(e){return a(JSON.stringify({version:2,heartbeats:e})).length}var Be;Be="",ye(new O("platform-logger",(e=>new ae(e)),"PRIVATE")),ye(new O("heartbeat",(e=>new je(e)),"PRIVATE")),xe(ce,le,Be),xe(ce,le,"esm2017"),xe("fire-js","");function qe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ge="EMAIL_SIGNIN",He="PASSWORD_RESET",We="RECOVER_EMAIL",Qe="REVERT_SECOND_FACTOR_ADDITION",Ye="VERIFY_AND_CHANGE_EMAIL",Xe="VERIFY_EMAIL";function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $e=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ze=Je,et=new _("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new q("@firebase/auth");function nt(e){if(tt.logLevel<=j.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tt.error("Auth (".concat(Ee,"): ").concat(e),...n)}}function rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw at(e,...n)}function it(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return at(e,...n)}function st(e,t,n){const r=Object.assign(Object.assign({},Ze()),{[t]:n});return new _("auth","Firebase",r).create(t,{appName:e.name})}function ot(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&rt(e,"argument-error"),st(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function at(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return et.create(e,...n)}function ct(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw at(t,...r)}}function lt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw nt(t),new Error(t)}function ut(e,t){e||lt(t)}function ht(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dt(){return"http:"===ft()||"https:"===ft()}function ft(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class pt{constructor(e,t){this.shortDelay=e,this.longDelay=t,ut(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||y()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dt()||g()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function mt(e,t){ut(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class gt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vt=new pt(3e4,6e4);function wt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function bt(e,t,n,r){return _t(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=S(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),gt.fetch()(Et(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function _t(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},yt),t);try{const t=new kt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Tt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Tt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Tt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Tt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw st(e,a,o);rt(e,a)}}catch(i){if(i instanceof b)throw i;rt(e,"network-request-failed",{message:String(i)})}}async function It(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await bt(e,t,n,r,i);return"mfaPendingCredential"in s&&rt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Et(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?mt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class kt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(it(this.auth,"network-request-failed"))),vt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=it(e,t,r);return i.customData._tokenResponse=n,i}function St(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ct(e){return 1e3*Number(e)}function xt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(nt("Failed to decode base64 JWT payload"),null)}catch(i){return nt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function At(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof b&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Nt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Dt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=St(this.lastLoginAt),this.creationTime=St(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await At(e,async function(e,t){return bt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ct(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=qe(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct("undefined"!==typeof e.idToken,"internal-error"),ct("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=xt(e);return ct(t,"internal-error"),ct("undefined"!==typeof t.exp,"internal-error"),ct("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ct(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _t(e,{},(async()=>{const n=S({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Et(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ot;return n&&(ct("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ct("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ct("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return lt("not implemented")}}function Rt(e,t){ct("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Lt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=qe(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await At(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=P(e),r=await n.getIdToken(t),i=xt(r);ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:St(Ct(i.auth_time)),issuedAtTime:St(Ct(i.iat)),expirationTime:St(Ct(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=P(e);await Pt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Lt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await At(this,async function(e,t){return bt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;ct(v&&I,e,"internal-error");const E=Ot.fromJSON(this.name,I);ct("string"===typeof v,e,"internal-error"),Rt(u,e.name),Rt(h,e.name),ct("boolean"===typeof w,e,"internal-error"),ct("boolean"===typeof b,e,"internal-error"),Rt(d,e.name),Rt(f,e.name),Rt(p,e.name),Rt(m,e.name),Rt(g,e.name),Rt(y,e.name);const k=new Lt({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ot;r.updateFromServerResponse(t);const i=new Lt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pt(i),i}}const Mt=new Map;function Ft(e){ut(e instanceof Function,"Expected a class definition");let t=Mt.get(e);return t?(ut(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mt.set(e,t),t)}class jt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jt.type="NONE";const Ut=jt;function Vt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Vt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zt(Ft(Ut),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ft(Ut);const s=Vt(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Lt._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(Kw){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(Kw){}}))),new zt(i,e,n)):new zt(i,e,n)}}function Bt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ht(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qt(t))return"Blackberry";if(Yt(t))return"Webos";if(Kt(t))return"Safari";if((t.includes("chrome/")||Gt(t))&&!t.includes("edge/"))return"Chrome";if(Wt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/firefox\//i.test(e)}function Kt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/crios\//i.test(e)}function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iemobile/i.test(e)}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/android/i.test(e)}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/blackberry/i.test(e)}function Yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/webos/i.test(e)}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return Xt(e)||Wt(e)||Yt(e)||Qt(e)||/windows phone/i.test(e)||Ht(e)}function $t(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Bt(p());break;case"Worker":t="".concat(Bt(p()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ee,"/").concat(r)}async function Zt(e,t){return bt(e,"GET","/v2/recaptchaConfig",wt(e,t))}function en(e){return void 0!==e&&void 0!==e.getResponse}function tn(e){return void 0!==e&&void 0!==e.enterprise}class nn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function rn(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=it("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function sn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class on{constructor(e){this.type="recaptcha-enterprise",this.auth=un(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;tn(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Zt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new nn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&tn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));rn("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function an(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new on(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class cn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ln{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hn(this),this.idTokenSubscription=new hn(this),this.beforeStateQueue=new cn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ft(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?P(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ft(e))}))}async initializeRecaptchaConfig(){const e=await Zt(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new nn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new on(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ft(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await zt.create(this,[Ft(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ct(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$t(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(tt.logLevel<=j.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tt.warn("Auth (".concat(Ee,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function un(e){return P(e)}class hn{constructor(e){this.auth=e,this.observer=null,this.addObserver=A((e=>this.observer=e))}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dn(e,t,n){const r=un(e);ct(r._canInitEmulator,r,"emulator-config-failed"),ct(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=fn(t),{host:o,port:a}=function(e){const t=fn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pn(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lt("not implemented")}_getIdTokenResponse(e){return lt("not implemented")}_linkToIdToken(e,t){return lt("not implemented")}_getReauthenticationResolver(e){return lt("not implemented")}}async function gn(e,t){return bt(e,"POST","/v1/accounts:resetPassword",wt(e,t))}async function yn(e,t){return bt(e,"POST","/v1/accounts:update",t)}async function vn(e,t){return It(e,"POST","/v1/accounts:signInWithPassword",wt(e,t))}async function wn(e,t){return bt(e,"POST","/v1/accounts:sendOobCode",wt(e,t))}async function bn(e,t){return wn(e,t)}async function _n(e,t){return wn(e,t)}class In extends mn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new In(e,t,"password")}static _fromEmailAndCode(e,t){return new In(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await an(e,n,"signInWithPassword");return vn(e,t)}return vn(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await an(e,n,"signInWithPassword");return vn(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return It(e,"POST","/v1/accounts:signInWithEmailLink",wt(e,t))}(e,{email:this._email,oobCode:this._password});default:rt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return yn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return It(e,"POST","/v1/accounts:signInWithEmailLink",wt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function En(e,t){return It(e,"POST","/v1/accounts:signInWithIdp",wt(e,t))}class kn extends mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=qe(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new kn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return En(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,En(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,En(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=S(t)}return e}}const Tn={USER_NOT_FOUND:"user-not-found"};class Sn extends mn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Sn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Sn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return It(e,"POST","/v1/accounts:signInWithPhoneNumber",wt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await It(e,"POST","/v1/accounts:signInWithPhoneNumber",wt(e,t));if(n.temporaryProof)throw Tt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return It(e,"POST","/v1/accounts:signInWithPhoneNumber",wt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Tn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Sn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Cn{constructor(e){var t,n,r,i,s,o;const a=C(x(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ct(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=C(x(e)).link,n=t?C(x(t)).deep_link_id:null,r=C(x(e)).deep_link_id;return(r?C(x(r)).link:null)||r||n||t||e}(e);try{return new Cn(t)}catch(Kw){return null}}}class xn{constructor(){this.providerId=xn.PROVIDER_ID}static credential(e,t){return In._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cn.parseLink(t);return ct(n,"argument-error"),In._fromEmailAndCode(e,n.code,n.tenantId)}}xn.PROVIDER_ID="password",xn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class An{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nn extends An{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dn extends Nn{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ct("providerId"in t&&"signInMethod"in t,"argument-error"),kn._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ct(e.idToken||e.accessToken,"argument-error"),kn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Dn.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dn.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Dn(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class Pn extends Nn{constructor(){super("facebook.com")}static credential(e){return kn._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pn.credential(t.oauthAccessToken)}catch(Kw){return null}}}Pn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pn.PROVIDER_ID="facebook.com";class On extends Nn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kn._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return On.credential(n,r)}catch(Kw){return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com",On.PROVIDER_ID="google.com";class Rn extends Nn{constructor(){super("github.com")}static credential(e){return kn._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Rn.credential(t.oauthAccessToken)}catch(Kw){return null}}}Rn.GITHUB_SIGN_IN_METHOD="github.com",Rn.PROVIDER_ID="github.com";class Ln extends mn{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return En(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,En(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,En(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Ln(n,i):null}static _create(e,t){return new Ln(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mn extends An{constructor(e){ct(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Mn.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Mn.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ln.fromJSON(e);return ct(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Ln._create(r,n)}catch(i){return null}}}class Fn extends Nn{constructor(){super("twitter.com")}static credential(e,t){return kn._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fn.credential(n,r)}catch(Kw){return null}}}async function jn(e,t){return It(e,"POST","/v1/accounts:signUp",wt(e,t))}Fn.TWITTER_SIGN_IN_METHOD="twitter.com",Fn.PROVIDER_ID="twitter.com";class Un{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Lt._fromIdTokenResponse(e,n,r),s=Vn(n);return new Un({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Vn(n);return new Un({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Vn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zn extends b{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zn(e,t,n,r)}}function Bn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zn._fromErrorAndOperation(e,n,t,r);throw n}))}function qn(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Kn(e,t){const n=P(e);await Hn(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return bt(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=qn(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Gn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await At(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Un._forOperation(e,"link",r)}async function Hn(e,t,n){await Pt(t);const r=!1===e?"provider-already-linked":"no-such-provider";ct(qn(t.providerData).has(n)===e,t.auth,r)}async function Wn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await At(e,Bn(r,i,t,e),n);ct(s.idToken,r,"internal-error");const o=xt(s.idToken);ct(o,r,"internal-error");const{sub:a}=o;return ct(e.uid===a,r,"user-mismatch"),Un._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&rt(r,"user-mismatch"),s}}async function Qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Bn(e,r,t),s=await Un._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Yn(e,t){return Qn(un(e),t)}async function Xn(e,t){const n=P(e);return await Hn(!1,n,t.providerId),Gn(n,t)}async function Jn(e,t){return Wn(P(e),t)}async function $n(e,t){const n=un(e),r=await async function(e,t){return It(e,"POST","/v1/accounts:signInWithCustomToken",wt(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Un._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Zn{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?er._fromServerResponse(e,t):"totpInfo"in t?tr._fromServerResponse(e,t):rt(e,"internal-error")}}class er extends Zn{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new er(t)}}class tr extends Zn{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tr(t)}}function nr(e,t,n){var r;ct((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ct("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ct(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ct(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function rr(e,t){await async function(e,t){return bt(e,"POST","/v1/accounts:update",wt(e,t))}(P(e),{oobCode:t})}async function ir(e,t){const n=P(e),r=await gn(n,{oobCode:t}),i=r.requestType;switch(ct(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ct(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ct(r.mfaInfo,n,"internal-error");default:ct(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Zn._fromServerResponse(un(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function sr(e,t,n){var r;const i=un(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await an(i,s,"signUpPassword");o=jn(i,e)}else o=jn(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await an(i,s,"signUpPassword");return jn(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),c=await Un._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function or(e,t,n){return Yn(P(e),xn.credential(t,n))}async function ar(e,t){const n={identifier:t,continueUri:dt()?ht():"http://localhost"},{signinMethods:r}=await async function(e,t){return bt(e,"POST","/v1/accounts:createAuthUri",wt(e,t))}(P(e),n);return r||[]}async function cr(e,t){const n=P(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&nr(n.auth,r,t);const{email:i}=await async function(e,t){return wn(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function lr(e,t,n){const r=P(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&nr(r.auth,i,n);const{email:s}=await async function(e,t){return wn(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ur(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=P(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await At(i,async function(e,t){return bt(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function hr(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await At(e,yn(r,i));await e._updateTokensIfNecessary(s,!0)}class dr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class fr extends dr{constructor(e,t,n,r){super(e,t,n),this.username=r}}class pr extends dr{constructor(e,t){super(e,"facebook.com",t)}}class mr extends fr{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class gr extends dr{constructor(e,t){super(e,"google.com",t)}}class yr extends fr{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vr(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=xt(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dr(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new pr(s,i);case"github.com":return new mr(s,i);case"google.com":return new gr(s,i);case"twitter.com":return new yr(s,i,e.screenName||null);case"custom":case"anonymous":return new dr(s,null);default:return new dr(s,r,i)}}(n)}class wr{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new wr("enroll",e,t)}static _fromMfaPendingCredential(e){return new wr("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wr._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wr._fromIdtoken(e.multiFactorSession.idToken)}return null}}class br{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=un(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Zn._fromServerResponse(n,e)));ct(r.mfaPendingCredential,n,"internal-error");const s=wr._fromMfaPendingCredential(r.mfaPendingCredential);return new br(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Un._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ct(t.user,n,"internal-error"),Un._forOperation(t.user,t.operationType,o);default:rt(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class _r{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Zn._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new _r(e)}async getSession(){return wr._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await At(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await At(this.user,function(e,t){return bt(e,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Ir=new WeakMap;const Er="__sak";class kr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Er,"1"),this.storage.removeItem(Er),Promise.resolve(!0)):Promise.resolve(!1)}catch(Kw){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Tr extends kr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=p();return Kt(e)||Xt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Jt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);v()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tr.type="LOCAL";const Sr=Tr;class Cr extends kr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cr.type="SESSION";const xr=Cr;class Ar{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ar(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ar.receivers=[];class Dr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Nr("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Pr(){return window}function Or(){return"undefined"!==typeof Pr().WorkerGlobalScope&&"function"===typeof Pr().importScripts}const Rr="firebaseLocalStorageDb",Lr="firebaseLocalStorage",Mr="fbase_key";class Fr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function jr(e,t){return e.transaction([Lr],t?"readwrite":"readonly").objectStore(Lr)}function Ur(){const e=indexedDB.open(Rr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Lr,{keyPath:Mr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Lr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Rr);return new Fr(e).toPromise()}(),t(await Ur()))}))}))}async function Vr(e,t,n){const r=jr(e,!0).put({[Mr]:t,value:n});return new Fr(r).toPromise()}function zr(e,t){const n=jr(e,!0).delete(t);return new Fr(n).toPromise()}class Br{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ur()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Or()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ar._getInstance(Or()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Dr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Kw){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ur();return await Vr(e,Er,"1"),await zr(e,Er),!0}catch(Kw){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Vr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=jr(e,!1).get(t),r=await new Fr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>zr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=jr(e,!1).getAll();return new Fr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Br.type="LOCAL";const qr=Br;const Kr=1e12;class Gr{constructor(e){this.auth=e,this.counter=Kr,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Hr(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Kr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Kr;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Kr;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Hr{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ct(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wr=sn("rcb"),Qr=new pt(3e4,6e4);class Yr{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Pr().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ct(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&en(Pr().grecaptcha)?Promise.resolve(Pr().grecaptcha):new Promise(((n,r)=>{const i=Pr().setTimeout((()=>{r(it(e,"network-request-failed"))}),Qr.get());Pr()[Wr]=()=>{Pr().clearTimeout(i),delete Pr()[Wr];const s=Pr().grecaptcha;if(!s||!en(s))return void r(it(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};rn("".concat("https://www.google.com/recaptcha/api.js?","?").concat(S({onload:Wr,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(it(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Pr().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xr{async load(e){return new Gr(e)}clearedOneInstance(){}}const Jr="recaptcha",$r={theme:"light",type:"image"};class Zr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},$r),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=Jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(n),this.isInvisible="invisible"===this.parameters.size,ct("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;ct(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xr:new Yr,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ct(!this.parameters.sitekey,this.auth,"argument-error"),ct(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ct("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Pr()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ct(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ct(dt()&&!Or(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await bt(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ct(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ct(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ei{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Sn._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ti(e,t,n){var r;const i=await n.verify();try{let s;if(ct("string"===typeof i,e,"argument-error"),ct(n.type===Jr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ct("enroll"===t.type,e,"internal-error");const n=await function(e,t){return bt(e,"POST","/v2/accounts/mfaEnrollment:start",wt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ct("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ct(n,e,"missing-multi-factor-info");const o=await function(e,t){return bt(e,"POST","/v2/accounts/mfaSignIn:start",wt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return bt(e,"POST","/v1/accounts:sendVerificationCode",wt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ni{constructor(e){this.providerId=ni.PROVIDER_ID,this.auth=un(e)}verifyPhoneNumber(e,t){return ti(this.auth,e,P(t))}static credential(e,t){return Sn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ni.credentialFromTaggedObject(t)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Sn._fromTokenResponse(n,r):null}}function ri(e,t){return t?Ft(t):(ct(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ni.PROVIDER_ID="phone",ni.PHONE_SIGN_IN_METHOD="phone";class ii extends mn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return En(e,this._buildIdpRequest())}_linkToIdToken(e,t){return En(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return En(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function si(e){return Qn(e.auth,new ii(e),e.bypassAuthState)}function oi(e){const{auth:t,user:n}=e;return ct(n,t,"internal-error"),Wn(n,new ii(e),e.bypassAuthState)}async function ai(e){const{auth:t,user:n}=e;return ct(n,t,"internal-error"),Gn(n,new ii(e),e.bypassAuthState)}class ci{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return si;case"linkViaPopup":case"linkViaRedirect":return ai;case"reauthViaPopup":case"reauthViaRedirect":return oi;default:rt(this.auth,"internal-error")}}resolve(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const li=new pt(2e3,1e4);class ui extends ci{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ui.currentPopupAction&&ui.currentPopupAction.cancel(),ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){ut(1===this.filter.length,"Popup operations only handle one event");const e=Nr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(it(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,li.get())};e()}}ui.currentPopupAction=null;const hi="pendingRedirect",di=new Map;class fi extends ci{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=di.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=yi(t),r=gi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}di.set(this.auth._key(),e)}return this.bypassAuthState||di.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function pi(e,t){return gi(e)._set(yi(t),"true")}function mi(e,t){di.set(e._key(),t)}function gi(e){return Ft(e._redirectPersistence)}function yi(e){return Vt(hi,e.config.apiKey,e.name)}function vi(e,t,n){return async function(e,t,n){const r=un(e);ot(e,t,An),await r._initializationPromise;const i=ri(r,n);return await pi(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function wi(e,t,n){return async function(e,t,n){const r=P(e);ot(r.auth,t,An),await r.auth._initializationPromise;const i=ri(r.auth,n);await pi(i,r.auth);const s=await Ii(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function bi(e,t,n){return async function(e,t,n){const r=P(e);ot(r.auth,t,An),await r.auth._initializationPromise;const i=ri(r.auth,n);await Hn(!1,r,t.providerId),await pi(i,r.auth);const s=await Ii(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function _i(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=un(e),i=ri(r,t),s=new fi(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Ii(e){const t=Nr("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Ei{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ti(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ti(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(it(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ki(e))}saveEventToCache(e){this.cachedEventUids.add(ki(e)),this.lastProcessedEventTime=Date.now()}}function ki(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ti(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Si(e){return bt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xi=/^https?/;function Ai(e){const t=ht(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!xi.test(n))return!1;if(Ci.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ni=new pt(3e4,6e4);function Di(){const e=Pr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Pi=null;function Oi(e){return Pi=Pi||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Di(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Di(),n(it(e,"network-request-failed"))},timeout:Ni.get()})}if(null===(i=null===(r=Pr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Pr().gapi)||void 0===s?void 0:s.load)){const t=sn("iframefcb");return Pr()[t]=()=>{gapi.load?o():n(it(e,"network-request-failed"))},rn("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Pi=null,e}))}(e),Pi}const Ri=new pt(5e3,15e3),Li="__/auth/iframe",Mi="emulator/auth/iframe",Fi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ji=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ui(e){const t=e.config;ct(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mt(t,Mi):"https://".concat(e.config.authDomain,"/").concat(Li),r={apiKey:t.apiKey,appName:e.name,v:Ee},i=ji.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(S(r).slice(1))}const Vi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Bi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Vi),{width:r.toString(),height:i.toString(),top:s,left:o}),l=p().toLowerCase();n&&(a=Gt(l)?"_blank":n),qt(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Xt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new zi(null);const h=window.open(t||"",a,u);ct(h,e,"popup-blocked");try{h.focus()}catch(d){}return new zi(h)}const qi="__/auth/handler",Ki="emulator/auth/handler",Gi=encodeURIComponent("fac");async function Hi(e,t,n,r,i,s){ct(e.config.authDomain,e,"auth-domain-config-required"),ct(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ee,eventId:i};if(t instanceof An){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Nn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Gi,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qi);return mt(t,Ki)}(e),"?").concat(S(a).slice(1)).concat(l)}const Wi="webStorageSupport";const Qi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xr,this._completeRedirectFn=_i,this._overrideRedirectResult=mi}async _openPopup(e,t,n,r){var i;ut(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Bi(e,await Hi(e,t,n,ht(),r),Nr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Pr().location.href=e}(await Hi(e,t,n,ht(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ut(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Oi(e),n=Pr().gapi;return ct(n,e,"internal-error"),t.open({where:document.body,url:Ui(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=it(e,"network-request-failed"),s=Pr().setTimeout((()=>{r(i)}),Ri.get());function o(){Pr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Ei(e);return t.register("authEvent",(t=>{ct(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wi,{type:Wi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Wi];void 0!==i&&t(!!i),rt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Si(e);for(const n of t)try{if(Ai(n))return}catch(Kw){}rt(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jt()||Kt()||Xt()}};class Yi{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return lt("unexpected MultiFactorSessionType")}}}class Xi extends Yi{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Xi(e)}_finalizeEnroll(e,t,n){return function(e,t){return bt(e,"POST","/v2/accounts/mfaEnrollment:finalize",wt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return bt(e,"POST","/v2/accounts/mfaSignIn:finalize",wt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ji{constructor(){}static assertion(e){return Xi._fromCredential(e)}}Ji.FACTOR_ID="phone";var $i="@firebase/auth",Zi="0.23.2";class es{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=h())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var ts;function ns(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function rs(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}ts="Browser",ye(new O("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:ts,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$t(ts)},l=new ln(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ft);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ye(new O("auth-internal",(e=>(e=>new es(e))(un(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),xe($i,Zi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ts)),xe($i,Zi,"esm2017");var is=function(){return is=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},is.apply(this,arguments)},ss=function(e){return{loading:void 0===e||null===e,value:e}},os=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return is(is({},e),{error:t.error,loading:!1,value:void 0});case"reset":return ss(t.defaultValue);case"value":return is(is({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),ss(n)),i=r[0],s=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,t.useCallback)((function(e){s({type:"error",error:e})}),[]),c=(0,t.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:c,value:i.value}}),[i.error,i.loading,o,a,c,i.value])},as=function(e,n){var r=os((function(){return e.currentUser})),i=r.error,s=r.loading,o=r.setError,a=r.setValue,c=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return P(e).onAuthStateChanged(t,n,r)}(e,(function(e){return ns(void 0,void 0,void 0,(function(){var t;return rs(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){t()}}),[e]),[c,s,i]},cs=function(e,n){var r=(0,t.useState)(),i=r[0],s=r[1],o=(0,t.useState)(),a=o[0],c=o[1],l=(0,t.useState)(!1),u=l[0],h=l[1],d=(0,t.useCallback)((function(t,r){return ns(void 0,void 0,void 0,(function(){var i,o;return rs(this,(function(a){switch(a.label){case 0:h(!0),s(void 0),a.label=1;case 1:return a.trys.push([1,5,6,7]),[4,sr(e,t,r)];case 2:return i=a.sent(),n&&n.sendEmailVerification&&i.user?[4,cr(i.user,n.emailVerificationOptions)]:[3,4];case 3:a.sent(),a.label=4;case 4:return c(i),[2,i];case 5:return o=a.sent(),s(o),[3,7];case 6:return h(!1),[7];case 7:return[2]}}))}))}),[e,n]);return[d,a,u,i]},ls=function(e){var n=(0,t.useState)(),r=n[0],i=n[1],s=(0,t.useState)(),o=s[0],a=s[1],c=(0,t.useState)(!1),l=c[0],u=c[1],h=(0,t.useCallback)((function(t,n){return ns(void 0,void 0,void 0,(function(){var r,s;return rs(this,(function(o){switch(o.label){case 0:u(!0),i(void 0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,or(e,t,n)];case 2:return r=o.sent(),a(r),[2,r];case 3:return s=o.sent(),i(s),[3,5];case 4:return u(!1),[7];case 5:return[2]}}))}))}),[e]);return[h,o,l,r]};class us{constructor(e,t){this._delegate=e,this.firebase=t,me(e,new O("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ce(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){me(this._delegate,e)}_addOrOverwriteComponent(e){ge(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const hs=new _("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ds=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=ke(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(E(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:xe,setLogLevel:Ne,onLog:Ae,apps:null,SDK_VERSION:Ee,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(ye(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw hs.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&l(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!E(n,e=e||he))throw hs.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(us);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){l(n,e)},createSubscribe:A,ErrorFactory:_,deepExtend:l}),n}(),fs=new q("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){fs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ps=ds;!function(e){xe("@firebase/app-compat","0.2.13",e)}();function ms(){return window}ps.registerVersion("firebase","9.23.0","app-compat");async function gs(e,t,n){var r;const{BuildInfo:i}=ms();ut(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(ut(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Xt()?o.ibi=i.packageName:Wt()?o.apn=i.packageName:rt(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Hi(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function ys(e){const{cordova:t}=ms();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const vs=20;class ws extends Ei{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function bs(e){const t=await Es()._get(ks(e));return t&&await Es()._remove(ks(e)),t}function _s(e,t){var n,r;const i=function(e){const t=Ts(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ts(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ts(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ts(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?it(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Is(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<vs;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Es(){return Ft(Sr)}function ks(e){return Vt("authEvent",e.config.apiKey,e.name)}function Ts(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return C(n.join("?"))}const Ss=class{constructor(){this._redirectPersistence=xr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_i,this._overrideRedirectResult=mi}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new ws(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){rt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=ms();ct("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ct("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ct("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ct("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ct("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),di.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Is(),postBody:null,tenantId:e.tenantId,error:it(e,"no-auth-event")}}(e,n,r);await function(e,t){return Es()._set(ks(e),t)}(e,s);const o=await gs(e,s,t);return async function(e,t,n){const{cordova:r}=ms();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(it(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Wt()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await ys(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ms(),n={};Xt()?n.iosBundleId=t.packageName:Wt()?n.androidPackageName=t.packageName:rt(e,"operation-not-supported-in-this-environment"),await Si(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ms(),s=setTimeout((async()=>{await bs(e),t.onEvent(Cs())}),500),o=async n=>{clearTimeout(s);const r=await bs(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=_s(r,n.url)),t.onEvent(i||Cs())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");ms().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Cs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}function xs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function As(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return!("file:"!==xs()&&"ionic:"!==xs()&&"capacitor:"!==xs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return v()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/Edge\/\d+/.test(e)}(e)}function Ds(){try{const e=self.localStorage,t=Nr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ns()||w()}catch(e){return Ps()&&w()}return!1}function Ps(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Os(){return("http:"===xs()||"https:"===xs()||g()||As())&&!(y()||m())&&Ds()&&!Ps()}function Rs(){return As()&&"undefined"!==typeof document}const Ls={LOCAL:"local",NONE:"none",SESSION:"session"},Ms=ct,Fs="persistence";async function js(e){await e._initializationPromise;const t=Us(),n=Vt(Fs,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Us(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Vs=ct;class zs{constructor(){this.browserResolver=Ft(Qi),this.cordovaResolver=Ft(Ss),this.underlyingResolver=null,this._redirectPersistence=xr,this._completeRedirectFn=_i,this._overrideRedirectResult=mi}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Rs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vs(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Rs()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Bs(e){return e.unwrap()}function qs(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ws(e,function(e,t){var n;const r=P(e),i=t;return ct(t.customData.operationType,r,"argument-error"),ct(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),br._fromError(r,i)}(e,t))}else if(r){const e=Ks(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ks(e){const{_tokenResponse:t}=e instanceof b?e.customData:e;if(!t)return null;if(!(e instanceof b)&&"temporaryProof"in t&&"phoneNumber"in t)return ni.credentialFromResult(e);const n=t.providerId;if(!n||n===Ke.PASSWORD)return null;let r;switch(n){case Ke.GOOGLE:r=On;break;case Ke.FACEBOOK:r=Pn;break;case Ke.GITHUB:r=Rn;break;case Ke.TWITTER:r=Fn;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Ln._create(n,o):kn._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Dn(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof b?r.credentialFromError(e):r.credentialFromResult(e)}function Gs(e,t){return t.catch((t=>{throw t instanceof b&&qs(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ks(r)),additionalUserInfo:vr(e),user:Qs.getOrCreate(n)};var r}))}async function Hs(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Gs(e,n.confirm(t))}}class Ws{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gs(Bs(this.auth),this.resolver.resolveSignIn(e))}}class Qs{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=P(e);return Ir.has(t)||Ir.set(t,_r._fromUser(t)),Ir.get(t)}(e)}static getOrCreate(e){return Qs.USER_MAP.has(e)||Qs.USER_MAP.set(e,new Qs(e)),Qs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Gs(this.auth,Xn(this._delegate,e))}async linkWithPhoneNumber(e,t){return Hs(this.auth,async function(e,t,n){const r=P(e);await Hn(!1,r,"phone");const i=await ti(r.auth,t,P(n));return new ei(i,(e=>Xn(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Gs(this.auth,async function(e,t,n){const r=P(e);ot(r.auth,t,An);const i=ri(r.auth,n);return new ui(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,zs))}async linkWithRedirect(e){return await js(un(this.auth)),bi(this._delegate,e,zs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Gs(this.auth,Jn(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Hs(this.auth,async function(e,t,n){const r=P(e),i=await ti(r.auth,t,P(n));return new ei(i,(e=>Jn(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gs(this.auth,async function(e,t,n){const r=P(e);ot(r.auth,t,An);const i=ri(r.auth,n);return new ui(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,zs))}async reauthenticateWithRedirect(e){return await js(un(this.auth)),wi(this._delegate,e,zs)}sendEmailVerification(e){return cr(this._delegate,e)}async unlink(e){return await Kn(this._delegate,e),this}updateEmail(e){return function(e,t){return hr(P(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hr(P(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Gn(P(e),t)}(this._delegate,e)}updateProfile(e){return ur(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return lr(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qs.USER_MAP=new WeakMap;const Ys=ct;class Xs{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ys(n,"invalid-api-key",{appName:e.name}),Ys(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?zs:void 0;this._delegate=t.initialize({options:{persistence:$s(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){dn(this._delegate,e,t)}applyActionCode(e){return rr(this._delegate,e)}checkActionCode(e){return ir(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await gn(P(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Gs(this._delegate,sr(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ar(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Cn.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ys(Os(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await un(e)._initializationPromise,_i(e,t,!1)}(this._delegate,zs);return e?Gs(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){un(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Js(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Js(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=un(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){ct(t.handleCodeInApp,i,"argument-error"),t&&nr(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await an(i,s,"getOobCode",!0);o(e,n),await _n(i,e)}else o(s,n),await _n(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await an(i,s,"getOobCode",!0);o(e,n),await _n(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=un(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await an(i,s,"getOobCode",!0);n&&nr(i,e,n),await bn(i,e)}else n&&nr(i,s,n),await bn(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await an(i,s,"getOobCode",!0);n&&nr(i,e,n),await bn(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Ms(Object.values(Ls).includes(t),e,"invalid-persistence-type"),y()?Ms(t!==Ls.SESSION,e,"unsupported-persistence-type"):m()?Ms(t===Ls.NONE,e,"unsupported-persistence-type"):Ps()?Ms(t===Ls.NONE||t===Ls.LOCAL&&w(),e,"unsupported-persistence-type"):Ms(t===Ls.NONE||Ds(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Ls.SESSION:t=xr;break;case Ls.LOCAL:t=await Ft(qr)._isAvailable()?qr:Sr;break;case Ls.NONE:t=Ut;break;default:return rt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gs(this._delegate,async function(e){var t;const n=un(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Un({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await jn(n,{returnSecureToken:!0}),i=await Un._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Gs(this._delegate,Yn(this._delegate,e))}signInWithCustomToken(e){return Gs(this._delegate,$n(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gs(this._delegate,or(this._delegate,e,t))}signInWithEmailLink(e,t){return Gs(this._delegate,async function(e,t,n){const r=P(e),i=xn.credentialWithLink(t,n||ht());return ct(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yn(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Hs(this._delegate,async function(e,t,n){const r=un(e),i=await ti(r,t,P(n));return new ei(i,(e=>Yn(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ys(Os(),this._delegate,"operation-not-supported-in-this-environment"),Gs(this._delegate,async function(e,t,n){const r=un(e);ot(e,t,An);const i=ri(r,n);return new ui(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,zs))}async signInWithRedirect(e){return Ys(Os(),this._delegate,"operation-not-supported-in-this-environment"),await js(this._delegate),vi(this._delegate,e,zs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ir(P(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Js(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Qs.getOrCreate(e)),error:t,complete:n}}function $s(e,t){const n=function(e,t){const n=Us();if(!n)return[];const r=Vt(Fs,e,t);switch(n.getItem(r)){case Ls.NONE:return[Ut];case Ls.LOCAL:return[qr,xr];case Ls.SESSION:return[xr];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(qr)||n.push(qr),"undefined"!==typeof window)for(const r of[Sr,xr])n.includes(r)||n.push(r);return n.includes(Ut)||n.push(Ut),n}Xs.Persistence=Ls;class Zs{constructor(){this.providerId="phone",this._delegate=new ni(Bs(ps.auth()))}static credential(e,t){return ni.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Zs.PHONE_SIGN_IN_METHOD=ni.PHONE_SIGN_IN_METHOD,Zs.PROVIDER_ID=ni.PROVIDER_ID;const eo=ct;class to{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ps.app();var r;eo(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Zr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var no;(no=ps).INTERNAL.registerComponent(new O("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xs(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ge,PASSWORD_RESET:He,RECOVER_EMAIL:We,REVERT_SECOND_FACTOR_ADDITION:Qe,VERIFY_AND_CHANGE_EMAIL:Ye,VERIFY_EMAIL:Xe}},EmailAuthProvider:xn,FacebookAuthProvider:Pn,GithubAuthProvider:Rn,GoogleAuthProvider:On,OAuthProvider:Dn,SAMLAuthProvider:Mn,PhoneAuthProvider:Zs,PhoneMultiFactorGenerator:Ji,RecaptchaVerifier:to,TwitterAuthProvider:Fn,Auth:Xs,AuthCredential:mn,Error:b}).setInstantiationMode("LAZY").setMultipleInstances(!1)),no.registerVersion("@firebase/auth-compat","0.4.2");const ro=()=>"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12);var io,so="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},oo={},ao=ao||{},co=so||self;function lo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function uo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ho="closure_uid_"+(1e9*Math.random()>>>0),fo=0;function po(e,t,n){return e.call.apply(e.bind,arguments)}function mo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function go(e,t,n){return(go=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?po:mo).apply(null,arguments)}function yo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function vo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function wo(){this.s=this.s,this.o=this.o}wo.prototype.s=!1,wo.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ho)&&e[ho]||(e[ho]=++fo))},wo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _o(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Io(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(lo(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Eo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Eo.prototype.h=function(){this.defaultPrevented=!0};var ko=function(){if(!co.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{co.addEventListener("test",(()=>{}),t),co.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function To(e){return/^[\s\xa0]*$/.test(e)}function So(){var e=co.navigator;return e&&(e=e.userAgent)?e:""}function Co(e){return-1!=So().indexOf(e)}function xo(e){return xo[" "](e),e}xo[" "]=function(){};var Ao,No,Do=Co("Opera"),Po=Co("Trident")||Co("MSIE"),Oo=Co("Edge"),Ro=Oo||Po,Lo=Co("Gecko")&&!(-1!=So().toLowerCase().indexOf("webkit")&&!Co("Edge"))&&!(Co("Trident")||Co("MSIE"))&&!Co("Edge"),Mo=-1!=So().toLowerCase().indexOf("webkit")&&!Co("Edge");function Fo(){var e=co.document;return e?e.documentMode:void 0}e:{var jo="",Uo=function(){var e=So();return Lo?/rv:([^\);]+)(\)|;)/.exec(e):Oo?/Edge\/([\d\.]+)/.exec(e):Po?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mo?/WebKit\/(\S+)/.exec(e):Do?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Uo&&(jo=Uo?Uo[1]:""),Po){var Vo=Fo();if(null!=Vo&&Vo>parseFloat(jo)){Ao=String(Vo);break e}}Ao=jo}if(co.document&&Po){var zo=Fo();No=zo||(parseInt(Ao,10)||void 0)}else No=void 0;var Bo=No;function qo(e,t){if(Eo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lo){e:{try{xo(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ko[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qo.$.h.call(this)}}vo(qo,Eo);var Ko={2:"touch",3:"pen",4:"mouse"};qo.prototype.h=function(){qo.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Go="closure_listenable_"+(1e6*Math.random()|0),Ho=0;function Wo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ho,this.fa=this.ia=!1}function Qo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Yo(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xo(e){const t={};for(const n in e)t[n]=e[n];return t}const Jo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $o(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Jo.length;t++)n=Jo[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zo(e){this.src=e,this.g={},this.h=0}function ea(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=bo(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Qo(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ta(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Zo.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ta(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Wo(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var na="closure_lm_"+(1e6*Math.random()|0),ra={};function ia(e,t,n,r,i){if(r&&r.once)return oa(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ia(e,t[s],n,r,i);return null}return n=fa(n),e&&e[Go]?e.O(t,n,uo(r)?!!r.capture:!!r,i):sa(e,t,n,!1,r,i)}function sa(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=uo(i)?!!i.capture:!!i,a=ha(e);if(a||(e[na]=a=new Zo(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ua;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ko||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(la(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function oa(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)oa(e,t[s],n,r,i);return null}return n=fa(n),e&&e[Go]?e.P(t,n,uo(r)?!!r.capture:!!r,i):sa(e,t,n,!0,r,i)}function aa(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)aa(e,t[s],n,r,i);else r=uo(r)?!!r.capture:!!r,n=fa(n),e&&e[Go]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ta(s=e.g[t],n,r,i))&&(Qo(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ha(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ta(t,n,r,i)),(n=-1<e?t[e]:null)&&ca(n))}function ca(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Go])ea(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(la(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ha(t))?(ea(n,e),0==n.h&&(n.src=null,t[na]=null)):Qo(e)}}}function la(e){return e in ra?ra[e]:ra[e]="on"+e}function ua(e,t){if(e.fa)e=!0;else{t=new qo(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ca(e),e=n.call(r,t)}return e}function ha(e){return(e=e[na])instanceof Zo?e:null}var da="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(e){return"function"===typeof e?e:(e[da]||(e[da]=function(t){return e.handleEvent(t)}),e[da])}function pa(){wo.call(this),this.i=new Zo(this),this.S=this,this.J=null}function ma(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Eo(t,e);else if(t instanceof Eo)t.target=t.target||e;else{var i=t;$o(t=new Eo(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ga(o,r,!0,t)&&i}if(i=ga(o=t.g=e,r,!0,t)&&i,i=ga(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ga(o=t.g=n[s],r,!1,t)&&i}function ga(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ea(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}vo(pa,wo),pa.prototype[Go]=!0,pa.prototype.removeEventListener=function(e,t,n,r){aa(this,e,t,n,r)},pa.prototype.N=function(){if(pa.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qo(n[r]);delete t.g[e],t.h--}}this.J=null},pa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pa.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ya=co.JSON.stringify;function va(){var e=Ta;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wa=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ba),(e=>e.reset()));class ba{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _a(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ia(e){co.setTimeout((()=>{throw e}),0)}let Ea,ka=!1,Ta=new class{constructor(){this.h=this.g=null}add(e,t){const n=wa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Sa=()=>{const e=co.Promise.resolve(void 0);Ea=()=>{e.then(Ca)}};var Ca=()=>{for(var e;e=va();){try{e.h.call(e.g)}catch(n){Ia(n)}var t=wa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ka=!1};function xa(e,t){pa.call(this),this.h=e||1,this.g=t||co,this.j=go(this.qb,this),this.l=Date.now()}function Aa(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Na(e,t,n){if("function"===typeof e)n&&(e=go(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=go(e.handleEvent,e)}return 2147483647<Number(t)?-1:co.setTimeout(e,t||0)}function Da(e){e.g=Na((()=>{e.g=null,e.i&&(e.i=!1,Da(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}vo(xa,pa),(io=xa.prototype).ga=!1,io.T=null,io.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ma(this,"tick"),this.ga&&(Aa(this),this.start()))}},io.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},io.N=function(){xa.$.N.call(this),Aa(this),delete this.g};class Pa extends wo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(co.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(e){wo.call(this),this.h=e,this.g={}}vo(Oa,wo);var Ra=[];function La(e,t,n,r){Array.isArray(n)||(n&&(Ra[0]=n.toString()),n=Ra);for(var i=0;i<n.length;i++){var s=ia(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ma(e){Yo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ca(e)}),e),e.g={}}function Fa(){this.g=!0}function ja(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ya(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Oa.prototype.N=function(){Oa.$.N.call(this),Ma(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fa.prototype.Ea=function(){this.g=!1},Fa.prototype.info=function(){};var Ua={},Va=null;function za(){return Va=Va||new pa}function Ba(e){Eo.call(this,Ua.Ta,e)}function qa(e){const t=za();ma(t,new Ba(t))}function Ka(e,t){Eo.call(this,Ua.STAT_EVENT,e),this.stat=t}function Ga(e){const t=za();ma(t,new Ka(t,e))}function Ha(e,t){Eo.call(this,Ua.Ua,e),this.size=t}function Wa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return co.setTimeout((function(){e()}),t)}Ua.Ta="serverreachability",vo(Ba,Eo),Ua.STAT_EVENT="statevent",vo(Ka,Eo),Ua.Ua="timingevent",vo(Ha,Eo);var Qa={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ya={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xa(){}function Ja(e){return e.h||(e.h=e.i())}function $a(){}Xa.prototype.h=null;var Za,ec={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tc(){Eo.call(this,"d")}function nc(){Eo.call(this,"c")}function rc(){}function ic(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Oa(this),this.P=oc,e=Ro?125:void 0,this.V=new xa(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sc}function sc(){this.i=null,this.g="",this.h=!1}vo(tc,Eo),vo(nc,Eo),vo(rc,Xa),rc.prototype.g=function(){return new XMLHttpRequest},rc.prototype.i=function(){return{}},Za=new rc;var oc=45e3,ac={},cc={};function lc(e,t,n){e.L=1,e.v=xc(Ec(t)),e.s=n,e.S=!0,uc(e,null)}function uc(e,t){e.G=Date.now(),pc(e),e.A=Ec(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),zc(n.i,"t",r),e.C=0,n=e.l.J,e.h=new sc,e.g=Bl(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Pa(go(e.Pa,e,e.g),e.O)),La(e.U,e.g,"readystatechange",e.nb),t=e.I?Xo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),qa(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function hc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function dc(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=fc(e,n),r==cc){4==t&&(e.o=4,Ga(14),i=!1),ja(e.j,e.m,null,"[Incomplete Response]");break}if(r==ac){e.o=4,Ga(15),ja(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ja(e.j,e.m,r,null),wc(e,r)}hc(e)&&r!=cc&&r!=ac&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ga(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rl(t),t.M=!0,Ga(11))):(ja(e.j,e.m,n,"[Invalid Chunked Response]"),vc(e),yc(e))}function fc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?cc:(n=Number(t.substring(n,r)),isNaN(n)?ac:(r+=1)+n>t.length?cc:(t=t.slice(r,r+n),e.C=r+n,t))}function pc(e){e.Y=Date.now()+e.P,mc(e,e.P)}function mc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Wa(go(e.lb,e),t)}function gc(e){e.B&&(co.clearTimeout(e.B),e.B=null)}function yc(e){0==e.l.H||e.J||Fl(e.l,e)}function vc(e){gc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Aa(e.V),Ma(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function wc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Qc(n.i,e)))if(!e.K&&Qc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ml(n),Sl(n)}Ol(n),Ga(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Wa(go(n.ib,n),6e3));if(1>=Wc(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else Ul(n,11)}else if((e.K||n.g==e)&&Ml(n),!To(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Yc(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Cc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=zl(r,r.J?r.pa:null,r.Y),o.K){Xc(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(gc(a),pc(a)),r.g=o}else Pl(r);0<n.j.length&&xl(n)}else"stop"!=l[0]&&"close"!=l[0]||Ul(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ul(n,7):Tl(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}qa()}catch(l){}}function bc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(lo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(lo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(lo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(io=ic.prototype).setTimeout=function(e){this.P=e},io.nb=function(e){e=e.target;const t=this.M;t&&3==wl(e)?t.l():this.Pa(e)},io.Pa=function(e){try{if(e==this.g)e:{const u=wl(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ro||this.g&&(this.h.h||this.g.ja()||bl(this.g)))){this.J||4!=u||7==t||qa(),gc(this);var n=this.g.da();this.ca=n;t:if(hc(this)){var r=bl(this.g);e="";var i=r.length,s=4==wl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){vc(this),yc(this);var o="";break t}this.h.i=new co.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!To(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Ga(12),vc(this),yc(this);break e}ja(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wc(this,n)}this.S?(dc(this,u,o),Ro&&this.i&&3==u&&(La(this.U,this.V,"tick",this.mb),this.V.start())):(ja(this.j,this.m,o,null),wc(this,o)),4==u&&vc(this),this.i&&!this.J&&(4==u?Fl(this.l,this):(this.i=!1,pc(this)))}else(function(e){const t={};e=(e.g&&2<=wl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(To(e[r]))continue;var n=_a(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ga(12)):(this.o=0,Ga(13)),vc(this),yc(this)}}}catch(u){}},io.mb=function(){if(this.g){var e=wl(this.g),t=this.g.ja();this.C<t.length&&(gc(this),dc(this,e,t),this.i&&4!=e&&pc(this))}},io.cancel=function(){this.J=!0,vc(this)},io.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(qa(),Ga(17)),vc(this),this.o=2,yc(this)):mc(this,this.Y-e)};var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ic(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ic){this.h=e.h,kc(this,e.j),this.s=e.s,this.g=e.g,Tc(this,e.m),this.l=e.l;var t=e.i,n=new Fc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Sc(this,n),this.o=e.o}else e&&(t=String(e).match(_c))?(this.h=!1,kc(this,t[1]||"",!0),this.s=Ac(t[2]||""),this.g=Ac(t[3]||"",!0),Tc(this,t[4]),this.l=Ac(t[5]||"",!0),Sc(this,t[6]||"",!0),this.o=Ac(t[7]||"")):(this.h=!1,this.i=new Fc(null,this.h))}function Ec(e){return new Ic(e)}function kc(e,t,n){e.j=n?Ac(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Tc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Sc(e,t,n){t instanceof Fc?(e.i=t,function(e,t){t&&!e.j&&(jc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Uc(this,t),zc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Nc(t,Lc)),e.i=new Fc(t,e.h))}function Cc(e,t,n){e.i.set(t,n)}function xc(e){return Cc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ac(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Nc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ic.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Nc(t,Pc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Nc(t,Pc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Nc(n,"/"==n.charAt(0)?Rc:Oc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Nc(n,Mc)),e.join("")};var Pc=/[#\/\?@]/g,Oc=/[#\?:]/g,Rc=/[#\?]/g,Lc=/[#\?@]/g,Mc=/#/g;function Fc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Uc(e,t){jc(e),t=Bc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vc(e,t){return jc(e),t=Bc(e,t),e.g.has(t)}function zc(e,t,n){Uc(e,t),0<n.length&&(e.i=null,e.g.set(Bc(e,t),_o(n)),e.h+=n.length)}function Bc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(io=Fc.prototype).add=function(e,t){jc(this),this.i=null,e=Bc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},io.forEach=function(e,t){jc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},io.ta=function(){jc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},io.Z=function(e){jc(this);let t=[];if("string"===typeof e)Vc(this,e)&&(t=t.concat(this.g.get(Bc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},io.set=function(e,t){return jc(this),this.i=null,Vc(this,e=Bc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},io.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},io.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var qc=class{constructor(e,t){this.g=e,this.map=t}};function Kc(e){this.l=e||Gc,co.PerformanceNavigationTiming?e=0<(e=co.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(co.g&&co.g.Ka&&co.g.Ka()&&co.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gc=10;function Hc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wc(e){return e.h?1:e.g?e.g.size:0}function Qc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Yc(e,t){e.g?e.g.add(t):e.h=t}function Xc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Jc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return _o(e.i)}Kc.prototype.cancel=function(){if(this.i=Jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $c,Zc=class{stringify(e){return co.JSON.stringify(e,void 0)}parse(e){return co.JSON.parse(e,void 0)}};function el(){this.g=new Zc}function tl(e,t,n){const r=n||"";try{bc(e,(function(e,n){let i=e;uo(e)&&(i=ya(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function rl(e){this.l=e.fc||null,this.j=e.ob||!1}function il(e,t){pa.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=sl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vo(rl,Xa),rl.prototype.g=function(){return new il(this.l,this.j)},rl.prototype.i=($c={},function(){return $c}),vo(il,pa);var sl=0;function ol(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function al(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cl(e)}function cl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(io=il.prototype).open=function(e,t){if(this.readyState!=sl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cl(this)},io.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||co).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},io.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,al(this)),this.readyState=sl},io.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof co.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ol(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},io.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?al(this):cl(this),3==this.readyState&&ol(this)}},io.Za=function(e){this.g&&(this.response=this.responseText=e,al(this))},io.Ya=function(e){this.g&&(this.response=e,al(this))},io.ka=function(){this.g&&al(this)},io.setRequestHeader=function(e,t){this.v.append(e,t)},io.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},io.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(il.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ll=co.JSON.parse;function ul(e){pa.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hl,this.L=this.M=!1}vo(ul,pa);var hl="",dl=/^https?$/i,fl=["POST","PUT"];function pl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ml(e),yl(e)}function ml(e){e.F||(e.F=!0,ma(e,"complete"),ma(e,"error"))}function gl(e){if(e.h&&"undefined"!=typeof ao&&(!e.C[1]||4!=wl(e)||2!=e.da()))if(e.v&&4==wl(e))Na(e.La,0,e);else if(ma(e,"readystatechange"),4==wl(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(_c)[1]||null;!i&&co.self&&co.self.location&&(i=co.self.location.protocol.slice(0,-1)),r=!dl.test(i?i.toLowerCase():"")}n=r}if(n)ma(e,"complete"),ma(e,"success");else{e.m=6;try{var s=2<wl(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",ml(e)}}finally{yl(e)}}}function yl(e,t){if(e.g){vl(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ma(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function vl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(co.clearTimeout(e.A),e.A=null)}function wl(e){return e.g?e.g.readyState:0}function bl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case hl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tu){return null}}function _l(e){let t="";return Yo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Il(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_l(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Cc(e,t,n))}function El(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kl(e){this.Ga=0,this.j=[],this.l=new Fa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=El("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=El("baseRetryDelayMs",5e3,e),this.hb=El("retryDelaySeedMs",1e4,e),this.eb=El("forwardChannelMaxRetries",2,e),this.xa=El("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Kc(e&&e.concurrentRequestLimit),this.Ja=new el,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Tl(e){if(Cl(e),3==e.H){var t=e.W++,n=Ec(e.I);if(Cc(n,"SID",e.K),Cc(n,"RID",t),Cc(n,"TYPE","terminate"),Nl(e,n),(t=new ic(e,e.l,t)).L=2,t.v=xc(Ec(n)),n=!1,co.navigator&&co.navigator.sendBeacon)try{n=co.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&co.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bl(t.l,null),t.g.ha(t.v)),t.G=Date.now(),pc(t)}Vl(e)}function Sl(e){e.g&&(Rl(e),e.g.cancel(),e.g=null)}function Cl(e){Sl(e),e.u&&(co.clearTimeout(e.u),e.u=null),Ml(e),e.i.cancel(),e.m&&("number"===typeof e.m&&co.clearTimeout(e.m),e.m=null)}function xl(e){if(!Hc(e.i)&&!e.m){e.m=!0;var t=e.Na;Ea||Sa(),ka||(Ea(),ka=!0),Ta.add(t,e),e.C=0}}function Al(e,t){var n;n=t?t.m:e.W++;const r=Ec(e.I);Cc(r,"SID",e.K),Cc(r,"RID",n),Cc(r,"AID",e.V),Nl(e,r),e.o&&e.s&&Il(r,e.o,e.s),n=new ic(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Dl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Yc(e.i,n),lc(n,r,t)}function Nl(e,t){e.na&&Yo(e.na,(function(e,n){Cc(t,n,e)})),e.h&&bc({},(function(e,n){Cc(t,n,e)}))}function Dl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?go(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{tl(a,e,"req"+n+"_")}catch(Mu){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Pl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ea||Sa(),ka||(Ea(),ka=!0),Ta.add(t,e),e.A=0}}function Ol(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Wa(go(e.Ma,e),jl(e,e.A)),e.A++,!0)}function Rl(e){null!=e.B&&(co.clearTimeout(e.B),e.B=null)}function Ll(e){e.g=new ic(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ec(e.wa);Cc(t,"RID","rpc"),Cc(t,"SID",e.K),Cc(t,"AID",e.V),Cc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Cc(t,"TO",e.qa),Cc(t,"TYPE","xmlhttp"),Nl(e,t),e.o&&e.s&&Il(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=xc(Ec(t)),n.s=null,n.S=!0,uc(n,e)}function Ml(e){null!=e.v&&(co.clearTimeout(e.v),e.v=null)}function Fl(e,t){var n=null;if(e.g==t){Ml(e),Rl(e),e.g=null;var r=2}else{if(!Qc(e.i,t))return;n=t.F,Xc(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ma(r=za(),new Ha(r,n)),xl(e)}else Pl(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Wc(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Wa(go(e.Na,e,t),jl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ol(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ul(e,5);break;case 4:Ul(e,10);break;case 3:Ul(e,6);break;default:Ul(e,2)}}function jl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ul(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=go(e.pb,e);n||(n=new Ic("//www.google.com/images/cleardot.gif"),co.location&&"http"==co.location.protocol||kc(n,"https"),xc(n)),function(e,t){const n=new Fa;if(co.Image){const r=new Image;r.onload=yo(nl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=yo(nl,n,r,"TestLoadImage: error",!1,t),r.onabort=yo(nl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=yo(nl,n,r,"TestLoadImage: timeout",!1,t),co.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ga(2);e.H=0,e.h&&e.h.za(t),Vl(e),Cl(e)}function Vl(e){if(e.H=0,e.ma=[],e.h){const t=Jc(e.i);0==t.length&&0==e.j.length||(Io(e.ma,t),Io(e.ma,e.j),e.i.i.length=0,_o(e.j),e.j.length=0),e.h.ya()}}function zl(e,t,n){var r=n instanceof Ic?Ec(n):new Ic(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Tc(r,r.m);else{var i=co.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ic(null);r&&kc(s,r),t&&(s.g=t),i&&Tc(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Cc(r,n,t),Cc(r,"VER",e.ra),Nl(e,r),r}function Bl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ul(new rl({ob:!0})):new ul(e.va)).Oa(e.J),t}function ql(){}function Kl(){if(Po&&!(10<=Number(Bo)))throw Error("Environmental error: no available transport.")}function Gl(e,t){pa.call(this),this.g=new kl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!To(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!To(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ql(this)}function Hl(e){tc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wl(){nc.call(this),this.status=1}function Ql(e){this.g=e}function Yl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Jl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(io=ul.prototype).Oa=function(e){this.M=e},io.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Za.g(),this.C=this.u?Ja(this.u):Ja(Za),this.g.onreadystatechange=go(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void pl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=co.FormData&&e instanceof co.FormData,!(0<=bo(fl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vl(this),0<this.B&&((this.L=function(e){return Po&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=go(this.ua,this)):this.A=Na(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){pl(this,s)}},io.ua=function(){"undefined"!=typeof ao&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ma(this,"timeout"),this.abort(8))},io.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ma(this,"complete"),ma(this,"abort"),yl(this))},io.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yl(this,!0)),ul.$.N.call(this)},io.La=function(){this.s||(this.G||this.v||this.l?gl(this):this.kb())},io.kb=function(){gl(this)},io.isActive=function(){return!!this.g},io.da=function(){try{return 2<wl(this)?this.g.status:-1}catch($c){return-1}},io.ja=function(){try{return this.g?this.g.responseText:""}catch($c){return""}},io.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ll(t)}},io.Ia=function(){return this.m},io.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(io=kl.prototype).ra=8,io.H=1,io.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ic(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Xo(s),$o(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Dl(this,i,t),Cc(n=Ec(this.I),"RID",e),Cc(n,"CVER",22),this.F&&Cc(n,"X-HTTP-Session-Id",this.F),Nl(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(_l(s)))+"&"+t:this.o&&Il(n,this.o,s)),Yc(this.i,i),this.bb&&Cc(n,"TYPE","init"),this.P?(Cc(n,"$req",t),Cc(n,"SID","null"),i.aa=!0,lc(i,n,null)):lc(i,n,t),this.H=2}}else 3==this.H&&(e?Al(this,e):0==this.j.length||Hc(this.i)||Al(this))},io.Ma=function(){if(this.u=null,Ll(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Wa(go(this.jb,this),e)}},io.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ga(10),Sl(this),Ll(this))},io.ib=function(){null!=this.v&&(this.v=null,Sl(this),Ol(this),Ga(19))},io.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ga(2)):(this.l.info("Failed to ping google.com"),Ga(1))},io.isActive=function(){return!!this.h&&this.h.isActive(this)},(io=ql.prototype).Ba=function(){},io.Aa=function(){},io.za=function(){},io.ya=function(){},io.isActive=function(){return!0},io.Va=function(){},Kl.prototype.g=function(e,t){return new Gl(e,t)},vo(Gl,pa),Gl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ga(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=zl(e,null,e.Y),xl(e)},Gl.prototype.close=function(){Tl(this.g)},Gl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ya(e),e=n);t.j.push(new qc(t.fb++,e)),3==t.H&&xl(t)},Gl.prototype.N=function(){this.g.h=null,delete this.j,Tl(this.g),delete this.g,Gl.$.N.call(this)},vo(Hl,tc),vo(Wl,nc),vo(Ql,ql),Ql.prototype.Ba=function(){ma(this.g,"a")},Ql.prototype.Aa=function(e){ma(this.g,new Hl(e))},Ql.prototype.za=function(e){ma(this.g,new Wl)},Ql.prototype.ya=function(){ma(this.g,"b")},vo(Yl,(function(){this.blockSize=-1})),Yl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Xl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Xl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Xl(this,r),i=0;break}}this.h=i,this.i+=t},Yl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var $l={};function Zl(e){return-128<=e&&128>e?function(e,t){var n=$l;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Jl([0|e],0>e?-1:0)})):new Jl([0|e],0>e?-1:0)}function eu(e){if(isNaN(e)||!isFinite(e))return nu;if(0>e)return au(eu(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=tu;return new Jl(t,0)}var tu=4294967296,nu=Zl(0),ru=Zl(1),iu=Zl(16777216);function su(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ou(e){return-1==e.h}function au(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Jl(n,~e.h).add(ru)}function cu(e,t){return e.add(au(t))}function lu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function uu(e,t){this.g=e,this.h=t}function hu(e,t){if(su(t))throw Error("division by zero");if(su(e))return new uu(nu,nu);if(ou(e))return t=hu(au(e),t),new uu(au(t.g),au(t.h));if(ou(t))return t=hu(e,au(t)),new uu(au(t.g),t.h);if(30<e.g.length){if(ou(e)||ou(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ru,r=t;0>=r.X(e);)n=du(n),r=du(r);var i=fu(n,1),s=fu(r,1);for(r=fu(r,2),n=fu(n,2);!su(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=fu(r,1),n=fu(n,1)}return t=cu(e,i.R(t)),new uu(i,t)}for(i=nu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=eu(n)).R(t);ou(o)||0<o.X(e);)o=(s=eu(n-=r)).R(t);su(s)&&(s=ru),i=i.add(s),e=cu(e,o)}return new uu(i,e)}function du(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Jl(n,e.h)}function fu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Jl(i,e.h)}(io=Jl.prototype).ea=function(){if(ou(this))return-au(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:tu+r)*t,t*=tu}return e},io.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(su(this))return"0";if(ou(this))return"-"+au(this).toString(e);for(var t=eu(Math.pow(e,6)),n=this,r="";;){var i=hu(n,t).g,s=((0<(n=cu(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(su(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},io.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},io.X=function(e){return ou(e=cu(this,e))?-1:su(e)?0:1},io.abs=function(){return ou(this)?au(this):this},io.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Jl(n,-2147483648&n[n.length-1]?-1:0)},io.R=function(e){if(su(this)||su(e))return nu;if(ou(this))return ou(e)?au(this).R(au(e)):au(au(this).R(e));if(ou(e))return au(this.R(au(e)));if(0>this.X(iu)&&0>e.X(iu))return eu(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,lu(n,2*r+2*i),n[2*r+2*i+1]+=s*c,lu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Jl(n,0)},io.gb=function(e){return hu(this,e).h},io.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Jl(n,this.h&e.h)},io.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Jl(n,this.h|e.h)},io.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Jl(n,this.h^e.h)},Kl.prototype.createWebChannel=Kl.prototype.g,Gl.prototype.send=Gl.prototype.u,Gl.prototype.open=Gl.prototype.m,Gl.prototype.close=Gl.prototype.close,Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Ya.COMPLETE="complete",$a.EventType=ec,ec.OPEN="a",ec.CLOSE="b",ec.ERROR="c",ec.MESSAGE="d",pa.prototype.listen=pa.prototype.O,ul.prototype.listenOnce=ul.prototype.P,ul.prototype.getLastError=ul.prototype.Sa,ul.prototype.getLastErrorCode=ul.prototype.Ia,ul.prototype.getStatus=ul.prototype.da,ul.prototype.getResponseJson=ul.prototype.Wa,ul.prototype.getResponseText=ul.prototype.ja,ul.prototype.send=ul.prototype.ha,ul.prototype.setWithCredentials=ul.prototype.Oa,Yl.prototype.digest=Yl.prototype.l,Yl.prototype.reset=Yl.prototype.reset,Yl.prototype.update=Yl.prototype.j,Jl.prototype.add=Jl.prototype.add,Jl.prototype.multiply=Jl.prototype.R,Jl.prototype.modulo=Jl.prototype.gb,Jl.prototype.compare=Jl.prototype.X,Jl.prototype.toNumber=Jl.prototype.ea,Jl.prototype.toString=Jl.prototype.toString,Jl.prototype.getBits=Jl.prototype.D,Jl.fromNumber=eu,Jl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return au(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=eu(Math.pow(n,8)),i=nu,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=eu(Math.pow(n,o)),i=i.R(o).add(eu(a))):i=(i=i.R(r)).add(eu(a))}return i};var pu=oo.createWebChannelTransport=function(){return new Kl},mu=oo.getStatEventTarget=function(){return za()},gu=oo.ErrorCode=Qa,yu=oo.EventType=Ya,vu=oo.Event=Ua,wu=oo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bu=oo.FetchXmlHttpFactory=rl,_u=oo.WebChannel=$a,Iu=oo.XhrIo=ul,Eu=oo.Md5=Yl,ku=oo.Integer=Jl;const Tu="@firebase/firestore";class Su{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Su.UNAUTHENTICATED=new Su(null),Su.GOOGLE_CREDENTIALS=new Su("google-credentials-uid"),Su.FIRST_PARTY=new Su("first-party-uid"),Su.MOCK_USER=new Su("mock-user");let Cu="9.23.0";const xu=new q("@firebase/firestore");function Au(){return xu.logLevel}function Nu(e){if(xu.logLevel<=j.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ou);xu.debug("Firestore (".concat(Cu,"): ").concat(e),...i)}}function Du(e){if(xu.logLevel<=j.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ou);xu.error("Firestore (".concat(Cu,"): ").concat(e),...i)}}function Pu(e){if(xu.logLevel<=j.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ou);xu.warn("Firestore (".concat(Cu,"): ").concat(e),...i)}}function Ou(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ru(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Cu,") INTERNAL ASSERTION FAILED: ")+e;throw Du(t),new Error(t)}function Lu(e,t){e||Ru()}function Mu(e,t){return e}const Fu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ju extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Uu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class zu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Su.UNAUTHENTICATED)))}shutdown(){}}class Bu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qu{constructor(e){this.t=e,this.currentUser=Su.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Uu;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Uu,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Nu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Nu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Uu)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Nu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lu("string"==typeof t.accessToken),new Vu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lu(null===e||"string"==typeof e),new Su(e)}}class Ku{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Su.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Gu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ku(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Su.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Nu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Nu("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Nu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Nu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lu("string"==typeof e.token),this.T=e.token,new Hu(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Yu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Qu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Xu(e,t){return e<t?-1:e>t?1:0}function Ju(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function $u(e){return e+"\0"}class Zu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ju(Fu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ju(Fu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ju(Fu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ju(Fu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zu.fromMillis(Date.now())}static fromDate(e){return Zu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xu(this.nanoseconds,e.nanoseconds):Xu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class eh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new eh(e)}static min(){return new eh(new Zu(0,0))}static max(){return new eh(new Zu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class th{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ru(),void 0===n?n=e.length-t:n>e.length-t&&Ru(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===th.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof th?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nh extends th{construct(e,t,n){return new nh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ju(Fu.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new nh(e)}static emptyPath(){return new nh([])}}const rh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ih extends th{construct(e,t,n){return new ih(e,t,n)}static isValidIdentifier(e){return rh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ih.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ih(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ju(Fu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ju(Fu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ju(Fu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ju(Fu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ih(t)}static emptyPath(){return new ih([])}}class sh{constructor(e){this.path=e}static fromPath(e){return new sh(nh.fromString(e))}static fromName(e){return new sh(nh.fromString(e).popFirst(5))}static empty(){return new sh(nh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sh(new nh(e.slice()))}}class oh{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ah(e){return e.fields.find((e=>2===e.kind))}function ch(e){return e.fields.filter((e=>2!==e.kind))}oh.UNKNOWN_ID=-1;class lh{constructor(e,t){this.fieldPath=e,this.kind=t}}class uh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uh(0,fh.min())}}function hh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=eh.fromTimestamp(1e9===r?new Zu(n+1,0):new Zu(n,r));return new fh(i,sh.empty(),t)}function dh(e){return new fh(e.readTime,e.key,-1)}class fh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new fh(eh.min(),sh.empty(),-1)}static max(){return new fh(eh.max(),sh.empty(),-1)}}function ph(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sh.comparator(e.documentKey,t.documentKey),0!==n?n:Xu(e.largestBatchId,t.largestBatchId))}const mh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yh(e){if(e.code!==Fu.FAILED_PRECONDITION||e.message!==mh)throw e;Nu("LocalStore","Unexpectedly lost primary lease")}class vh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ru(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vh(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof vh?t:vh.resolve(t)}catch(e){return vh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):vh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):vh.reject(t)}static resolve(e){return new vh(((t,n)=>{t(e)}))}static reject(e){return new vh(((t,n)=>{n(e)}))}static waitFor(e){return new vh(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=vh.resolve(!1);for(const n of e)t=t.next((e=>e?vh.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new vh(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new vh(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class wh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Uu,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ih(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=Ch(t.target.error);this.v.reject(new Ih(e,n))}}static open(e,t,n,r){try{return new wh(t,e.transaction(r,n))}catch(e){throw new Ih(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Nu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kh(t)}}class bh{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===bh.S(p())&&Du("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nu("SimpleDb","Removing database:",e),Th(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!w())return!1;if(bh.C())return!0;const e=p(),t=bh.S(e),n=0<t&&t<10,r=bh.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(Nu("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ju(Fu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ju(Fu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ih(e,r))},r.onupgradeneeded=e=>{Nu("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Nu("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=wh.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),vh.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Nu("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class _h{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Th(this.L.delete())}}class Ih extends ju{constructor(e,t){super(Fu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Eh(e){return"IndexedDbTransactionError"===e.name}class kh{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Nu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Nu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Th(n)}add(e){return Nu("SimpleDb","ADD",this.store.name,e,e),Th(this.store.add(e))}get(e){return Th(this.store.get(e)).next((t=>(void 0===t&&(t=null),Nu("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Nu("SimpleDb","DELETE",this.store.name,e),Th(this.store.delete(e))}count(){return Nu("SimpleDb","COUNT",this.store.name),Th(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new vh(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new vh(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Nu("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new vh(((n,r)=>{t.onerror=e=>{const t=Ch(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new vh(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new _h(i),o=t(i.primaryKey,i.value,s);if(o instanceof vh){const e=o.catch((e=>(s.done(),vh.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>vh.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Th(e){return new vh(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ch(e.target.error);n(t)}}))}let Sh=!1;function Ch(e){const t=bh.S(p());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ju("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sh||(Sh=!0,setTimeout((()=>{throw e}),0)),e}}return e}class xh{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Nu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Nu("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){Eh(e)?Nu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await yh(e)}await this.et(6e4)}))}}class Ah{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return vh.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Nu("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(Nu("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=dh(t);ph(r,n)>0&&(n=r)})),new fh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Nh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Dh(e){return null==e}function Ph(e){return 0===e&&1/e==-1/0}function Oh(e){return"number"==typeof e&&Number.isInteger(e)&&!Ph(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Rh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mh(t)),t=Lh(e.get(n),t);return Mh(t)}function Lh(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Mh(e){return e+"\x01\x01"}function Fh(e){const t=e.length;if(Lu(t>=2),2===t)return Lu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),nh.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ru(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ru()}s=t+2}return new nh(r)}Nh.ct=-1;const jh=["userId","batchId"];function Uh(e,t){return[e,Rh(t)]}function Vh(e,t,n){return[e,Rh(t),n]}const zh={},Bh=["prefixPath","collectionGroup","readTime","documentId"],qh=["prefixPath","collectionGroup","documentId"],Kh=["collectionGroup","readTime","prefixPath","documentId"],Gh=["canonicalId","targetId"],Hh=["targetId","path"],Wh=["path","targetId"],Qh=["collectionId","parent"],Yh=["indexId","uid"],Xh=["uid","sequenceNumber"],Jh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$h=["indexId","uid","orderedDocumentKey"],Zh=["userId","collectionPath","documentId"],ed=["userId","collectionPath","largestBatchId"],td=["userId","collectionGroup","largestBatchId"],nd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rd=[...nd,"documentOverlays"],id=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sd=id,od=[...sd,"indexConfiguration","indexState","indexEntries"];class ad extends gh{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function cd(e,t){const n=Mu(e);return bh.M(n.ht,t)}function ld(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ud(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dd{constructor(e,t){this.comparator=e,this.root=t||pd.EMPTY}insert(e,t){return new dd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pd.BLACK,null,null))}remove(e){return new dd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pd.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:pd.RED,this.left=null!=r?r:pd.EMPTY,this.right=null!=i?i:pd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new pd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pd.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ru();if(this.right.isRed())throw Ru();const e=this.left.check();if(e!==this.right.check())throw Ru();return e+(this.isRed()?0:1)}}pd.EMPTY=null,pd.RED=!0,pd.BLACK=!1,pd.EMPTY=new class{constructor(){this.size=0}get key(){throw Ru()}get value(){throw Ru()}get color(){throw Ru()}get left(){throw Ru()}get right(){throw Ru()}copy(e,t,n,r,i){return this}insert(e,t,n){return new pd(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class md{constructor(e){this.comparator=e,this.data=new dd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gd(this.data.getIterator())}getIteratorFrom(e){return new gd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof md))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new md(this.comparator);return t.data=e,t}}class gd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yd(e){return e.hasNext()?e.getNext():void 0}class vd{constructor(e){this.fields=e,e.sort(ih.comparator)}static empty(){return new vd([])}unionWith(e){let t=new md(ih.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ju(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class wd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new wd("Invalid base64 string: "+e):e}}(e);return new bd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bd.EMPTY_BYTE_STRING=new bd("");const _d=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Id(e){if(Lu(!!e),"string"==typeof e){let t=0;const n=_d.exec(e);if(Lu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ed(e.seconds),nanos:Ed(e.nanos)}}function Ed(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kd(e){return"string"==typeof e?bd.fromBase64String(e):bd.fromUint8Array(e)}function Td(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sd(e){const t=e.mapValue.fields.__previous_value__;return Td(t)?Sd(t):t}function Cd(e){const t=Id(e.mapValue.fields.__local_write_time__.timestampValue);return new Zu(t.seconds,t.nanos)}class xd{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ad{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ad("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ad&&e.projectId===this.projectId&&e.database===this.database}}const Nd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dd={nullValue:"NULL_VALUE"};function Pd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Td(e)?4:Hd(e)?9007199254740991:10:Ru()}function Od(e,t){if(e===t)return!0;const n=Pd(e);if(n!==Pd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cd(e).isEqual(Cd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Id(e.timestampValue),r=Id(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kd(e.bytesValue).isEqual(kd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ed(e.geoPointValue.latitude)===Ed(t.geoPointValue.latitude)&&Ed(e.geoPointValue.longitude)===Ed(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ed(e.integerValue)===Ed(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ed(e.doubleValue),r=Ed(t.doubleValue);return n===r?Ph(n)===Ph(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ju(e.arrayValue.values||[],t.arrayValue.values||[],Od);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ld(n)!==ld(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Od(n[i],r[i])))return!1;return!0}(e,t);default:return Ru()}}function Rd(e,t){return void 0!==(e.values||[]).find((e=>Od(e,t)))}function Ld(e,t){if(e===t)return 0;const n=Pd(e),r=Pd(t);if(n!==r)return Xu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ed(e.integerValue||e.doubleValue),r=Ed(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Md(e.timestampValue,t.timestampValue);case 4:return Md(Cd(e),Cd(t));case 5:return Xu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=kd(e),r=kd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Xu(n[i],r[i]);if(0!==e)return e}return Xu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Xu(Ed(e.latitude),Ed(t.latitude));return 0!==n?n:Xu(Ed(e.longitude),Ed(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ld(n[i],r[i]);if(e)return e}return Xu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Nd.mapValue&&t===Nd.mapValue)return 0;if(e===Nd.mapValue)return 1;if(t===Nd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Xu(r[o],s[o]);if(0!==e)return e;const t=Ld(n[r[o]],i[s[o]]);if(0!==t)return t}return Xu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ru()}}function Md(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xu(e,t);const n=Id(e),r=Id(t),i=Xu(n.seconds,r.seconds);return 0!==i?i:Xu(n.nanos,r.nanos)}function Fd(e){return jd(e)}function jd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Id(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?kd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,sh.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(jd(e.fields[i]));return n+"}"}(e.mapValue):Ru();var t,n}function Ud(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vd(e){return!!e&&"integerValue"in e}function zd(e){return!!e&&"arrayValue"in e}function Bd(e){return!!e&&"nullValue"in e}function qd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Kd(e){return!!e&&"mapValue"in e}function Gd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ud(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gd(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Hd(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Wd(e){return"nullValue"in e?Dd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ud(Ad.empty(),sh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ru()}function Qd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ud(Ad.empty(),sh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Nd:Ru()}function Yd(e,t){const n=Ld(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Xd(e,t){const n=Ld(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Jd{constructor(e){this.value=e}static empty(){return new Jd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gd(t)}setAll(e){let t=ih.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gd(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Od(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Kd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ud(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Jd(Gd(this.value))}}function $d(e){const t=[];return ud(e.fields,((e,n)=>{const r=new ih([e]);if(Kd(n)){const e=$d(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new vd(t)}class Zd{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Zd(e,0,eh.min(),eh.min(),eh.min(),Jd.empty(),0)}static newFoundDocument(e,t,n,r){return new Zd(e,1,t,eh.min(),n,r,0)}static newNoDocument(e,t){return new Zd(e,2,t,eh.min(),eh.min(),Jd.empty(),0)}static newUnknownDocument(e,t){return new Zd(e,3,t,eh.min(),eh.min(),Jd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(eh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=eh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ef{constructor(e,t){this.position=e,this.inclusive=t}}function tf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?sh.comparator(sh.fromName(o.referenceValue),n.key):Ld(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function nf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Od(e.position[n],t.position[n]))return!1;return!0}class rf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class of{}class af extends of{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new yf(e,t,n):"array-contains"===t?new _f(e,n):"in"===t?new If(e,n):"not-in"===t?new Ef(e,n):"array-contains-any"===t?new kf(e,n):new af(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new vf(e,n):new wf(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ld(t,this.value)):null!==t&&Pd(this.value)===Pd(t)&&this.matchesComparison(Ld(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ru()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class cf extends of{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new cf(e,t)}matches(e){return lf(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function lf(e){return"and"===e.op}function uf(e){return"or"===e.op}function hf(e){return df(e)&&lf(e)}function df(e){for(const t of e.filters)if(t instanceof cf)return!1;return!0}function ff(e){if(e instanceof af)return e.field.canonicalString()+e.op.toString()+Fd(e.value);if(hf(e))return e.filters.map((e=>ff(e))).join(",");{const t=e.filters.map((e=>ff(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function pf(e,t){return e instanceof af?function(e,t){return t instanceof af&&e.op===t.op&&e.field.isEqual(t.field)&&Od(e.value,t.value)}(e,t):e instanceof cf?function(e,t){return t instanceof cf&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&pf(n,t.filters[r])),!0)}(e,t):void Ru()}function mf(e,t){const n=e.filters.concat(t);return cf.create(n,e.op)}function gf(e){return e instanceof af?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Fd(e.value))}(e):e instanceof cf?function(e){return e.op.toString()+" {"+e.getFilters().map(gf).join(" ,")+"}"}(e):"Filter"}class yf extends af{constructor(e,t,n){super(e,t,n),this.key=sh.fromName(n.referenceValue)}matches(e){const t=sh.comparator(e.key,this.key);return this.matchesComparison(t)}}class vf extends af{constructor(e,t){super(e,"in",t),this.keys=bf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wf extends af{constructor(e,t){super(e,"not-in",t),this.keys=bf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sh.fromName(e.referenceValue)))}class _f extends af{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zd(t)&&Rd(t.arrayValue,this.value)}}class If extends af{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rd(this.value.arrayValue,t)}}class Ef extends af{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rd(this.value.arrayValue,t)}}class kf extends af{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Rd(this.value.arrayValue,e)))}}class Tf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function Sf(e){return new Tf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cf(e){const t=Mu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ff(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Dh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Fd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Fd(e))).join(",")),t.dt=e}return t.dt}function xf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nf(e.startAt,t.startAt)&&nf(e.endAt,t.endAt)}function Af(e){return sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Nf(e,t){return e.filters.filter((e=>e instanceof af&&e.field.isEqual(t)))}function Df(e,t,n){let r=Dd,i=!0;for(const s of Nf(e,t)){let e=Dd,t=!0;switch(s.op){case"<":case"<=":e=Wd(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Dd}Yd({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Yd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Pf(e,t,n){let r=Nd,i=!0;for(const s of Nf(e,t)){let e=Nd,t=!0;switch(s.op){case">=":case">":e=Qd(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Nd}Xd({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Xd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Of{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Rf(e,t,n,r,i,s,o,a){return new Of(e,t,n,r,i,s,o,a)}function Lf(e){return new Of(e)}function Mf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ff(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function jf(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Uf(e){return null!==e.collectionGroup}function Vf(e){const t=Mu(e);if(null===t.wt){t.wt=[];const e=jf(t),n=Ff(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new rf(e)),t.wt.push(new rf(ih.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new rf(ih.keyField(),e))}}}return t.wt}function zf(e){const t=Mu(e);if(!t._t)if("F"===t.limitType)t._t=Sf(t.path,t.collectionGroup,Vf(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Vf(t)){const t="desc"===i.dir?"asc":"desc";e.push(new rf(i.field,t))}const n=t.endAt?new ef(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ef(t.startAt.position,t.startAt.inclusive):null;t._t=Sf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Bf(e,t){t.getFirstInequalityField(),jf(e);const n=e.filters.concat([t]);return new Of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qf(e,t,n){return new Of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kf(e,t){return xf(zf(e),zf(t))&&e.limitType===t.limitType}function Gf(e){return"".concat(Cf(zf(e)),"|lt:").concat(e.limitType)}function Hf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>gf(e))).join(", "),"]")),Dh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Fd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Fd(e))).join(",")),"Target(".concat(t,")")}(zf(e)),"; limitType=").concat(e.limitType,")")}function Wf(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=tf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vf(e),t))&&!(e.endAt&&!function(e,t,n){const r=tf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vf(e),t))}(e,t)}function Qf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yf(e){return(t,n)=>{let r=!1;for(const i of Vf(e)){const e=Xf(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xf(e,t,n){const r=e.field.isKeyField()?sh.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ld(r,i):Ru()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ru()}}class Jf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ud(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return hd(this.inner)}size(){return this.innerSize}}const $f=new dd(sh.comparator);function Zf(){return $f}const ep=new dd(sh.comparator);function tp(){let e=ep;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function np(e){let t=ep;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function rp(){return sp()}function ip(){return sp()}function sp(){return new Jf((e=>e.toString()),((e,t)=>e.isEqual(t)))}const op=new dd(sh.comparator),ap=new md(sh.comparator);function cp(){let e=ap;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const lp=new md(Xu);function up(){return lp}function hp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(t)?"-0":t}}function dp(e){return{integerValue:""+e}}function fp(e,t){return Oh(t)?dp(t):hp(e,t)}class pp{constructor(){this._=void 0}}function mp(e,t,n){return e instanceof vp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Td(t)&&(t=Sd(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wp?bp(e,t):e instanceof _p?Ip(e,t):function(e,t){const n=yp(e,t),r=kp(n)+kp(e.gt);return Vd(n)&&Vd(e.gt)?dp(r):hp(e.serializer,r)}(e,t)}function gp(e,t,n){return e instanceof wp?bp(e,t):e instanceof _p?Ip(e,t):n}function yp(e,t){return e instanceof Ep?Vd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class vp extends pp{}class wp extends pp{constructor(e){super(),this.elements=e}}function bp(e,t){const n=Tp(t);for(const r of e.elements)n.some((e=>Od(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _p extends pp{constructor(e){super(),this.elements=e}}function Ip(e,t){let n=Tp(t);for(const r of e.elements)n=n.filter((e=>!Od(e,r)));return{arrayValue:{values:n}}}class Ep extends pp{constructor(e,t){super(),this.serializer=e,this.gt=t}}function kp(e){return Ed(e.integerValue||e.doubleValue)}function Tp(e){return zd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sp{constructor(e,t){this.field=e,this.transform=t}}class Cp{constructor(e,t){this.version=e,this.transformResults=t}}class xp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xp}static exists(e){return new xp(void 0,e)}static updateTime(e){return new xp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ap(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Np{}function Dp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zp(e.key,xp.none()):new Mp(e.key,e.data,xp.none());{const n=e.data,r=Jd.empty();let i=new md(ih.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Fp(e.key,r,new vd(i.toArray()),xp.none())}}function Pp(e,t,n){e instanceof Mp?function(e,t,n){const r=e.value.clone(),i=Up(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fp?function(e,t,n){if(!Ap(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Up(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Op(e,t,n,r){return e instanceof Mp?function(e,t,n,r){if(!Ap(e.precondition,t))return n;const i=e.value.clone(),s=Vp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fp?function(e,t,n,r){if(!Ap(e.precondition,t))return n;const i=Vp(e.fieldTransforms,r,t),s=t.data;return s.setAll(jp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ap(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=yp(r.transform,e||null);null!=i&&(null===n&&(n=Jd.empty()),n.set(r.field,i))}return n||null}function Lp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ju(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wp&&t instanceof wp||e instanceof _p&&t instanceof _p?Ju(e.elements,t.elements,Od):e instanceof Ep&&t instanceof Ep?Od(e.gt,t.gt):e instanceof vp&&t instanceof vp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mp extends Np{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fp extends Np{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Up(e,t,n){const r=new Map;Lu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,gp(o,a,n[i]))}return r}function Vp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mp(e,s,t))}return r}class zp extends Np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bp extends Np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Op(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Op(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ip();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Dp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(eh.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),cp())}isEqual(e){return this.batchId===e.batchId&&Ju(this.mutations,e.mutations,((e,t)=>Lp(e,t)))&&Ju(this.baseMutations,e.baseMutations,((e,t)=>Lp(e,t)))}}class Kp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Lu(e.mutations.length===n.length);let r=op;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Kp(e,t,n,r)}}class Gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Hp{constructor(e,t){this.count=e,this.unchangedNames=t}}var Wp,Qp;function Yp(e){switch(e){default:return Ru();case Fu.CANCELLED:case Fu.UNKNOWN:case Fu.DEADLINE_EXCEEDED:case Fu.RESOURCE_EXHAUSTED:case Fu.INTERNAL:case Fu.UNAVAILABLE:case Fu.UNAUTHENTICATED:return!1;case Fu.INVALID_ARGUMENT:case Fu.NOT_FOUND:case Fu.ALREADY_EXISTS:case Fu.PERMISSION_DENIED:case Fu.FAILED_PRECONDITION:case Fu.ABORTED:case Fu.OUT_OF_RANGE:case Fu.UNIMPLEMENTED:case Fu.DATA_LOSS:return!0}}function Xp(e){if(void 0===e)return Du("GRPC error has no .code"),Fu.UNKNOWN;switch(e){case Wp.OK:return Fu.OK;case Wp.CANCELLED:return Fu.CANCELLED;case Wp.UNKNOWN:return Fu.UNKNOWN;case Wp.DEADLINE_EXCEEDED:return Fu.DEADLINE_EXCEEDED;case Wp.RESOURCE_EXHAUSTED:return Fu.RESOURCE_EXHAUSTED;case Wp.INTERNAL:return Fu.INTERNAL;case Wp.UNAVAILABLE:return Fu.UNAVAILABLE;case Wp.UNAUTHENTICATED:return Fu.UNAUTHENTICATED;case Wp.INVALID_ARGUMENT:return Fu.INVALID_ARGUMENT;case Wp.NOT_FOUND:return Fu.NOT_FOUND;case Wp.ALREADY_EXISTS:return Fu.ALREADY_EXISTS;case Wp.PERMISSION_DENIED:return Fu.PERMISSION_DENIED;case Wp.FAILED_PRECONDITION:return Fu.FAILED_PRECONDITION;case Wp.ABORTED:return Fu.ABORTED;case Wp.OUT_OF_RANGE:return Fu.OUT_OF_RANGE;case Wp.UNIMPLEMENTED:return Fu.UNIMPLEMENTED;case Wp.DATA_LOSS:return Fu.DATA_LOSS;default:return Ru()}}(Qp=Wp||(Wp={}))[Qp.OK=0]="OK",Qp[Qp.CANCELLED=1]="CANCELLED",Qp[Qp.UNKNOWN=2]="UNKNOWN",Qp[Qp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qp[Qp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qp[Qp.NOT_FOUND=5]="NOT_FOUND",Qp[Qp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qp[Qp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qp[Qp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qp[Qp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qp[Qp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qp[Qp.ABORTED=10]="ABORTED",Qp[Qp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qp[Qp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qp[Qp.INTERNAL=13]="INTERNAL",Qp[Qp.UNAVAILABLE=14]="UNAVAILABLE",Qp[Qp.DATA_LOSS=15]="DATA_LOSS";class Jp{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return $p}static getOrCreateInstance(){return null===$p&&($p=new Jp),$p}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let $p=null;function Zp(){return new TextEncoder}const em=new ku([4294967295,4294967295],0);function tm(e){const t=Zp().encode(e),n=new Eu;return n.update(t),new Uint8Array(n.digest())}function nm(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ku([n,r],0),new ku([i,s],0)]}class rm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new im("Invalid padding: ".concat(t));if(n<0)throw new im("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new im("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new im("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=ku.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ku.fromNumber(n)));return 1===r.compare(em)&&(r=new ku([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=tm(e),[n,r]=nm(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new rm(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=tm(e),[n,r]=nm(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class im extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sm{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,om.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sm(eh.min(),r,new dd(Xu),Zf(),cp())}}class om{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new om(n,t,cp(),cp(),cp())}}class am{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class cm{constructor(e,t){this.targetId=e,this.Vt=t}}class lm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bd.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class um{constructor(){this.St=0,this.Dt=fm(),this.Ct=bd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=cp(),t=cp(),n=cp();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ru()}})),new om(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=fm()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hm{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Zf(),this.zt=dm(),this.Wt=new dd(Xu)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Ru()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Af(s))if(0===r){const e=new sh(s.path);this.Yt(n,e,Zd.newNoDocument(e,eh.min()))}else Lu(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Jp.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const l={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(l.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=kd(i).toUint8Array()}catch(e){if(e instanceof wd)return Pu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new rm(a,s,o)}catch(e){return Pu(e instanceof im?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Af(i.target)){const t=new sh(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Zd.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=cp();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new sm(e,t,this.Wt,this.jt,n);return this.jt=Zf(),this.zt=dm(),this.Wt=new dd(Xu),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new um,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new md(Xu),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Nu("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new um),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function dm(){return new dd(sh.comparator)}function fm(){return new dd(sh.comparator)}const pm={asc:"ASCENDING",desc:"DESCENDING"},mm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gm={and:"AND",or:"OR"};class ym{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vm(e,t){return e.useProto3Json||Dh(t)?t:{value:t}}function wm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _m(e,t){return wm(e,t.toTimestamp())}function Im(e){return Lu(!!e),eh.fromTimestamp(function(e){const t=Id(e);return new Zu(t.seconds,t.nanos)}(e))}function Em(e,t){return function(e){return new nh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function km(e){const t=nh.fromString(e);return Lu(Hm(t)),t}function Tm(e,t){return Em(e.databaseId,t.path)}function Sm(e,t){const n=km(t);if(n.get(1)!==e.databaseId.projectId)throw new ju(Fu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ju(Fu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sh(Nm(n))}function Cm(e,t){return Em(e.databaseId,t)}function xm(e){const t=km(e);return 4===t.length?nh.emptyPath():Nm(t)}function Am(e){return new nh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Nm(e){return Lu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dm(e,t,n){return{name:Tm(e,t),fields:n.value.mapValue.fields}}function Pm(e,t,n){const r=Sm(e,t.name),i=Im(t.updateTime),s=t.createTime?Im(t.createTime):eh.min(),o=new Jd({mapValue:{fields:t.fields}}),a=Zd.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Om(e,t){let n;if(t instanceof Mp)n={update:Dm(e,t.key,t.value)};else if(t instanceof zp)n={delete:Tm(e,t.key)};else if(t instanceof Fp)n={update:Dm(e,t.key,t.data),updateMask:Gm(t.fieldMask)};else{if(!(t instanceof Bp))return Ru();n={verify:Tm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _p)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ep)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ru()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_m(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ru()}(e,t.precondition)),n}function Rm(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?xp.updateTime(Im(e.updateTime)):void 0!==e.exists?xp.exists(e.exists):xp.none()}(t.currentDocument):xp.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Lu("REQUEST_TIME"===t.setToServerValue),n=new vp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new wp(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _p(e)}else"increment"in t?n=new Ep(e,t.increment):Ru();const r=ih.fromServerFormat(t.fieldPath);return new Sp(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Sm(e,t.update.name),s=new Jd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new vd(t.map((e=>ih.fromServerFormat(e))))}(t.updateMask);return new Fp(i,s,e,n,r)}return new Mp(i,s,n,r)}if(t.delete){const r=Sm(e,t.delete);return new zp(r,n)}if(t.verify){const r=Sm(e,t.verify);return new Bp(r,n)}return Ru()}function Lm(e,t){return{documents:[Cm(e,t.path)]}}function Mm(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Cm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Cm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Km(cf.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Bm(e.field),direction:Um(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=vm(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Fm(e){let t=xm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=jm(e);return t instanceof cf&&hf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new rf(qm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Dh(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ef(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ef(n,t)}(n.endAt)),Rf(t,i,o,s,a,"F",c,l)}function jm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qm(e.unaryFilter.field);return af.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qm(e.unaryFilter.field);return af.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qm(e.unaryFilter.field);return af.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qm(e.unaryFilter.field);return af.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ru()}}(e):void 0!==e.fieldFilter?function(e){return af.create(qm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ru()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cf.create(e.compositeFilter.filters.map((e=>jm(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ru()}}(e.compositeFilter.op))}(e):Ru()}function Um(e){return pm[e]}function Vm(e){return mm[e]}function zm(e){return gm[e]}function Bm(e){return{fieldPath:e.canonicalString()}}function qm(e){return ih.fromServerFormat(e.fieldPath)}function Km(e){return e instanceof af?function(e){if("=="===e.op){if(qd(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NAN"}};if(Bd(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qd(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NAN"}};if(Bd(e.value))return{unaryFilter:{field:Bm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bm(e.field),op:Vm(e.op),value:e.value}}}(e):e instanceof cf?function(e){const t=e.getFilters().map((e=>Km(e)));return 1===t.length?t[0]:{compositeFilter:{op:zm(e.op),filters:t}}}(e):Ru()}function Gm(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Hm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Wm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eh.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eh.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bd.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Wm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qm{constructor(e){this.fe=e}}function Ym(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Tm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wm(e,t.version.toTimestamp()),createTime:wm(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Jm(t.version)};else{if(!t.isUnknownDocument())return Ru();r.unknownDocument={path:n.path.toArray(),version:Jm(t.version)}}return r}function Xm(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $m(e){const t=new Zu(e.seconds,e.nanoseconds);return eh.fromTimestamp(t)}function Zm(e,t){const n=(t.baseMutations||[]).map((t=>Rm(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Rm(e.fe,t))),i=Zu.fromMillis(t.localWriteTimeMs);return new qp(t.batchId,i,n,r)}function eg(e){const t=$m(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?$m(e.lastLimboFreeSnapshotVersion):eh.min();let r;var i;return void 0!==e.query.documents?(Lu(1===(i=e.query).documents.length),r=zf(Lf(xm(i.documents[0])))):r=function(e){return zf(Fm(e))}(e.query),new Wm(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,bd.fromBase64String(e.resumeToken))}function tg(e,t){const n=Jm(t.snapshotVersion),r=Jm(t.lastLimboFreeSnapshotVersion);let i;i=Af(t.target)?Lm(e.fe,t.target):Mm(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Cf(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ng(e){const t=Fm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qf(t,t.limit,"L"):t}function rg(e,t){return new Gp(t.largestBatchId,Rm(e.fe,t.overlayMutation))}function ig(e,t){const n=t.path.lastSegment();return[e,Rh(t.path.popLast()),n]}function sg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Jm(r.readTime),documentKey:Rh(r.documentKey.path),largestBatchId:r.largestBatchId}}class og{getBundleMetadata(e,t){return ag(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:$m(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return ag(e).put({bundleId:(n=t).id,createTime:Jm(Im(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return cg(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:ng(t.bundledQuery),readTime:$m(t.readTime)};var t}))}saveNamedQuery(e,t){return cg(e).put(function(e){return{name:e.name,readTime:Jm(Im(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ag(e){return cd(e,"bundles")}function cg(e){return cd(e,"namedQueries")}class lg{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new lg(e,n)}getOverlay(e,t){return ug(e).get(ig(this.userId,t)).next((e=>e?rg(this.serializer,e):null))}getOverlays(e,t){const n=rp();return vh.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Gp(t,i);r.push(this.we(e,s))})),vh.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Rh(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ug(e).J("collectionPathOverlayIndex",r))})),vh.waitFor(i)}getOverlaysForCollection(e,t,n){const r=rp(),i=Rh(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ug(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=rg(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=rp();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ug(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=rg(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return ug(e).put(function(e,t,n){const[r,i,s]=ig(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Om(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function ug(e){return cd(e,"documentOverlays")}class hg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ed(e.integerValue));else if("doubleValue"in e){const n=Ed(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Ph(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(kd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Hd(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ru()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),sh.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function dg(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fg(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=dg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}hg.Ve=new hg;class pg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=fg(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=fg(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class mg{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class gg{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class yg{constructor(){this.je=new pg,this.ze=new mg(this.je),this.We=new gg(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class vg{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new vg(this.indexId,this.documentKey,this.arrayValue,n)}}function wg(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=bg(e.arrayValue,t.arrayValue),0!==n?n:(n=bg(e.directionalValue,t.directionalValue),0!==n?n:sh.comparator(e.documentKey,t.documentKey)))}function bg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class _g{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Lu(e.collectionGroup===this.collectionId);const t=ah(e);if(void 0!==t&&!this.en(t))return!1;const n=ch(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ig(e){var t,n;if(Lu(e instanceof af||e instanceof cf),e instanceof af){if(e instanceof If){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>af.create(e.field,"==",t))))||[];return cf.create(r,"or")}return e}const r=e.filters.map((e=>Ig(e)));return cf.create(r,e.op)}function Eg(e){if(0===e.getFilters().length)return[];const t=Cg(Ig(e));return Lu(Sg(t)),kg(t)||Tg(t)?[t]:t.getFilters()}function kg(e){return e instanceof af}function Tg(e){return e instanceof cf&&hf(e)}function Sg(e){return kg(e)||Tg(e)||function(e){if(e instanceof cf&&uf(e)){for(const t of e.getFilters())if(!kg(t)&&!Tg(t))return!1;return!0}return!1}(e)}function Cg(e){if(Lu(e instanceof af||e instanceof cf),e instanceof af)return e;if(1===e.filters.length)return Cg(e.filters[0]);const t=e.filters.map((e=>Cg(e)));let n=cf.create(t,e.op);return n=Ng(n),Sg(n)?n:(Lu(n instanceof cf),Lu(lf(n)),Lu(n.filters.length>1),n.filters.reduce(((e,t)=>xg(e,t))))}function xg(e,t){let n;return Lu(e instanceof af||e instanceof cf),Lu(t instanceof af||t instanceof cf),n=e instanceof af?t instanceof af?function(e,t){return cf.create([e,t],"and")}(e,t):Ag(e,t):t instanceof af?Ag(t,e):function(e,t){if(Lu(e.filters.length>0&&t.filters.length>0),lf(e)&&lf(t))return mf(e,t.getFilters());const n=uf(e)?e:t,r=uf(e)?t:e,i=n.filters.map((e=>xg(e,r)));return cf.create(i,"or")}(e,t),Ng(n)}function Ag(e,t){if(lf(t))return mf(t,e.getFilters());{const n=t.filters.map((t=>xg(e,t)));return cf.create(n,"or")}}function Ng(e){if(Lu(e instanceof af||e instanceof cf),e instanceof af)return e;const t=e.getFilters();if(1===t.length)return Ng(t[0]);if(df(e))return e;const n=t.map((e=>Ng(e))),r=[];return n.forEach((t=>{t instanceof af?r.push(t):t instanceof cf&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:cf.create(r,e.op)}class Dg{constructor(){this.rn=new Pg}addToCollectionParentIndex(e,t){return this.rn.add(t),vh.resolve()}getCollectionParents(e,t){return vh.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return vh.resolve()}deleteFieldIndex(e,t){return vh.resolve()}getDocumentsMatchingTarget(e,t){return vh.resolve(null)}getIndexType(e,t){return vh.resolve(0)}getFieldIndexes(e,t){return vh.resolve([])}getNextCollectionGroupToUpdate(e){return vh.resolve(null)}getMinOffset(e,t){return vh.resolve(fh.min())}getMinOffsetFromCollectionGroup(e,t){return vh.resolve(fh.min())}updateCollectionGroup(e,t,n){return vh.resolve()}updateIndexEntries(e,t){return vh.resolve()}}class Pg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new md(nh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new md(nh.comparator)).toArray()}}const Og=new Uint8Array(0);class Rg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Pg,this.un=new Jf((e=>Cf(e)),((e,t)=>xf(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:Rh(r)};return Lg(e).put(i)}return vh.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[$u(t),""],!1,!0);return Lg(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Fh(r.parent))}return n}))}addFieldIndex(e,t){const n=Fg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=jg(e);return i.next((e=>{n.put(sg(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Fg(e),r=jg(e),i=Mg(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=Mg(e);let r=!0;const i=new Map;return vh.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=cp();const r=[];return vh.forEach(i,((i,s)=>{var o;Nu("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(Cf(t)));const a=function(e,t){const n=ah(t);if(void 0===n)return null;for(const r of Nf(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of ch(t))for(const t of Nf(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ch(t)){const t=0===i.kind?Df(e,i.fieldPath,e.startAt):Pf(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ef(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of ch(t)){const t=0===i.kind?Pf(e,i.fieldPath,e.endAt):Df(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ef(n,r)}(s,i),h=this.hn(i,s,l),d=this.hn(i,s,u),f=this.ln(i,s,c),p=this.fn(i.indexId,a,h,l.inclusive,d,u.inclusive,f);return vh.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=sh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return vh.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Eg(cf.create(e.filters,"and")).map((t=>Sf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/c]):Og,h=this.wn(e,a,n[u%c],r),d=this._n(e,a,i[u%c],s),f=o.map((t=>this.wn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}wn(e,t,n,r){const i=new vg(e,sh.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new vg(e,sh.empty(),t,n);return r?i.Je():i}an(e,t){const n=new _g(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return vh.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new md(ih.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new yg;for(const r of ch(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);hg.Ve._e(e,i)}return n.Qe()}dn(e){const t=new yg;return hg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new yg;return hg.Ve._e(Ud(this.databaseId,t),n.He(function(e){const t=ch(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new yg);let i=0;for(const s of ch(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&zd(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);hg.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new yg;n.seed(e.Qe()),hg.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof af&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Fg(e),r=jg(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return vh.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new uh(t.sequenceNumber,new fh($m(t.readTime),new sh(Fh(t.documentKey)),t.largestBatchId)):uh.empty(),r=e.fields.map((e=>{let[t,n]=e;return new lh(ih.fromServerFormat(t),n)}));return new oh(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Xu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Fg(e),i=jg(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>vh.forEach(t,(t=>i.put(sg(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return vh.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?vh.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),vh.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?vh.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return Mg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return Mg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=Mg(e);let i=new md(wg);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new vg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new md(wg);const r=this.mn(t,e);if(null==r)return n;const i=ah(t);if(null!=i){const s=e.data.field(i.fieldPath);if(zd(s))for(const i of s.arrayValue.values||[])n=n.add(new vg(t.indexId,e.key,this.dn(i),r))}else n=n.add(new vg(t.indexId,e.key,Og,r));return n}vn(e,t,n,r,i){Nu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=yd(s),c=yd(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=yd(o)):t?(i(a),a=yd(s)):(a=yd(s),c=yd(o))}}(r,i,wg,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),vh.waitFor(s)}Tn(e){let t=1;return jg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>wg(e,t))).filter(((e,t,n)=>!t||0!==wg(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=wg(s,e),i=wg(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Og,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Og,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return wg(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ug)}getMinOffset(e,t){return vh.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||Ru())))).next(Ug)}}function Lg(e){return cd(e,"collectionParents")}function Mg(e){return cd(e,"indexEntries")}function Fg(e){return cd(e,"indexConfiguration")}function jg(e){return cd(e,"indexState")}function Ug(e){Lu(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ph(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fh(t.readTime,t.documentKey,n)}const Vg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zg(e,zg.DEFAULT_COLLECTION_PERCENTILE,zg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bg(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Lu(1===a)})));const l=[];for(const u of n.mutations){const e=Vh(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return vh.waitFor(s).next((()=>l))}function qg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ru();t=e.noDocument}return JSON.stringify(t).length}zg.DEFAULT_COLLECTION_PERCENTILE=10,zg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zg.DEFAULT=new zg(41943040,zg.DEFAULT_COLLECTION_PERCENTILE,zg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zg.DISABLED=new zg(-1,0,0);class Kg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Lu(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Kg(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hg(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Wg(e),s=Hg(e);return s.add({}).next((o=>{Lu("number"==typeof o);const a=new qp(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Om(e.fe,t))),i=n.mutations.map((t=>Om(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new md(((e,t)=>Xu(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Vh(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,zh))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),vh.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Hg(e).get(t).next((e=>e?(Lu(e.userId===this.userId),Zm(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?vh.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Hg(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Lu(t.batchId>=n),i=Zm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Hg(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hg(e).j("userMutationsIndex",t).next((e=>e.map((e=>Zm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Uh(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Wg(e).X({range:r},((n,r,s)=>{const[o,a,c]=n,l=Fh(a);if(o===this.userId&&t.path.isEqual(l))return Hg(e).get(c).next((e=>{if(!e)throw Ru();Lu(e.userId===this.userId),i.push(Zm(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new md(Xu);const r=[];return t.forEach((t=>{const i=Uh(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Wg(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,c=Fh(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),vh.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Uh(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new md(Xu);return Wg(e).X({range:s},((e,t,i)=>{const[s,a,c]=e,l=Fh(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Hg(e).get(t).next((e=>{if(null===e)throw Ru();Lu(e.userId===this.userId),n.push(Zm(this.serializer,e))})))})),vh.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Bg(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),vh.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return vh.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Wg(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Fh(e[1]);r.push(t)}else n.done()})).next((()=>{Lu(0===r.length)}))}))}containsKey(e,t){return Gg(e,this.userId,t)}xn(e){return Qg(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Gg(e,t,n){const r=Uh(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Wg(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Hg(e){return cd(e,"mutations")}function Wg(e){return cd(e,"documentMutations")}function Qg(e){return cd(e,"mutationQueues")}class Yg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yg(0)}static Mn(){return new Yg(-1)}}class Xg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new Yg(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>eh.fromTimestamp(new Zu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jg(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(Lu(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Jg(e).X(((s,o)=>{const a=eg(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>vh.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Jg(e).X(((e,n)=>{const r=eg(n);t(r)}))}$n(e){return $g(e).get("targetGlobalKey").next((e=>(Lu(null!==e),e)))}On(e,t){return $g(e).put("targetGlobalKey",t)}Fn(e,t){return Jg(e).put(tg(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Cf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Jg(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=eg(n);xf(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Zg(e);return t.forEach((t=>{const s=Rh(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),vh.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zg(e);return vh.forEach(t,(t=>{const i=Rh(t.path);return vh.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Zg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zg(e);let i=cp();return r.X({range:n,Y:!0},((e,t,n)=>{const r=Fh(e[1]),s=new sh(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Rh(t.path),r=IDBKeyRange.bound([n],[$u(n)],!1,!0);let i=0;return Zg(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return Jg(e).get(t).next((e=>e?eg(e):null))}}function Jg(e){return cd(e,"targets")}function $g(e){return cd(e,"targetGlobal")}function Zg(e){return cd(e,"targetDocuments")}function ey(e,t){let[n,r]=e,[i,s]=t;const o=Xu(n,i);return 0===o?Xu(r,s):o}class ty{constructor(e){this.Ln=e,this.buffer=new md(ey),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ey(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ny{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){Nu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Eh(e)?Nu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await yh(e)}await this.Qn(3e5)}))}}class ry{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return vh.resolve(Nh.ct);const n=new ty(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Nu("LruGarbageCollector","Garbage collection skipped; disabled"),vh.resolve(Vg)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Nu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Vg):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Nu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Au()<=j.DEBUG&&Nu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),vh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function iy(e,t){return new ry(e,t)}class sy{constructor(e,t){this.db=e,this.garbageCollector=iy(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return oy(e,n)}removeReference(e,t,n){return oy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return oy(e,t)}Xn(e,t){return function(e,t){let n=!1;return Qg(e).Z((r=>Gg(e,r,t).next((e=>(e&&(n=!0),vh.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,eh.min()),Zg(e).delete([0,Rh(s.path)]))))}));r.push(t)}})).next((()=>vh.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return oy(e,t)}Yn(e,t){const n=Zg(e);let r,i=Nh.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Nh.ct&&t(new sh(Fh(r)),i),i=c,r=a):i=Nh.ct})).next((()=>{i!==Nh.ct&&t(new sh(Fh(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oy(e,t){return Zg(e).put(function(e,t){return{targetId:0,path:Rh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ay{constructor(){this.changes=new Jf((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return dy(e).put(n)}removeEntry(e,t,n){return dy(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Xm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Zd.newInvalidDocument(t);return dy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fy(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Zd.newInvalidDocument(t)};return dy(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fy(t))},((e,r)=>{n={document:this.ts(t,r),size:qg(r)}})).next((()=>n))}getEntries(e,t){let n=Zf();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=Zf(),r=new dd(sh.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,qg(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return vh.resolve();let r=new md(my);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(fy(r.first()),fy(r.last())),s=r.getIterator();let o=s.getNext();return dy(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=sh.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&my(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(fy(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),Xm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dy(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=Zf();for(const i of e){const e=this.ts(sh.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Wf(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Zf();const s=py(t,n),o=py(t,fh.max());return dy(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(sh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new uy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return hy(e).get("remoteDocumentGlobalKey").next((e=>(Lu(!!e),e)))}Zn(e,t){return hy(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Pm(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=sh.fromSegments(t.noDocument.path),r=$m(t.noDocument.readTime);n=Zd.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ru();{const e=sh.fromSegments(t.unknownDocument.path),r=$m(t.unknownDocument.version);n=Zd.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Zu(e[0],e[1]);return eh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(eh.min()))return e}return Zd.newInvalidDocument(e)}}function ly(e){return new cy(e)}class uy extends ay{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Jf((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new md(((e,t)=>Xu(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Ym(this.os.serializer,s);r=r.add(i.path.popLast());const c=qg(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Ym(this.os.serializer,s.convertToNoDocument(eh.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),vh.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function hy(e){return cd(e,"remoteDocumentGlobal")}function dy(e){return cd(e,"remoteDocumentsV14")}function fy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function py(e,t){const n=t.documentKey.path.toArray();return[e,Xm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function my(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Xu(n[s],r[s]),i)return i;return i=Xu(n.length,r.length),i||(i=Xu(n[n.length-2],r[r.length-2]),i||Xu(n[n.length-1],r[r.length-1]))}class gy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yy{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Op(n.mutation,e,vd.empty(),Zu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,cp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cp();const r=rp();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=tp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=rp();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,cp())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zf();const s=sp(),o=sp();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Fp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Op(o.mutation,t,o.mutation.getFieldMask(),Zu.now())):s.set(t.key,vd.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new gy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=sp();let r=new dd(((e,t)=>e-t)),i=cp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||vd.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||cp()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=ip();c.forEach((e=>{if(!i.has(e)){const r=Dp(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return vh.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Uf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):vh.resolve(rp());let o=-1,a=i;return s.next((t=>vh.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?vh.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,cp()))).next((e=>({batchId:o,changes:np(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sh(t)).next((e=>{let t=tp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=tp();return this.indexManager.getCollectionParents(e,r).next((s=>vh.forEach(s,(s=>{const o=function(e,t){return new Of(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Zd.newInvalidDocument(r)))}));let n=tp();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Op(s.mutation,i,vd.empty(),Zu.now()),Wf(t,i)&&(n=n.insert(e,i))})),n}))}}class vy{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return vh.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Im(n.createTime)}),vh.resolve()}getNamedQuery(e,t){return vh.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:ng(e.bundledQuery),readTime:Im(e.readTime)}}(t)),vh.resolve()}}class wy{constructor(){this.overlays=new dd(sh.comparator),this.ls=new Map}getOverlay(e,t){return vh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rp();return vh.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),vh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),vh.resolve()}getOverlaysForCollection(e,t,n){const r=rp(),i=t.length+1,s=new sh(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return vh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new dd(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=rp(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return vh.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gp(t,n));let i=this.ls.get(t);void 0===i&&(i=cp(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class by{constructor(){this.fs=new md(_y.ds),this.ws=new md(_y._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new _y(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new _y(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new sh(new nh([])),n=new _y(t,e),r=new _y(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new sh(new nh([])),n=new _y(t,e),r=new _y(t,e+1);let i=cp();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new _y(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _y{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return sh.comparator(e.key,t.key)||Xu(e.As,t.As)}static _s(e,t){return Xu(e.As,t.As)||sh.comparator(e.key,t.key)}}class Iy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new md(_y.ds)}checkEmpty(e){return vh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new _y(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return vh.resolve(s)}lookupMutationBatch(e,t){return vh.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return vh.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vh.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return vh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _y(t,0),r=new _y(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),vh.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new md(Xu);return t.forEach((e=>{const t=new _y(e,0),r=new _y(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),vh.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;sh.isDocumentKey(i)||(i=i.child(""));const s=new _y(new sh(i),0);let o=new md(Xu);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),vh.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return vh.forEach(t.mutations,(r=>{const i=new _y(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new _y(t,0),r=this.Rs.firstAfterOrEqual(n);return vh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,vh.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ey{constructor(e){this.Ds=e,this.docs=new dd(sh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vh.resolve(n?n.document.mutableCopy():Zd.newInvalidDocument(t))}getEntries(e,t){let n=Zf();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Zd.newInvalidDocument(e))})),vh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zf();const s=t.path,o=new sh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ph(dh(o),n)<=0||(r.has(o.key)||Wf(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return vh.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ru()}Cs(e,t){return vh.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ky(this)}getSize(e){return vh.resolve(this.size)}}class ky extends ay{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),vh.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Ty{constructor(e){this.persistence=e,this.xs=new Jf((e=>Cf(e)),xf),this.lastRemoteSnapshotVersion=eh.min(),this.highestTargetId=0,this.Ns=0,this.ks=new by,this.targetCount=0,this.Ms=Yg.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),vh.resolve()}getLastRemoteSnapshotVersion(e){return vh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vh.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),vh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),vh.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,vh.resolve()}updateTargetData(e,t){return this.Fn(t),vh.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,vh.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),vh.waitFor(i).next((()=>r))}getTargetCount(e){return vh.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return vh.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),vh.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),vh.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),vh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return vh.resolve(n)}containsKey(e,t){return vh.resolve(this.ks.containsKey(t))}}class Sy{constructor(e,t){this.$s={},this.overlays={},this.Os=new Nh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Ty(this),this.indexManager=new Dg,this.remoteDocumentCache=function(e){return new Ey(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Qm(t),this.qs=new vy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Iy(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Nu("MemoryPersistence","Starting transaction:",e);const r=new Cy(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return vh.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Cy extends gh{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Qs=new by,this.js=null}static zs(e){return new xy(e)}get Ws(){if(this.js)return this.js;throw Ru()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),vh.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),vh.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),vh.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vh.forEach(this.Ws,(n=>{const r=sh.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,eh.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return vh.or([()=>vh.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ay{constructor(e){this.serializer=e}O(e,t,n,r){const i=new wh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ny(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=vh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ny(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:eh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jh,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return vh.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Zh});t.createIndex("collectionPathOverlayIndex",ed,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",td,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bh});t.createIndex("documentKeyIndex",qh),t.createIndex("collectionGroupIndex",Kh)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Yh}).createIndex("sequenceNumberIndex",Xh,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Jh}).createIndex("documentKeyIndex",$h,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=qg(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>vh.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>vh.forEach(n,(n=>{Lu(n.userId===t.userId);const r=Zm(this.serializer,n);return Bg(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new nh(n),o=function(e){return[0,Rh(e)]}(s);r.push(t.get(o).next((n=>n?vh.resolve():(n=>t.put({targetId:0,path:Rh(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>vh.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Qh});const n=t.store("collectionParents"),r=new Pg,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Rh(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new nh(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=Fh(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=eg(n),i=tg(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new sh(nh.fromString(o.document.name).popFirst(5)):o.noDocument?sh.fromSegments(o.noDocument.path):o.unknownDocument?sh.fromSegments(o.unknownDocument.path):Ru()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>vh.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=ly(this.serializer),i=new Sy(xy.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:cp();Zm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),vh.forEach(n,((e,n)=>{const s=new Su(n),o=lg.de(this.serializer,s),a=i.getIndexManager(s),c=Kg.de(s,this.serializer,a,i.referenceDelegate);return new yy(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new ad(t,Nh.ct),e).next()}))}))}}function Ny(e){e.createObjectStore("targetDocuments",{keyPath:Hh}).createIndex("documentTargetsIndex",Wh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gh,{unique:!0}),e.createObjectStore("targetGlobal")}const Dy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Py{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=l,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Py.D())throw new ju(Fu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sy(this,r),this.di=t+"main",this.serializer=new Qm(a),this.wi=new bh(this.di,this.ui,new Ay(this.serializer)),this.Bs=new Xg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ly(this.serializer),this.qs=new og,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Du("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ju(Fu.FAILED_PRECONDITION,Dy);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new Nh(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ry(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(Eh(e))return Nu("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Nu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Oy(e).get("owner").next((e=>vh.resolve(this.Ri(e))))}Pi(e){return Ry(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=cd(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return vh.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?vh.resolve(!0):Oy(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ju(Fu.FAILED_PRECONDITION,Dy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ry(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Nu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ad(e,Nh.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>Ry(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return Kg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return lg.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){Nu("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?od:14===s?sd:13===s?id:12===s?rd:11===s?nd:void Ru();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new ad(r,this.Os?this.Os.next():Nh.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Du("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new ju(Fu.FAILED_PRECONDITION,mh);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return Oy(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ju(Fu.FAILED_PRECONDITION,Dy)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oy(e).put("owner",t)}static D(){return bh.D()}Ai(e){const t=Oy(e);return t.get("owner").next((e=>this.Ri(e)?(Nu("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):vh.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Du("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Nu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Du("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Du("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Oy(e){return cd(e,"owner")}function Ry(e){return cd(e,"clientMetadata")}function Ly(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class My{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=cp(),r=cp();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new My(e,t.fromCache,n,r)}}class Fy{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Mf(t))return vh.resolve(null);let n=zf(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=qf(t,null,"F"),n=zf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=cp(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,qf(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Mf(t)||r.isEqual(eh.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Au()<=j.DEBUG&&Nu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hf(t)),this.Wi(e,s,t,hh(r,-1)))}))}ji(e,t){let n=new md(Yf(e));return t.forEach(((t,r)=>{Wf(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Au()<=j.DEBUG&&Nu("QueryEngine","Using full collection scan to execute query:",Hf(t)),this.Ui.getDocumentsMatchingQuery(e,t,fh.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class jy{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new dd(Xu),this.Yi=new Jf((e=>Cf(e)),xf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yy(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Uy(e,t,n,r){return new jy(e,t,n,r)}async function Vy(e,t){const n=Mu(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=cp();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function zy(e){const t=Mu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function By(e,t,n){let r=cp(),i=cp();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zf();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(eh.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Nu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function qy(e,t){const n=Mu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ky(e,t){const n=Mu(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,vh.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Wm(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Gy(e,t,n){const r=Mu(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Eh(e))throw e;Nu("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Hy(e,t,n){const r=Mu(e);let i=eh.min(),s=cp();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Mu(e),i=r.Yi.get(n);return void 0!==i?vh.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,zf(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:eh.min(),n?s:cp()))).next((e=>(Yy(r,Qf(t),e),{documents:e,ir:s})))))}function Wy(e,t){const n=Mu(e),r=Mu(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function Qy(e,t){const n=Mu(e),r=n.Xi.get(t)||eh.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,hh(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Yy(n,t,e),e)))}function Yy(e,t,n){let r=e.Xi.get(t)||eh.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function Xy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cp();const r=await Ky(e,zf(ng(t.bundledQuery))),i=Mu(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Im(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(bd.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function Jy(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function $y(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Zy(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class ev{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ju(r.error.code,r.error.message))),s?new ev(e,t,r.state,i):(Du("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ju(n.error.code,n.error.message))),i?new tv(e,n.state,r):(Du("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=up();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Oh(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new nv(e,i):(Du("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class rv{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rv(t.clientId,t.onlineState):(Du("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class iv{constructor(){this.activeTargetIds=up()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sv{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new dd(Xu),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=Jy(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new iv),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(Jy(this.persistenceKey,n));if(e){const t=nv.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Zy(this.persistenceKey,e));if(n){const r=tv.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zy(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Nu("SharedClientState","READ",e,t),t}setItem(e,t){Nu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Nu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(Nu("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void Du("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=Nh.ct;if(null!=e)try{const n=JSON.parse(e);Lu("number"==typeof n),t=n}catch(e){Du("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Nh.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new ev(this.currentUser,e,t,n),i=$y(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=$y(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=Zy(this.persistenceKey,e),i=new tv(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return nv.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ev.ar(new Su(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return tv.ar(r,t)}br(e){return rv.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);Nu("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=up();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class ov{constructor(){this.Hr=new iv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new iv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class av{Yr(e){}shutdown(){}}class cv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Nu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Nu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lv=null;function uv(){return null===lv?lv=268435456+Math.round(2147483648*Math.random()):lv++,"0x"+lv.toString(16)}const hv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fv="WebChannelConnection";class pv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=uv(),o=this.To(e,t);Nu("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(Nu("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Pu("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=hv[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=uv();return new Promise(((s,o)=>{const a=new Iu;a.setWithCredentials(!0),a.listenOnce(yu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case gu.NO_ERROR:const t=a.getResponseJson();Nu(fv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case gu.TIMEOUT:Nu(fv,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ju(Fu.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const n=a.getStatus();if(Nu(fv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fu).indexOf(t)>=0?t:Fu.UNKNOWN}(t.status);o(new ju(e,t.message))}else o(new ju(Fu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ju(Fu.UNAVAILABLE,"Connection failed."));break;default:Ru()}}finally{Nu(fv,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Nu(fv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Ro(e,t,n){const r=uv(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pu(),o=mu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new bu({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Nu(fv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new dv({ro:t=>{d?Nu(fv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Nu(fv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Nu(fv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,_u.EventType.OPEN,(()=>{d||Nu(fv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,_u.EventType.CLOSE,(()=>{d||(d=!0,Nu(fv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,_u.EventType.ERROR,(t=>{d||(d=!0,Pu(fv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new ju(Fu.UNAVAILABLE,"The operation could not be completed")))})),p(u,_u.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Lu(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Nu(fv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Wp[e];if(void 0!==t)return Xp(t)}(t),i=o.message;void 0===n&&(n=Fu.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new ju(n,i)),u.close()}else Nu(fv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,vu.STAT_EVENT,(t=>{t.stat===wu.PROXY?Nu(fv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===wu.NOPROXY&&Nu(fv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function mv(){return"undefined"!=typeof window?window:null}function gv(){return"undefined"!=typeof document?document:null}function yv(e){return new ym(e,!0)}class vv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Nu("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class wv{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new vv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Fu.RESOURCE_EXHAUSTED?(Du(t.toString()),Du("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Fu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new ju(Fu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Nu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Nu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bv extends wv{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ru()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Lu(void 0===t||"string"==typeof t),bd.fromBase64String(t||"")):(Lu(void 0===t||t instanceof Uint8Array),bd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Fu.UNKNOWN:Xp(e.code);return new ju(t,e.message||"")}(o);n=new lm(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sm(e,r.document.name),s=Im(r.document.updateTime),o=r.document.createTime?Im(r.document.createTime):eh.min(),a=new Jd({mapValue:{fields:r.document.fields}}),c=Zd.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new am(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sm(e,r.document),s=r.readTime?Im(r.readTime):eh.min(),o=Zd.newNoDocument(i,s),a=r.removedTargetIds||[];n=new am([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sm(e,r.document),s=r.removedTargetIds||[];n=new am([],s,i,null)}else{if(!("filter"in t))return Ru();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Hp(r,i),o=e.targetId;n=new cm(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return eh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?eh.min():t.readTime?Im(t.readTime):eh.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Am(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Af(r)?{documents:Lm(e,r)}:{query:Mm(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bm(e,t.resumeToken);const r=vm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(eh.min())>0){n.readTime=wm(e,t.snapshotVersion.toTimestamp());const r=vm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ru()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Am(this.serializer),t.removeTarget=e,this.Wo(t)}}class _v extends wv{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Lu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Lu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Im(e.updateTime):Im(t);return n.isEqual(eh.min())&&(n=Im(t)),new Cp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Im(e.commitTime);return this.listener.cu(n,t)}return Lu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Am(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Om(this.serializer,e)))};this.Wo(t)}}class Iv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new ju(Fu.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ju(Fu.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ju(Fu.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Ev{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Du(t),this.mu=!1):Nu("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class kv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Ov(this)&&(Nu("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Mu(e);t.vu.add(4),await Sv(t),t.bu.set("Unknown"),t.vu.delete(4),await Tv(t)}(this))}))})),this.bu=new Ev(n,r)}}async function Tv(e){if(Ov(e))for(const t of e.Ru)await t(!0)}async function Sv(e){for(const t of e.Ru)await t(!1)}function Cv(e,t){const n=Mu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Pv(n)?Dv(n):Jv(n).Ko()&&Av(n,t))}function xv(e,t){const n=Mu(e),r=Jv(n);n.Au.delete(t),r.Ko()&&Nv(n,t),0===n.Au.size&&(r.Ko()?r.jo():Ov(n)&&n.bu.set("Unknown"))}function Av(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(eh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jv(e).su(t)}function Nv(e,t){e.Vu.qt(t),Jv(e).iu(t)}function Dv(e){e.Vu=new hm({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Jv(e).start(),e.bu.gu()}function Pv(e){return Ov(e)&&!Jv(e).Uo()&&e.Au.size>0}function Ov(e){return 0===Mu(e).vu.size}function Rv(e){e.Vu=void 0}async function Lv(e){e.Au.forEach(((t,n)=>{Av(e,t)}))}async function Mv(e,t){Rv(e),Pv(e)?(e.bu.Iu(t),Dv(e)):e.bu.set("Unknown")}async function Fv(e,t,n){if(e.bu.set("Online"),t instanceof lm&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Nu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await jv(e,n)}else if(t instanceof am?e.Vu.Ht(t):t instanceof cm?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(eh.min()))try{const t=await zy(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(bd.EMPTY_BYTE_STRING,r.snapshotVersion)),Nv(e,t);const i=new Wm(r.target,t,n,r.sequenceNumber);Av(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Nu("RemoteStore","Failed to raise snapshot:",t),await jv(e,t)}}async function jv(e,t,n){if(!Eh(t))throw t;e.vu.add(1),await Sv(e),e.bu.set("Offline"),n||(n=()=>zy(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Nu("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Tv(e)}))}function Uv(e,t){return t().catch((n=>jv(e,n,t)))}async function Vv(e){const t=Mu(e),n=$v(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;zv(t);)try{const e=await qy(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Bv(t,e)}catch(e){await jv(t,e)}qv(t)&&Kv(t)}function zv(e){return Ov(e)&&e.Eu.length<10}function Bv(e,t){e.Eu.push(t);const n=$v(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function qv(e){return Ov(e)&&!$v(e).Uo()&&e.Eu.length>0}function Kv(e){$v(e).start()}async function Gv(e){$v(e).hu()}async function Hv(e){const t=$v(e);for(const n of e.Eu)t.uu(n.mutations)}async function Wv(e,t,n){const r=e.Eu.shift(),i=Kp.from(r,t,n);await Uv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Vv(e)}async function Qv(e,t){t&&$v(e).ou&&await async function(e,t){if(Yp(n=t.code)&&n!==Fu.ABORTED){const n=e.Eu.shift();$v(e).Qo(),await Uv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Vv(e)}var n}(e,t),qv(e)&&Kv(e)}async function Yv(e,t){const n=Mu(e);n.asyncQueue.verifyOperationInProgress(),Nu("RemoteStore","RemoteStore received new credentials");const r=Ov(n);n.vu.add(3),await Sv(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Tv(n)}async function Xv(e,t){const n=Mu(e);t?(n.vu.delete(2),await Tv(n)):t||(n.vu.add(2),await Sv(n),n.bu.set("Unknown"))}function Jv(e){return e.Su||(e.Su=function(e,t,n){const r=Mu(e);return r.fu(),new bv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Lv.bind(null,e),ao:Mv.bind(null,e),nu:Fv.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Pv(e)?Dv(e):e.bu.set("Unknown")):(await e.Su.stop(),Rv(e))}))),e.Su}function $v(e){return e.Du||(e.Du=function(e,t,n){const r=Mu(e);return r.fu(),new _v(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Gv.bind(null,e),ao:Qv.bind(null,e),au:Hv.bind(null,e),cu:Wv.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Vv(e)):(await e.Du.stop(),e.Eu.length>0&&(Nu("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Zv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Uu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Zv(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ju(Fu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ew(e,t){if(Du("AsyncQueue","".concat(t,": ").concat(e)),Eh(e))return new ju(Fu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class tw{constructor(e){this.comparator=e?(t,n)=>e(t,n)||sh.comparator(t.key,n.key):(e,t)=>sh.comparator(e.key,t.key),this.keyedMap=tp(),this.sortedSet=new dd(this.comparator)}static emptySet(e){return new tw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new tw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class nw{constructor(){this.Cu=new dd(sh.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ru():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class rw{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new rw(e,t,tw.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class iw{constructor(){this.Nu=void 0,this.listeners=[]}}class sw{constructor(){this.queries=new Jf((e=>Gf(e)),Kf),this.onlineState="Unknown",this.ku=new Set}}async function ow(e,t){const n=Mu(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new iw),i)try{s.Nu=await n.onListen(r)}catch(e){const n=ew(e,"Initialization of query '".concat(Hf(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&uw(n)}async function aw(e,t){const n=Mu(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function cw(e,t){const n=Mu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&uw(n)}function lw(e,t,n){const r=Mu(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function uw(e){e.ku.forEach((e=>{e.next()}))}class hw{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new rw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=rw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class dw{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class fw{constructor(e){this.serializer=e}rr(e){return Sm(this.serializer,e)}ur(e){return e.metadata.exists?Pm(this.serializer,e.document,!1):Zd.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Im(e)}}class pw{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mw(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=nh.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new fw(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||cp()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Mu(e);let s=cp(),o=Zf();for(const l of n){const e=t.rr(l.metadata.name);l.document&&(s=s.add(e));const n=t.ur(l);n.setReadTime(t.cr(l.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await Ky(i,function(e){return zf(Lf(nh.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>By(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Bs.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new fw(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await Xy(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function mw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class gw{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class vw{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=cp(),this.mutatedKeys=cp(),this.tc=Yf(e),this.ec=new tw(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new nw,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Wf(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||c&&this.tc(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ru()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new rw(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new nw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=cp(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new yw(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new gw(n))})),t}hc(e){this.Yu=e.ir,this.Zu=cp();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return rw.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ww{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bw{constructor(e){this.key=e,this.fc=!1}}class _w{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Jf((e=>Gf(e)),Kf),this._c=new Map,this.mc=new Set,this.gc=new dd(sh.comparator),this.yc=new Map,this.Ic=new by,this.Tc={},this.Ec=new Map,this.Ac=Yg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Iw(e,t){const n=Qw(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Ky(n.localStore,zf(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Ew(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Cv(n.remoteStore,e)}return i}async function Ew(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Hy(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Rw(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Hy(e.localStore,t,!0),o=new vw(t,s.ir),a=o.sc(s.documents),c=om.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Rw(e,n,l.cc);const u=new ww(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),l.snapshot}async function kw(e,t){const n=Mu(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!Kf(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Gy(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),xv(n.remoteStore,r.targetId),Pw(n,r.targetId)})).catch(yh)):(Pw(n,r.targetId),await Gy(n.localStore,r.targetId,!0))}async function Tw(e,t){const n=Mu(e);try{const e=await function(e,t){const n=Mu(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(bd.EMPTY_BYTE_STRING,eh.min()).withLastLimboFreeSnapshotVersion(eh.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Bs.updateTargetData(e,l))}));let a=Zf(),c=cp();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(By(e,s,t.documentUpdates).next((e=>{a=e.nr,c=e.sr}))),!r.isEqual(eh.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return vh.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Lu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Lu(r.fc):e.removedDocuments.size>0&&(Lu(r.fc),r.fc=!1))})),await Fw(n,e,t)}catch(e){await yh(e)}}function Sw(e,t,n){const r=Mu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Mu(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&uw(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Cw(e,t,n){const r=Mu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new dd(sh.comparator);e=e.insert(s,Zd.newNoDocument(s,eh.min()));const n=cp().add(s),i=new sm(eh.min(),new Map,new dd(Xu),e,n);await Tw(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Mw(r)}else await Gy(r.localStore,t,!1).then((()=>Pw(r,t,n))).catch(yh)}async function xw(e,t){const n=Mu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Mu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=vh.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Lu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Dw(n,r,null),Nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fw(n,e)}catch(e){await yh(e)}}async function Aw(e,t,n){const r=Mu(e);try{const e=await function(e,t){const n=Mu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Dw(r,t,n),Nw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Fw(r,e)}catch(n){await yh(n)}}function Nw(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Dw(e,t,n){const r=Mu(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Ow(e,t)}))}function Ow(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(xv(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Mw(e))}function Rw(e,t,n){for(const r of n)r instanceof gw?(e.Ic.addReference(r.key,t),Lw(e,r)):r instanceof yw?(Nu("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Ow(e,r.key)):Ru()}function Lw(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Nu("SyncEngine","New document in limbo: "+n),e.mc.add(r),Mw(e))}function Mw(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new sh(nh.fromString(t)),r=e.Ac.next();e.yc.set(r,new bw(n)),e.gc=e.gc.insert(n,r),Cv(e.remoteStore,new Wm(zf(Lf(n.path)),r,"TargetPurposeLimboResolution",Nh.ct))}}async function Fw(e,t,n){const r=Mu(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=My.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Mu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>vh.forEach(t,(t=>vh.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>vh.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Eh(e))throw e;Nu("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function jw(e,t){const n=Mu(e);if(!n.currentUser.isEqual(t)){Nu("SyncEngine","User change. New user:",t.toKey());const e=await Vy(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new ju(Fu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Fw(n,e.er)}}function Uw(e,t){const n=Mu(e),r=n.yc.get(t);if(r&&r.fc)return cp().add(r.key);{let e=cp();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function Vw(e,t){const n=Mu(e),r=await Hy(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&Rw(n,t.targetId,i.cc),i}async function zw(e,t){const n=Mu(e);return Qy(n.localStore,t).then((e=>Fw(n,e)))}async function Bw(e,t,n,r){const i=Mu(e),s=await function(e,t){const n=Mu(e),r=Mu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):vh.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Vv(i.remoteStore):"acknowledged"===n||"rejected"===n?(Dw(i,t,r||null),Nw(i,t),function(e,t){Mu(Mu(e).mutationQueue).Cn(t)}(i.localStore,t)):Ru(),await Fw(i,s)):Nu("SyncEngine","Cannot apply mutation batch with id: "+t)}async function qw(e,t,n){const r=Mu(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await Ky(r.localStore,zf(t[0]));for(const e of t){const t=r.wc.get(e),n=await Vw(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Wy(r.localStore,o);e=await Ky(r.localStore,t),await Ew(r,Kw(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function Kw(e){return Rf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Gw(e){const t=Mu(e);return Mu(Mu(t.localStore).persistence).$i()}async function Hw(e,t,n,r){const i=Mu(e);if(i.vc)return void Nu("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Qy(i.localStore,Qf(s[0])),r=sm.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,bd.EMPTY_BYTE_STRING);await Fw(i,e,r);break}case"rejected":await Gy(i.localStore,t,!0),Pw(i,t,r);break;default:Ru()}}async function Ww(e,t,n){const r=Qw(e);if(r.vc){for(const e of t){if(r._c.has(e)){Nu("SyncEngine","Adding an already active target "+e);continue}const t=await Wy(r.localStore,e),n=await Ky(r.localStore,t);await Ew(r,Kw(t),n.targetId,!1,n.resumeToken),Cv(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await Gy(r.localStore,e,!1).then((()=>{xv(r.remoteStore,e),Pw(r,e)})).catch(yh)}}function Qw(e){const t=Mu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cw.bind(null,t),t.dc.nu=cw.bind(null,t.eventManager),t.dc.Pc=lw.bind(null,t.eventManager),t}function Yw(e){const t=Mu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Aw.bind(null,t),t}class Xw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Uy(this.persistence,new Fy,e.initialUser,this.serializer)}createPersistence(e){return new Sy(xy.zs,this.serializer)}createSharedClientState(e){return new ov}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Jw extends Xw{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Yw(this.Vc.syncEngine),await Vv(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Uy(this.persistence,new Fy,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ny(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ah(t,this.persistence);return new xh(e.asyncQueue,n)}createPersistence(e){const t=Ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zg.withCacheSize(this.cacheSizeBytes):zg.DEFAULT;return new Py(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mv(),gv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ov}}class $w extends Jw{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof sv&&(this.sharedClientState.syncEngine={jr:Bw.bind(null,t),zr:Hw.bind(null,t),Wr:Ww.bind(null,t),$i:Gw.bind(null,t),Qr:zw.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=Mu(e);if(Qw(n),Yw(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await qw(n,e.toArray());n.vc=!0,await Xv(n.remoteStore,!0);for(const r of t)Cv(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Pw(n,i),Gy(n.localStore,i,!0)))),xv(n.remoteStore,i)})),await t,await qw(n,e),function(e){const t=Mu(e);t.yc.forEach(((e,n)=>{xv(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new dd(sh.comparator)}(n),n.vc=!1,await Xv(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=mv();if(!sv.D(t))throw new ju(Fu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Zw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Sw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=jw.bind(null,this.syncEngine),await Xv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new sw}createDatastore(e){const t=yv(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new pv(r));var r;return function(e,t,n,r){return new Iv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Sw(this.syncEngine,e,0),s=cv.D()?new cv:new av,new kv(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new _w(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Mu(e);Nu("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Sv(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function eb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class tb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Du("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class nb{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Uu,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new dw(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class rb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ju(Fu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Mu(e),r=Am(n.serializer)+"/documents",i={documents:t.map((e=>Tm(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Lu(!!t.found),t.found.name,t.found.updateTime;const n=Sm(e,t.found.name),r=Im(t.found.updateTime),i=t.found.createTime?Im(t.found.createTime):eh.min(),s=new Jd({mapValue:{fields:t.found.fields}});return Zd.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Lu(!!t.missing),Lu(!!t.readTime);const n=Sm(e,t.missing),r=Im(t.readTime);return Zd.newNoDocument(n,r)}(e,t):Ru()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Lu(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new zp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=sh.fromPath(t);this.mutations.push(new Bp(n,this.precondition(n)))})),await async function(e,t){const n=Mu(e),r=Am(n.serializer)+"/documents",i={writes:t.map((e=>Om(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ru();t=eh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ju(Fu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(eh.min())?xp.exists(!1):xp.updateTime(t):xp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(eh.min()))throw new ju(Fu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xp.updateTime(t)}return xp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ib{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new vv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new rb(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Dh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yp(t)}return!1}}class sb{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Su.UNAUTHENTICATED,this.clientId=Yu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Nu("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Nu("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ju(Fu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Uu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ew(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ob(e,t){e.asyncQueue.verifyOperationInProgress(),Nu("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Vy(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ab(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lb(e);Nu("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Yv(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Yv(t.remoteStore,n))),e._onlineComponents=t}function cb(e){return"FirebaseError"===e.name?e.code===Fu.FAILED_PRECONDITION||e.code===Fu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function lb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nu("FirestoreClient","Using user provided OfflineComponentProvider");try{await ob(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!cb(n))throw n;Pu("Error using user provided cache. Falling back to memory cache: "+n),await ob(e,new Xw)}}else Nu("FirestoreClient","Using default OfflineComponentProvider"),await ob(e,new Xw);return e._offlineComponents}async function ub(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nu("FirestoreClient","Using user provided OnlineComponentProvider"),await ab(e,e._uninitializedComponentsProvider._online)):(Nu("FirestoreClient","Using default OnlineComponentProvider"),await ab(e,new Zw))),e._onlineComponents}function hb(e){return lb(e).then((e=>e.persistence))}function db(e){return lb(e).then((e=>e.localStore))}function fb(e){return ub(e).then((e=>e.remoteStore))}function pb(e){return ub(e).then((e=>e.syncEngine))}function mb(e){return ub(e).then((e=>e.datastore))}async function gb(e){const t=await ub(e),n=t.eventManager;return n.onListen=Iw.bind(null,t.syncEngine),n.onUnlisten=kw.bind(null,t.syncEngine),n}function yb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Uu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new tb({next:s=>{t.enqueueAndForget((()=>aw(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ju(Fu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ju(Fu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new hw(Lf(n.path),s,{includeMetadataChanges:!0,Ku:!0});return ow(e,o)}(await gb(e),e.asyncQueue,t,n,r))),r.promise}function vb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Uu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new tb({next:n=>{t.enqueueAndForget((()=>aw(e,o))),n.fromCache&&"server"===r.source?i.reject(new ju(Fu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new hw(n,s,{includeMetadataChanges:!0,Ku:!0});return ow(e,o)}(await gb(e),e.asyncQueue,t,n,r))),r.promise}function wb(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Zp().encode(e):e,function(e,t){return new nb(e,t)}(function(e,t){if(e instanceof Uint8Array)return eb(e,t);if(e instanceof ArrayBuffer)return eb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,yv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Mu(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Mu(e),r=Im(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(mw(r));const i=new pw(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await Fw(e,o.Ju,void 0),await function(e,t){const n=Mu(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return Pu("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await pb(e),i,r)}))}function bb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _b=new Map;function Ib(e,t,n){if(!n)throw new ju(Fu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Eb(e,t,n,r){if(!0===t&&!0===r)throw new ju(Fu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function kb(e){if(!sh.isDocumentKey(e))throw new ju(Fu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Tb(e){if(sh.isDocumentKey(e))throw new ju(Fu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ru()}function Cb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ju(Fu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sb(e);throw new ju(Fu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function xb(e,t){if(t<=0)throw new ju(Fu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Ab{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ju(Fu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ju(Fu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Eb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ju(Fu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ju(Fu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ju(Fu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Nb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ab({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ju(Fu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ju(Fu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ab(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zu;switch(e.type){case"firstParty":return new Gu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ju(Fu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_b.get(e);t&&(Nu("ComponentProvider","Removing Datastore"),_b.delete(e),t.terminate())}(this),Promise.resolve()}}function Db(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Cb(e,Nb))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Su.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ju(Fu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Su(s)}e._authCredentials=new Bu(new Vu(t,n))}}class Pb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pb(this.firestore,e,this._key)}}class Ob{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ob(this.firestore,e,this._query)}}class Rb extends Ob{constructor(e,t,n){super(e,t,Lf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pb(this.firestore,null,new sh(e))}withConverter(e){return new Rb(this.firestore,e,this._path)}}function Lb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=P(e),Ib("collection","path",t),e instanceof Nb){const n=nh.fromString(t,...r);return Tb(n),new Rb(e,null,n)}{if(!(e instanceof Pb||e instanceof Rb))throw new ju(Fu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(nh.fromString(t,...r));return Tb(n),new Rb(e.firestore,null,n)}}function Mb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=P(e),1===arguments.length&&(t=Yu.A()),Ib("doc","path",t),e instanceof Nb){const n=nh.fromString(t,...r);return kb(n),new Pb(e,null,new sh(n))}{if(!(e instanceof Pb||e instanceof Rb))throw new ju(Fu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(nh.fromString(t,...r));return kb(n),new Pb(e.firestore,e instanceof Rb?e.converter:null,new sh(n))}}function Fb(e,t){return e=P(e),t=P(t),(e instanceof Pb||e instanceof Rb)&&(t instanceof Pb||t instanceof Rb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jb(e,t){return e=P(e),t=P(t),e instanceof Ob&&t instanceof Ob&&e.firestore===t.firestore&&Kf(e._query,t._query)&&e.converter===t.converter}class Ub{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new vv(this,"async_queue_retry"),this.Xc=()=>{const e=gv();e&&Nu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=gv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=gv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Uu;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Eh(e))throw e;Nu("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Du("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Zv.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Ru()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Vb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class zb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Uu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bb extends Nb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ub,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kb(this),this._firestoreClient.terminate()}}function qb(e){return e._firestoreClient||Kb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Kb(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new xd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,bb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new sb(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Gb(e,t,n){const r=new Uu;return e.asyncQueue.enqueue((async()=>{try{await ob(e,n),await ab(e,t),r.resolve()}catch(e){const n=e;if(!cb(n))throw n;Pu("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Hb(e){return function(e){const t=new Uu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Mu(e);Ov(n.remoteStore)||Nu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Mu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=ew(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await pb(e),t))),t.promise}(qb(e=Cb(e,Bb)))}function Wb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hb(e),n=await fb(e);return t.setNetworkEnabled(!0),function(e){const t=Mu(e);return t.vu.delete(0),Tv(t)}(n)}))}(qb(e=Cb(e,Bb)))}function Qb(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hb(e),n=await fb(e);return t.setNetworkEnabled(!1),async function(e){const t=Mu(e);t.vu.add(0),await Sv(t),t.bu.set("Offline")}(n)}))}(qb(e=Cb(e,Bb)))}function Yb(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Mu(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await db(e),t)))}(qb(e=Cb(e,Bb)),t).then((t=>t?new Ob(e,null,t.query):null))}function Xb(e){if(e._initialized||e._terminated)throw new ju(Fu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jb(bd.fromBase64String(e))}catch(e){throw new ju(Fu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Jb(bd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $b{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ju(Fu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ih(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zb{constructor(e){this._methodName=e}}class e_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ju(Fu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ju(Fu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xu(this._lat,e._lat)||Xu(this._long,e._long)}}const t_=/^__.*__$/;class n_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mp(e,this.data,t,this.fieldTransforms)}}class r_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ru()}}class s_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new s_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return T_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(i_(this.ca)&&t_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class o_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yv(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new s_({ca:e,methodName:t,ga:n,path:ih.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a_(e){const t=e._freezeSettings(),n=yv(e._databaseId);return new o_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function c_(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);__("Data must be an object, but it was:",o,r);const a=w_(r,o);let c,l;if(s.merge)c=new vd(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=I_(t,r,n);if(!o.contains(i))throw new ju(Fu.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));S_(e,i)||e.push(i)}c=new vd(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new n_(new Jd(a),c,l)}class l_ extends Zb{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l_}}function u_(e,t,n){return new s_({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class h_ extends Zb{_toFieldTransform(e){return new Sp(e.path,new vp)}isEqual(e){return e instanceof h_}}class d_ extends Zb{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=u_(this,e,!0),n=this.pa.map((e=>v_(e,t))),r=new wp(n);return new Sp(e.path,r)}isEqual(e){return this===e}}class f_ extends Zb{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=u_(this,e,!0),n=this.pa.map((e=>v_(e,t))),r=new _p(n);return new Sp(e.path,r)}isEqual(e){return this===e}}class p_ extends Zb{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ep(e.serializer,fp(e.serializer,this.Ia));return new Sp(e.path,t)}isEqual(e){return this===e}}function m_(e,t,n,r){const i=e.ya(1,t,n);__("Data must be an object, but it was:",i,r);const s=[],o=Jd.empty();ud(r,((e,r)=>{const a=k_(t,e,n);r=P(r);const c=i.da(a);if(r instanceof l_)s.push(a);else{const e=v_(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new vd(s);return new r_(o,a,i.fieldTransforms)}function g_(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[I_(t,r,n)],c=[i];if(s.length%2!=0)throw new ju(Fu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(I_(t,s[d])),c.push(s[d+1]);const l=[],u=Jd.empty();for(let d=a.length-1;d>=0;--d)if(!S_(l,a[d])){const e=a[d];let t=c[d];t=P(t);const n=o.da(e);if(t instanceof l_)l.push(e);else{const r=v_(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new vd(l);return new r_(u,h,o.fieldTransforms)}function y_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return v_(n,e.ya(r?4:3,t))}function v_(e,t){if(b_(e=P(e)))return __("Unsupported field value:",t,e),w_(e,t);if(e instanceof Zb)return function(e,t){if(!i_(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=v_(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=P(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zu.fromDate(e);return{timestampValue:wm(t.serializer,n)}}if(e instanceof Zu){const n=new Zu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wm(t.serializer,n)}}if(e instanceof e_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jb)return{bytesValue:bm(t.serializer,e._byteString)};if(e instanceof Pb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Em(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Sb(e)))}(e,t)}function w_(e,t){const n={};return hd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ud(e,((e,r)=>{const i=v_(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function b_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zu||e instanceof e_||e instanceof Jb||e instanceof Pb||e instanceof Zb)}function __(e,t,n){if(!b_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Sb(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function I_(e,t,n){if((t=P(t))instanceof $b)return t._internalPath;if("string"==typeof t)return k_(e,t);throw T_("Field path arguments must be of type string or ",e,!1,void 0,n)}const E_=new RegExp("[~\\*/\\[\\]]");function k_(e,t,n){if(t.search(E_)>=0)throw T_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new $b(...t.split("."))._internalPath}catch(r){throw T_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function T_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new ju(Fu.INVALID_ARGUMENT,a+e+c)}function S_(e,t){return e.some((e=>e.isEqual(t)))}class C_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new x_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(A_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class x_ extends C_{data(){return super.data()}}function A_(e,t){return"string"==typeof t?k_(e,t):t instanceof $b?t._internalPath:t._delegate._internalPath}function N_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ju(Fu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D_{}class P_ extends D_{}function O_(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof D_&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof L_)).length,n=e.filter((e=>e instanceof R_)).length;if(t>1||t>0&&n>0)throw new ju(Fu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class R_ extends P_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new R_(e,t,n)}_apply(e){const t=this._parse(e);return q_(e._query,t),new Ob(e.firestore,e.converter,Bf(e._query,t))}_parse(e){const t=a_(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ju(Fu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){B_(o,s);const t=[];for(const n of o)t.push(z_(r,e,n));a={arrayValue:{values:t}}}else a=z_(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||B_(o,s),a=y_(n,"where",o,"in"===s||"not-in"===s);return af.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class L_ extends D_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L_(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:cf.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)q_(n,i),n=Bf(n,i)}(e._query,t),new Ob(e.firestore,e.converter,Bf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class M_ extends P_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new M_(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new rf(t,n);return function(e,t){if(null===Ff(e)){const n=jf(e);null!==n&&K_(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ob(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Of(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class F_ extends P_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new F_(e,t,n)}_apply(e){return new Ob(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}class j_ extends P_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new j_(e,t,n)}_apply(e){const t=V_(e,this.type,this._docOrFields,this._inclusive);return new Ob(e.firestore,e.converter,function(e,t){return new Of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class U_ extends P_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new U_(e,t,n)}_apply(e){const t=V_(e,this.type,this._docOrFields,this._inclusive);return new Ob(e.firestore,e.converter,function(e,t){return new Of(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function V_(e,t,n,r){if(n[0]=P(n[0]),n[0]instanceof C_)return function(e,t,n,r,i){if(!r)throw new ju(Fu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Vf(e))if(o.field.isKeyField())s.push(Ud(t,r.key));else{const e=r.data.field(o.field);if(Td(e))throw new ju(Fu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new ef(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=a_(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ju(Fu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Uf(e)&&-1!==s.indexOf("/"))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(nh.fromString(s));if(!sh.isDocumentKey(n))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new sh(n);a.push(Ud(t,i))}else{const e=y_(n,r,s);a.push(e)}}return new ef(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function z_(e,t,n){if("string"==typeof(n=P(n))){if(""===n)throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uf(t)&&-1!==n.indexOf("/"))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(nh.fromString(n));if(!sh.isDocumentKey(r))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ud(e,new sh(r))}if(n instanceof Pb)return Ud(e,n._key);throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Sb(n),"."))}function B_(e,t){if(!Array.isArray(e)||0===e.length)throw new ju(Fu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function q_(e,t){if(t.isInequality()){const n=jf(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Ff(e);null!==i&&K_(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ju(Fu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ju(Fu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function K_(e,t,n){if(!n.isEqual(t))throw new ju(Fu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class G_{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ed(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ru()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ud(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new e_(Ed(e.latitude),Ed(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const t=Id(e);return new Zu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=nh.fromString(e);Lu(Hm(n));const r=new Ad(n.get(1),n.get(3)),i=new sh(n.popFirst(5));return r.isEqual(t)||Du("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function H_(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class W_ extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pb(this.firestore,null,t)}}class Q_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y_ extends C_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new X_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(A_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class X_ extends Y_{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class J_{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Q_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new X_(this._firestore,this._userDataWriter,n.key,n,new Q_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ju(Fu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new X_(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Q_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new X_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Q_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:$_(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function $_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ru()}}function Z_(e,t){return e instanceof Y_&&t instanceof Y_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof J_&&t instanceof J_&&e._firestore===t._firestore&&jb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class eI extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pb(this.firestore,null,t)}}function tI(e){e=Cb(e,Pb);const t=Cb(e.firestore,Bb),n=qb(t),r=new eI(t);return function(e,t){const n=new Uu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Mu(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ju(Fu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ew(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await db(e),t,n))),n.promise}(n,e._key).then((n=>new Y_(t,r,e._key,n,new Q_(null!==n&&n.hasLocalMutations,!0),e.converter)))}function nI(e){e=Cb(e,Ob);const t=Cb(e.firestore,Bb),n=qb(t),r=new eI(t);return function(e,t){const n=new Uu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Hy(e,t,!0),i=new vw(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ew(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await db(e),t,n))),n.promise}(n,e._query).then((n=>new J_(t,r,e,n)))}function rI(e,t,n){e=Cb(e,Pb);const r=Cb(e.firestore,Bb),i=H_(e.converter,t,n);return aI(r,[c_(a_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xp.none())])}function iI(e,t,n){e=Cb(e,Pb);const r=Cb(e.firestore,Bb),i=a_(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=P(t))||t instanceof $b?g_(i,"updateDoc",e._key,t,n,a):m_(i,"updateDoc",e._key,t),aI(r,[s.toMutation(e._key,xp.exists(!0))])}function sI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=P(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Vb(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(Vb(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Pb)h=Cb(e.firestore,Bb),d=Lf(e._key.path),u={next:t=>{n[c]&&n[c](cI(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Cb(e,Ob);h=Cb(t.firestore,Bb),d=t._query;const r=new eI(h);u={next:e=>{n[c]&&n[c](new J_(h,r,t,e))},error:n[c+1],complete:n[c+2]},N_(e._query)}return function(e,t,n,r){const i=new tb(r),s=new hw(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ow(await gb(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>aw(await gb(e),s)))}}(qb(h),d,l,u)}function oI(e,t){return function(e,t){const n=new tb(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Mu(e).ku.add(t),t.next()}(await gb(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Mu(e).ku.delete(t)}(await gb(e),n)))}}(qb(e=Cb(e,Bb)),Vb(t)?t:{next:t})}function aI(e,t){return function(e,t){const n=new Uu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Yw(e);try{const e=await function(e,t){const n=Mu(e),r=Zu.now(),i=t.reduce(((e,t)=>e.add(t.key)),cp());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zf(),c=cp();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Rp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Fp(e.key,t,$d(t.value.mapValue),xp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:np(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new dd(Xu)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Fw(r,e.changes),await Vv(r.remoteStore)}catch(e){const t=ew(e,"Failed to persist write");n.reject(t)}}(await pb(e),t,n))),n.promise}(qb(e),t)}function cI(e,t,n){const r=n.docs.get(t._key),i=new eI(e);return new Y_(e,i,t._key,r,new Q_(n.hasPendingWrites,n.fromCache),t.converter)}const lI={maxAttempts:5};class uI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=a_(e)}set(e,t,n){this._verifyNotCommitted();const r=hI(e,this._firestore),i=H_(r.converter,t,n),s=c_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,xp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=hI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=P(t))||t instanceof $b?g_(this._dataReader,"WriteBatch.update",r._key,t,n,o):m_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,xp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hI(e,this._firestore);return this._mutations=this._mutations.concat(new zp(t._key,xp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ju(Fu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hI(e,t){if((e=P(e)).firestore!==t)throw new ju(Fu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class dI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=a_(e)}get(e){const t=hI(e,this._firestore),n=new W_(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ru();const r=e[0];if(r.isFoundDocument())return new C_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new C_(this._firestore,n,t._key,null,t.converter);throw Ru()}))}set(e,t,n){const r=hI(e,this._firestore),i=H_(r.converter,t,n),s=c_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=hI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=P(t))||t instanceof $b?g_(this._dataReader,"Transaction.update",r._key,t,n,o):m_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=hI(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hI(e,this._firestore),n=new eI(this._firestore);return super.get(e).then((e=>new Y_(this._firestore,n,t._key,e._document,new Q_(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cu=e}(Ee),ye(new O("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Bb(new qu(e.getProvider("auth-internal")),new Wu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ju(Fu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ad(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),xe(Tu,"3.13.0",e),xe(Tu,"3.13.0","esm2017")}();function fI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ju("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function pI(){if("undefined"===typeof Uint8Array)throw new ju("unimplemented","Uint8Arrays are not available in this environment.")}function mI(){if("undefined"==typeof atob)throw new ju("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gI{constructor(e){this._delegate=e}static fromBase64String(e){return mI(),new gI(Jb.fromBase64String(e))}static fromUint8Array(e){return pI(),new gI(Jb.fromUint8Array(e))}toBase64(){return mI(),this._delegate.toBase64()}toUint8Array(){return pI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class vI{enableIndexedDbPersistence(e,t){return function(e,t){Xb(e=Cb(e,Bb));const n=qb(e);if(n._uninitializedComponentsProvider)throw new ju(Fu.FAILED_PRECONDITION,"SDK cache is already specified.");Pu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Zw;return Gb(n,i,new Jw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Xb(e=Cb(e,Bb));const t=qb(e);if(t._uninitializedComponentsProvider)throw new ju(Fu.FAILED_PRECONDITION,"SDK cache is already specified.");Pu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Zw;return Gb(t,r,new $w(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ju(Fu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Uu;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!bh.D())return Promise.resolve();const t=e+"main";await bh.delete(t)}(Ly(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class wI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ad||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Pu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Db(this._delegate,e,t,n)}enableNetwork(){return Wb(this._delegate)}disableNetwork(){return Qb(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Eb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Hb(this._delegate)}onSnapshotsInSync(e){return oI(this._delegate,e)}get app(){if(!this._appCompat)throw new ju("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new OI(this,Lb(this._delegate,e))}catch(t){throw TI(t,"collection()","Firestore.collection()")}}doc(e){try{return new kI(this,Mb(this._delegate,e))}catch(t){throw TI(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new NI(this,function(e,t){if(e=Cb(e,Nb),Ib("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ju(Fu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ob(e,null,function(e){return new Of(nh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw TI(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Cb(e,Bb);const r=Object.assign(Object.assign({},lI),n);return function(e){if(e.maxAttempts<1)throw new ju(Fu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Uu;return e.asyncQueue.enqueueAndForget((async()=>{const i=await mb(e);new ib(e.asyncQueue,i,n,t,r).run()})),r.promise}(qb(e),(n=>t(new dI(e,n))),r)}(this._delegate,(t=>e(new _I(this,t))))}batch(){return qb(this._delegate),new II(new uI(this._delegate,(e=>aI(this._delegate,e))))}loadBundle(e){return function(e,t){const n=qb(e=Cb(e,Bb)),r=new zb;return wb(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Yb(this._delegate,e).then((e=>e?new NI(this,e):null))}}class bI extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new gI(new Jb(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return kI.forKey(t,this.firestore,null)}}class _I{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}get(e){const t=RI(e);return this._delegate.get(t).then((e=>new xI(this._firestore,new Y_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=RI(e);return n?(fI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=RI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=RI(e);return this._delegate.delete(t),this}}class II{constructor(e){this._delegate=e}set(e,t,n){const r=RI(e);return n?(fI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=RI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=RI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class EI{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new X_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AI(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=EI.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new EI(e,new bI(e),t),r.set(t,i)),i}}EI.INSTANCES=new WeakMap;class kI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ju("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new kI(t,new Pb(t._delegate,n,new sh(e)))}static forKey(e,t,n){return new kI(t,new Pb(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new OI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new OI(this.firestore,Lb(this._delegate,e))}catch(t){throw TI(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=P(e))instanceof Pb&&Fb(this._delegate,e)}set(e,t){t=fI("DocumentReference.set",t);try{return t?rI(this._delegate,e,t):rI(this._delegate,e)}catch(n){throw TI(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?iI(this._delegate,e):iI(this._delegate,e,t,...r)}catch(s){throw TI(s,"updateDoc()","DocumentReference.update()")}}delete(){return aI(Cb((e=this._delegate).firestore,Bb),[new zp(e._key,xp.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=SI(t),i=CI(t,(e=>new xI(this.firestore,new Y_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return sI(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?tI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Cb(e,Pb);const t=Cb(e.firestore,Bb);return yb(qb(t),e._key,{source:"server"}).then((n=>cI(t,e,n)))}(this._delegate):function(e){e=Cb(e,Pb);const t=Cb(e.firestore,Bb);return yb(qb(t),e._key).then((n=>cI(t,e,n)))}(this._delegate),t.then((e=>new xI(this.firestore,new Y_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new kI(this.firestore,e?this._delegate.withConverter(EI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function TI(e,t,n){return e.message=e.message.replace(t,n),e}function SI(e){for(const t of e)if("object"===typeof t&&!yI(t))return t;return{}}function CI(e,t){var n,r;let i;return i=yI(e[0])?e[0]:yI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new kI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Z_(this._delegate,e._delegate)}}class AI extends xI{data(e){const t=this._delegate.data(e);return void 0!==t||Ru(),t}}class NI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}where(e,t,n){try{return new NI(this.firestore,O_(this._delegate,function(e,t,n){const r=t,i=A_("where",e);return R_._create(i,r,n)}(e,t,n)))}catch(r){throw TI(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new NI(this.firestore,O_(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=A_("orderBy",e);return M_._create(n,t)}(e,t)))}catch(n){throw TI(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new NI(this.firestore,O_(this._delegate,(xb("limit",t=e),F_._create("limit",t,"F"))))}catch(n){throw TI(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new NI(this.firestore,O_(this._delegate,(xb("limitToLast",t=e),F_._create("limitToLast",t,"L"))))}catch(n){throw TI(n,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new NI(this.firestore,O_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j_._create("startAt",t,!0)}(...arguments)))}catch(e){throw TI(e,"startAt()","Query.startAt()")}}startAfter(){try{return new NI(this.firestore,O_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j_._create("startAfter",t,!1)}(...arguments)))}catch(e){throw TI(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new NI(this.firestore,O_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return U_._create("endBefore",t,!1)}(...arguments)))}catch(e){throw TI(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new NI(this.firestore,O_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return U_._create("endAt",t,!0)}(...arguments)))}catch(e){throw TI(e,"endAt()","Query.endAt()")}}isEqual(e){return jb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?nI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Cb(e,Ob);const t=Cb(e.firestore,Bb),n=qb(t),r=new eI(t);return vb(n,e._query,{source:"server"}).then((n=>new J_(t,r,e,n)))}(this._delegate):function(e){e=Cb(e,Ob);const t=Cb(e.firestore,Bb),n=qb(t),r=new eI(t);return N_(e._query),vb(n,e._query).then((n=>new J_(t,r,e,n)))}(this._delegate),t.then((e=>new PI(this.firestore,new J_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=SI(t),i=CI(t,(e=>new PI(this.firestore,new J_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return sI(this._delegate,r,i)}withConverter(e){return new NI(this.firestore,e?this._delegate.withConverter(EI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class DI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new NI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new AI(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new DI(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new AI(this._firestore,n))}))}isEqual(e){return Z_(this._delegate,e._delegate)}}class OI extends NI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new kI(this.firestore,e):null}doc(e){try{return new kI(this.firestore,void 0===e?Mb(this._delegate):Mb(this._delegate,e))}catch(t){throw TI(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Cb(e.firestore,Bb),r=Mb(e),i=H_(e.converter,t);return aI(n,[c_(a_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xp.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new kI(this.firestore,e)))}isEqual(e){return Fb(this._delegate,e._delegate)}withConverter(e){return new OI(this.firestore,e?this._delegate.withConverter(EI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function RI(e){return Cb(e,Pb)}class LI{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new $b(...t)}static documentId(){return new LI(ih.keyField().canonicalString())}isEqual(e){return(e=P(e))instanceof $b&&this._delegate._internalPath.isEqual(e._internalPath)}}class MI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new h_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new MI(e)}static delete(){const e=new l_("deleteField");return e._methodName="FieldValue.delete",new MI(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new d_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new MI(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new f_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new MI(e)}static increment(e){const t=new p_("increment",e);return t._methodName="FieldValue.increment",new MI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const FI={Firestore:wI,GeoPoint:e_,Timestamp:Zu,Blob:gI,Transaction:_I,WriteBatch:II,DocumentReference:kI,DocumentSnapshot:xI,Query:NI,QueryDocumentSnapshot:AI,QuerySnapshot:PI,CollectionReference:OI,FieldPath:LI,FieldValue:MI,setLogLevel:function(e){var t;t=e,xu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new O("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},FI)))}(e,((e,t)=>new wI(e,t,new vI))),e.registerVersion("@firebase/firestore-compat","0.3.12")}(ps);var jI=function(){return jI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jI.apply(this,arguments)},UI=function(e){return{loading:void 0===e||null===e,value:e}},VI=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return jI(jI({},e),{error:t.error,loading:!1,value:void 0});case"reset":return UI(t.defaultValue);case"value":return jI(jI({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),UI(n)),i=r[0],s=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,t.useCallback)((function(e){s({type:"error",error:e})}),[]),c=(0,t.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:c,value:i.value}}),[i.error,i.loading,o,a,c,i.value])},zI=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},BI=function(e,t){var n=!e&&!t,r=!!e&&!!t&&jb(e,t);return n||r},qI=function(e,t){return zI(e,BI,t)},KI=function(e,n){var r=VI(),i=r.error,s=r.loading,o=r.reset,a=r.setError,c=r.setValue,l=r.value,u=qI(e,o);return(0,t.useEffect)((function(){if(u.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?sI(u.current,n.snapshotListenOptions,c,a):sI(u.current,c,a);return function(){e()}}c(void 0)}),[u.current]),[l,s,i]};function GI(e){return GI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GI(e)}function HI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){WI(e,t,n[t])}))}return e}function YI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var XI=function(){},JI={},$I={},ZI={mark:XI,measure:XI};try{"undefined"!==typeof window&&(JI=window),"undefined"!==typeof document&&($I=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(ZI=performance)}catch(vT){}var eE=(JI.navigator||{}).userAgent,tE=void 0===eE?"":eE,nE=JI,rE=$I,iE=ZI,sE=(nE.document,!!rE.documentElement&&!!rE.head&&"function"===typeof rE.addEventListener&&"function"===typeof rE.createElement),oE=(~tE.indexOf("MSIE")||tE.indexOf("Trident/"),"___FONT_AWESOME___"),aE="fa",cE="svg-inline--fa",lE="data-fa-i2svg",uE=(function(){try{return!0}catch(vT){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),hE=uE.concat([11,12,13,14,15,16,17,18,19,20]),dE={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},fE=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",dE.GROUP,dE.SWAP_OPACITY,dE.PRIMARY,dE.SECONDARY].concat(uE.map((function(e){return"".concat(e,"x")}))).concat(hE.map((function(e){return"w-".concat(e)}))),nE.FontAwesomeConfig||{});if(rE&&"function"===typeof rE.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=YI(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=rE.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(fE[r]=i)}))}var pE=QI({},{familyPrefix:aE,replacementClass:cE,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},fE);pE.autoReplaceSvg||(pE.observeMutations=!1);var mE=QI({},pE);nE.FontAwesomeConfig=mE;var gE=nE||{};gE[oE]||(gE[oE]={}),gE[oE].styles||(gE[oE].styles={}),gE[oE].hooks||(gE[oE].hooks={}),gE[oE].shims||(gE[oE].shims=[]);var yE=gE[oE],vE=[];sE&&((rE.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(rE.readyState)||rE.addEventListener("DOMContentLoaded",(function e(){rE.removeEventListener("DOMContentLoaded",e),1,vE.map((function(e){return e()}))})));var wE,bE="pending",_E="settled",IE="fulfilled",EE="rejected",kE=function(){},TE="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,SE="undefined"===typeof setImmediate?setTimeout:setImmediate,CE=[];function xE(){for(var e=0;e<CE.length;e++)CE[e][0](CE[e][1]);CE=[],wE=!1}function AE(e,t){CE.push([e,t]),wE||(wE=!0,SE(xE,0))}function NE(e){var t=e.owner,n=t._state,r=t._data,i=e[n],s=e.then;if("function"===typeof i){n=IE;try{r=i(r)}catch(vT){RE(s,vT)}}DE(s,r)||(n===IE&&PE(s,r),n===EE&&RE(s,r))}function DE(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===GI(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?OE(e,r):PE(e,r))}),(function(t){n||(n=!0,RE(e,t))})),!0}}catch(vT){return n||RE(e,vT),!0}return!1}function PE(e,t){e!==t&&DE(e,t)||OE(e,t)}function OE(e,t){e._state===bE&&(e._state=_E,e._data=t,AE(ME,e))}function RE(e,t){e._state===bE&&(e._state=_E,e._data=t,AE(FE,e))}function LE(e){e._then=e._then.forEach(NE)}function ME(e){e._state=IE,LE(e)}function FE(e){e._state=EE,LE(e),!e._handled&&TE&&n.g.process.emit("unhandledRejection",e._data,e)}function jE(e){n.g.process.emit("rejectionHandled",e)}function UE(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof UE===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){RE(t,e)}try{e((function(e){PE(t,e)}),n)}catch(vT){n(vT)}}(e,this)}UE.prototype={constructor:UE,_state:bE,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(kE),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===EE&&TE&&AE(jE,this)),this._state===IE||this._state===EE?AE(NE,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},UE.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new UE((function(t,n){var r=[],i=0;function s(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,a=0;a<e.length;a++)(o=e[a])&&"function"===typeof o.then?o.then(s(a),n):r[a]=o;i||t(r)}))},UE.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new UE((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},UE.resolve=function(e){return e&&"object"===GI(e)&&e.constructor===UE?e:new UE((function(t){t(e)}))},UE.reject=function(e){return new UE((function(t,n){n(e)}))};var VE={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function zE(e){if(e&&sE){var t=rE.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=rE.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return rE.head.insertBefore(t,r),e}}var BE="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function qE(){for(var e=12,t="";e-- >0;)t+=BE[62*Math.random()|0];return t}function KE(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function GE(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function HE(e){return e.size!==VE.size||e.x!==VE.x||e.y!==VE.y||e.rotate!==VE.rotate||e.flipX||e.flipY}function WE(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var QE={x:0,y:0,width:"100%",height:"100%"};function YE(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function XE(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,c=e.title,l=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,f=void 0!==d&&d,p=r.found?r:n,m=p.width,g=p.height,y="fak"===i,v=y?"":"fa-w-".concat(Math.ceil(m/g*16)),w=[mE.replacementClass,s?"".concat(mE.familyPrefix,"-").concat(s):"",v].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),b={children:[],attributes:QI({},h.attributes,{"data-prefix":i,"data-icon":s,class:w,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},_=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(b.attributes[lE]=""),c&&b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||qE())},children:[c]});var I=QI({},b,{prefix:i,iconName:s,main:n,mask:r,maskId:l,transform:o,symbol:a,styles:QI({},_,h.styles)}),E=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,c=i.width,l=i.icon,u=s.width,h=s.icon,d=WE({transform:a,containerWidth:u,iconWidth:c}),f={tag:"rect",attributes:QI({},QE,{fill:"white"})},p=l.children?{children:l.children.map(YE)}:{},m={tag:"g",attributes:QI({},d.inner),children:[YE(QI({tag:l.tag,attributes:QI({},l.attributes,d.path)},p))]},g={tag:"g",attributes:QI({},d.outer),children:[m]},y="mask-".concat(o||qE()),v="clip-".concat(o||qE()),w={tag:"mask",attributes:QI({},QE,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(t=h,"g"===t.tag?t.children:[t])},w]};return n.push(b,{tag:"rect",attributes:QI({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},QE)}),{children:n,attributes:r}}(I):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,s=GE(e.styles);if(s.length>0&&(n.style=s),HE(i)){var o=WE({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:QI({},o.outer),children:[{tag:"g",attributes:QI({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:QI({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(I),k=E.children,T=E.attributes;return I.children=k,I.attributes=T,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:QI({},i,{id:!0===s?"".concat(t,"-").concat(mE.familyPrefix,"-").concat(n):s}),children:r}]}]}(I):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(HE(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=GE(QI({},s,{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(I)}var JE=function(){},$E=(mE.measurePerformance&&iE&&iE.mark&&iE.measure,function(e,t,n,r){var i,s,o,a=Object.keys(e),c=a.length,l=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<c;i++)o=l(o,e[s=a[i]],s,e);return o});function ZE(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof yE.hooks.addPack||r?yE.styles[e]=QI({},yE.styles[e]||{},i):yE.hooks.addPack(e,i),"fas"===e&&ZE("fa",t)}var ek=yE.styles,tk=yE.shims,nk=function(){var e=function(e){return $E(ek,(function(t,n,r){return t[r]=$E(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in ek;$E(tk,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:s},e}),{})};nk();yE.styles;function rk(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function ik(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?KE(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(KE(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(ik).join(""),"</").concat(t,">")}var sk=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function ok(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}ok.prototype=Object.create(Error.prototype),ok.prototype.constructor=ok;var ak={fill:"currentColor"},ck={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},lk={tag:"path",attributes:QI({},ak,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},uk=QI({},ck,{attributeName:"opacity"});QI({},ak,{cx:"256",cy:"364",r:"28"}),QI({},ck,{attributeName:"r",values:"28;14;28;28;14;28;"}),QI({},uk,{values:"1;0;1;1;0;1;"}),QI({},ak,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),QI({},uk,{values:"1;0;0;0;0;1;"}),QI({},ak,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),QI({},uk,{values:"0;0;1;1;0;0;"}),yE.styles;function hk(e){var t=e[0],n=e[1],r=YI(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(mE.familyPrefix,"-").concat(dE.GROUP)},children:[{tag:"path",attributes:{class:"".concat(mE.familyPrefix,"-").concat(dE.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(mE.familyPrefix,"-").concat(dE.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}yE.styles;var dk='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function fk(){var e=aE,t=cE,n=mE.familyPrefix,r=mE.replacementClass,i=dk;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var pk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=QI({},e.definitions[t]||{},i[t]),ZE(t,i[t]),nk()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][s]=o})),e}}],n&&HI(t.prototype,n),r&&HI(t,r),e}();function mk(){mE.autoAddCss&&!bk&&(zE(fk()),bk=!0)}function gk(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ik(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(sE){var t=rE.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function yk(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return rk(wk.definitions,n,r)||rk(yE.styles,n,r)}var vk,wk=new pk,bk=!1,_k={transform:function(e){return sk(e)}},Ik=(vk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?VE:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,c=t.maskId,l=void 0===c?null:c,u=t.title,h=void 0===u?null:u,d=t.titleId,f=void 0===d?null:d,p=t.classes,m=void 0===p?[]:p,g=t.attributes,y=void 0===g?{}:g,v=t.styles,w=void 0===v?{}:v;if(e){var b=e.prefix,_=e.iconName,I=e.icon;return gk(QI({type:"icon"},e),(function(){return mk(),mE.autoA11y&&(h?y["aria-labelledby"]="".concat(mE.replacementClass,"-title-").concat(f||qE()):(y["aria-hidden"]="true",y.focusable="false")),XE({icons:{main:hk(I),mask:a?hk(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:_,transform:QI({},VE,r),symbol:s,title:h,maskId:l,titleId:f,extra:{attributes:y,styles:w,classes:m}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:yk(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:yk(r||{})),vk(n,QI({},t,{mask:r}))}),Ek=n(7),kk=n.n(Ek);function Tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tk(Object(n),!0).forEach((function(t){xk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ck(e){return Ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ck(e)}function xk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ak(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nk(e){return function(e){if(Array.isArray(e))return Dk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pk(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Ok=["style"];var Rk=!1;try{Rk=!0}catch(vT){}function Lk(e){return e&&"object"===Ck(e)&&e.prefix&&e.iconName&&e.icon?e:_k.icon?_k.icon(e):null===e?null:e&&"object"===Ck(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Mk(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?xk({},e,t):{}}var Fk=["forwardedRef"];function jk(e){var t=e.forwardedRef,n=Ak(e,Fk),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,c=n.titleId,l=n.maskId,u=Lk(r),h=Mk("classes",[].concat(Nk(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,s=e.bounce,o=e.shake,a=e.flash,c=e.spin,l=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,y=e.size,v=e.rotation,w=e.pull,b=(xk(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":c,"fa-spin-reverse":u,"fa-spin-pulse":l,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(y),"undefined"!==typeof y&&null!==y),xk(t,"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),xk(t,"fa-pull-".concat(w),"undefined"!==typeof w&&null!==w),xk(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(n)),Nk(o.split(" ")))),d=Mk("transform","string"===typeof n.transform?_k.transform(n.transform):n.transform),f=Mk("mask",Lk(i)),p=Ik(u,Sk(Sk(Sk(Sk({},h),d),f),{},{symbol:s,title:a,titleId:c,maskId:l}));if(!p)return function(){var e;!Rk&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=p.abstract,g={ref:t};return Object.keys(n).forEach((function(e){jk.defaultProps.hasOwnProperty(e)||(g[e]=n[e])})),Uk(m[0],g)}jk.displayName="FontAwesomeIcon",jk.propTypes={beat:kk().bool,border:kk().bool,beatFade:kk().bool,bounce:kk().bool,className:kk().string,fade:kk().bool,flash:kk().bool,mask:kk().oneOfType([kk().object,kk().array,kk().string]),maskId:kk().string,fixedWidth:kk().bool,inverse:kk().bool,flip:kk().oneOf([!0,!1,"horizontal","vertical","both"]),icon:kk().oneOfType([kk().object,kk().array,kk().string]),listItem:kk().bool,pull:kk().oneOf(["right","left"]),pulse:kk().bool,rotation:kk().oneOf([0,90,180,270]),shake:kk().bool,size:kk().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:kk().bool,spinPulse:kk().bool,spinReverse:kk().bool,symbol:kk().oneOfType([kk().bool,kk().string]),title:kk().string,titleId:kk().string,transform:kk().oneOfType([kk().string,kk().object]),swapOpacity:kk().bool},jk.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Uk=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Pk(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Pk(t)]=r}return e}),{attrs:{}}),o=r.style,a=void 0===o?{}:o,c=Ak(r,Ok);return s.attrs.style=Sk(Sk({},s.attrs.style),a),t.apply(void 0,[n.tag,Sk(Sk({},s.attrs),c)].concat(Nk(i)))}.bind(null,t.createElement),Vk={prefix:"fas",iconName:"door-open",icon:[640,512,[],"f52b","M624 448h-80V113.45C544 86.19 522.47 64 496 64H384v64h96v384h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM312.24 1.01l-192 49.74C105.99 54.44 96 67.7 96 82.92V448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h336V33.18c0-21.58-19.56-37.41-39.76-32.17zM264 288c-13.25 0-24-14.33-24-32s10.75-32 24-32 24 14.33 24 32-10.75 32-24 32z"]},zk={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},Bk={prefix:"fas",iconName:"list-ul",icon:[512,512,[],"f0ca","M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"]},qk={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},Kk={prefix:"fas",iconName:"save",icon:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"]},Gk={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},Hk={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]},Wk={prefix:"fas",iconName:"user-cog",icon:[640,512,[],"f4fe","M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"]},Qk={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]},Yk=n(184);const Xk=function(e){return(0,Yk.jsxs)("div",{id:"topTab",children:[(0,Yk.jsx)("div",{className:"topTabThird first",children:(0,Yk.jsxs)("select",{id:"sortParameterSelector",value:e.sortParameter,disabled:e.dataLength<=1,onChange:t=>e.setSortParameter(t.target.value),children:[(0,Yk.jsx)("option",{"aria-label":"Increasing by taskname",value:"taskName asc",children:"Name \u2b06"}),(0,Yk.jsx)("option",{"aria-label":"Decreasing by taskname",value:"taskName desc",children:"Name \u2b07"}),(0,Yk.jsx)("option",{"aria-label":"Increasing by date created",value:"created asc",children:"Date \u2b06"}),(0,Yk.jsx)("option",{"aria-label":"Decreasing by date created",value:"created desc",children:"Date \u2b07"}),(0,Yk.jsx)("option",{"aria-label":"Increasing by priority level",value:"priorityLevel asc",children:"Priority \u2b06"}),(0,Yk.jsx)("option",{"aria-label":"Decreasing by priority level",value:"priorityLevel desc",children:"Priority \u2b07"})]})}),(0,Yk.jsx)("div",{className:"topTabThird",children:(0,Yk.jsx)("h1",{children:"To-Do"})}),(0,Yk.jsx)("div",{className:"topTabThird last",children:e.appMode===aT.EDIT_MODE?(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)("button",{"aria-label":"Cancel Edits",id:"cancelEdits",onClick:()=>{e.setDataChanges({}),e.setAppMode(aT.DEFAULT_MODE)},children:(0,Yk.jsx)(jk,{icon:Hk})}),(0,Yk.jsx)("button",{"aria-label":"Save Edits",id:"saveEdits",onClick:()=>{e.applyDataChanges(),e.setAppMode(aT.DEFAULT_MODE)},children:(0,Yk.jsx)(jk,{icon:Kk})})]}):(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)("button",{"aria-label":"Edit Button",id:"editButton",onClick:()=>e.setAppMode(aT.EDIT_MODE),disabled:e.dataLength<1||e.appMode!==aT.DEFAULT_MODE,children:(0,Yk.jsx)(jk,{icon:zk})}),(0,Yk.jsx)("button",{"aria-label":"Add Button",id:"addItem",onClick:()=>{e.setAppMode(aT.ADD_TASK_MODE)},disabled:e.appMode!==aT.DEFAULT_MODE||0===e.lists.length,children:(0,Yk.jsx)(jk,{icon:qk})})]})})]})};const Jk=function(e){var t,n;function r(t,n){e.addToTaskChangeList(e.task.id,{...e.taskChangeList,[t]:n})}return(0,Yk.jsx)(Yk.Fragment,{children:!("delete"in e.taskChangeList)&&(0,Yk.jsx)("li",{className:"listItem",children:(0,Yk.jsxs)("label",{className:"taskLabel",children:[(0,Yk.jsx)("input",{className:"checkbox",type:"checkbox",checked:e.task.isChecked,disabled:e.appMode===aT.EDIT_MODE,onChange:t=>e.onTaskChanged(e.task.id,"isChecked",t.target.checked)}),(0,Yk.jsx)("div",{className:"taskContent",children:e.appMode===aT.EDIT_MODE?(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)("input",{className:"editInput",type:"text",value:void 0!==e.taskChangeList.taskName?e.taskChangeList.taskName:e.task.taskName,onChange:e=>{r("taskName",e.target.value)}}),(0,Yk.jsxs)("select",{className:"prioritySelector",value:(null===(t=e.taskChangeList)||void 0===t?void 0:t.priorityLevel)||e.task.priorityLevel,onChange:e=>r("priorityLevel",parseInt(e.target.value)),children:[(0,Yk.jsx)("option",{"aria-label":"Low priority",value:"1",children:"!"}),(0,Yk.jsx)("option",{"aria-label":"Medium priority",value:"2",children:"!!"}),(0,Yk.jsx)("option",{"aria-label":"High priority",value:"3",children:"!!!"})]}),(0,Yk.jsx)("button",{"aria-label":"Delete task",className:"deleteButton",onClick:()=>{r("delete",!0)},children:(0,Yk.jsx)(jk,{icon:Gk,size:"xs"})})]}):(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)("span",{className:"taskName",children:e.task.taskName}),(0,Yk.jsx)("span",{className:(n=e.task.priorityLevel,1===n?"priorityLevel low":2===n?"priorityLevel medium":"priorityLevel high"),children:"!".repeat(e.task.priorityLevel)})]})})]})})})};const $k=function(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.filter((t=>e.tasksShowing===cT.ALL||e.tasksShowing===cT.UNCOMPLETED&&!t.isChecked));function r(t,n){e.setDataChanges({...e.dataChanges,[t]:n})}return(0,Yk.jsx)("ul",{id:"itemList",children:n.length>0?n.map((t=>(0,Yk.jsx)(Jk,{task:t,onTaskChanged:e.onTaskChanged,appMode:e.appMode,addToTaskChangeList:r,taskChangeList:t.id in e.dataChanges?e.dataChanges[t.id]:{}},t.id))):(0,Yk.jsx)("li",{id:"noItems",children:(0,Yk.jsx)("h3",{children:e.appMode===aT.EDIT_MODE?"No tasks to edit.":0===e.lists.length?"You have no lists. Create your first one by clicking the lists icon above!":"You have completed all your tasks, woohoo!"})},"1")})};const Zk=function(e){const[n,r]=(0,t.useState)(null);function i(e){return e>1?e+" tasks":e+" task"}const s=(0,Yk.jsxs)("div",{id:"deleteButtonContainer",children:[null===n?(0,Yk.jsx)("button",{type:"button",id:"deleteCompleted",disabled:e.tasksShowing===cT.UNCOMPLETED||0===e.data.filter((e=>e.isChecked)).length,onClick:()=>r("completed"),children:" Delete All Completed"}):(0,Yk.jsx)("button",{type:"button",id:"cancel",onClick:()=>r(null),children:" Cancel"}),null===n?(0,Yk.jsx)("button",{type:"button",id:"deleteAll",disabled:0===e.data.length,onClick:()=>{r("all")},children:" Delete All"}):(0,Yk.jsxs)("button",{type:"button",id:"confirm",onClick:()=>{e.onTasksDeleted("all"===n?e.data.map((e=>e.id)):e.data.filter((e=>e.isChecked)).map((e=>e.id))),r(null)},children:[" Delete ",i("all"===n?e.data.length:e.data.filter((e=>e.isChecked)).length)]})]}),o=(0,Yk.jsxs)("div",{"aria-label":"Select Shown Tasks",id:"switcherContainer",children:[(0,Yk.jsx)("button",{"aria-label":"Show All Tasks",type:"button",id:"showAll",disabled:e.tasksShowing===cT.ALL,onClick:()=>e.setTasksShowing(cT.ALL),children:" All"}),(0,Yk.jsx)("button",{"aria-label":"Show Uncompleted Tasks",type:"button",id:"showUncompleted",disabled:e.tasksShowing===cT.UNCOMPLETED,onClick:()=>e.setTasksShowing(cT.UNCOMPLETED),children:" Uncompleted"})]});return(0,Yk.jsxs)("div",{id:"footer",children:[e.appMode===aT.EDIT_MODE?s:o,(0,Yk.jsxs)("div",{id:"signOutRow",children:[(0,Yk.jsx)("span",{children:e.user.email}),(0,Yk.jsx)("button",{id:"signOutButton",onClick:()=>e.auth.signOut(),children:"Sign Out"})]})]})};const eT=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(1);return(0,Yk.jsx)("div",{id:"popUpBackground",children:(0,Yk.jsxs)("div",{id:"popUp",children:[(0,Yk.jsxs)("div",{id:"popUpHeader",children:[(0,Yk.jsx)("button",{id:"closePopUp",onClick:()=>{r(""),s(1),e.setAppMode(aT.DEFAULT_MODE)},children:"X"}),(0,Yk.jsx)("h2",{children:" New Task "}),(0,Yk.jsx)("button",{children:"X"})]}),(0,Yk.jsxs)("form",{id:"createForm",onSubmit:t=>{t.preventDefault(),e.onItemAdded(n,i),r(""),s(1),e.setAppMode(aT.DEFAULT_MODE)},children:[(0,Yk.jsx)("input",{id:"taskName",type:"text",value:n,onChange:e=>r(e.target.value),autoFocus:!0}),(0,Yk.jsxs)("div",{id:"prioritySelector",children:[(0,Yk.jsx)("button",{"aria-label":"Low priority",className:"priorityButton",type:"button",id:"low",disabled:1===i,onClick:()=>s(1),children:"Low!"}),(0,Yk.jsx)("button",{"aria-label":"Medium priority",className:"priorityButton",type:"button",id:"medium",disabled:2===i,onClick:()=>s(2),children:"Medium!!"}),(0,Yk.jsx)("button",{"aria-label":"High priority",className:"priorityButton",type:"button",id:"high",disabled:3===i,onClick:()=>s(3),children:"High!!!"})]}),(0,Yk.jsx)("button",{id:"addTask",type:"submit",disabled:0===n.length,children:"Add Task"})]})]})})};const tT=function(e){var t;return(0,Yk.jsxs)("div",{id:"listSelectorRow",children:[(0,Yk.jsx)("div",{className:"topTabThird first",children:(0,Yk.jsx)("select",{id:"listSelector",disabled:0===e.lists.length,value:e.currentListID||void 0,onChange:t=>e.setCurrentListID(t.target.value),children:e.lists.map((e=>(0,Yk.jsx)("option",{value:e.id,children:e.listName},e.id)))})}),(0,Yk.jsx)("div",{className:"topTabThird"}),(0,Yk.jsxs)("div",{className:"topTabThird last",children:[(null===(t=e.lists.find((t=>t.id===e.currentListID)))||void 0===t?void 0:t.owner)===e.user.email&&(0,Yk.jsx)("button",{id:"shareLists",onClick:()=>e.setAppMode(aT.SHARE_LISTS_MODE),children:(0,Yk.jsx)(jk,{icon:Qk})}),(0,Yk.jsx)("button",{id:"editLists",onClick:()=>e.setAppMode(aT.EDIT_LISTS_MODE),children:(0,Yk.jsx)(jk,{icon:Bk})})]})]})};const nT=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(null);function o(t){return(0,Yk.jsxs)(Yk.Fragment,{children:[t.owner===e.user.email?(0,Yk.jsx)("td",{className:"listNameCell",children:(0,Yk.jsx)("input",{className:"listNameInput",type:"text",value:t.listName,onChange:n=>e.onListChanged(t.id,"listName",n.target.value)})}):(0,Yk.jsx)("td",{className:"sharedEmailCell",children:(0,Yk.jsx)("span",{children:t.listName})}),(0,Yk.jsx)("td",{className:"sharedCell",children:t.sharedWith.length>1&&(0,Yk.jsx)(jk,{icon:Qk,size:"xs"})}),(0,Yk.jsx)("td",{className:"deleteCell",children:(0,Yk.jsx)("button",{className:"deleteListButton",onClick:()=>s(t.id),children:t.owner===e.user.email?(0,Yk.jsx)(jk,{icon:Gk,size:"xs"}):(0,Yk.jsx)(jk,{icon:Vk,size:"xs"})})})]})}function a(t){return(0,Yk.jsxs)("td",{colSpan:"3",className:"confirmCell",children:[(0,Yk.jsxs)("span",{children:[(t.owner===e.user.email?"Delete ":"Leave ")+t.listName,"?"]}),(0,Yk.jsx)("button",{className:"cancelButton",onClick:()=>s(null),children:"No"}),(0,Yk.jsx)("button",{className:"confirmButton",onClick:()=>{t.owner===e.user.email?(e.onListDeleted(t.id),s(null)):e.onListChanged(t.id,"sharedWith",t.sharedWith.filter((t=>t!==e.user.email)))},children:"Yes"})]})}return(0,Yk.jsx)("div",{id:"popUpBackground",children:(0,Yk.jsxs)("div",{id:"popUp",children:[(0,Yk.jsxs)("div",{id:"popUpHeader",children:[(0,Yk.jsx)("button",{id:"closePopUp",onClick:()=>{r(""),s(null),e.setAppMode(aT.DEFAULT_MODE)},children:"X"}),(0,Yk.jsx)("h2",{id:"tableTitle",children:" Lists "}),(0,Yk.jsx)("button",{children:"X"})]}),e.lists.length>0?(0,Yk.jsx)("div",{id:"tableContainer",children:(0,Yk.jsxs)("table",{id:"table",border:"1",frame:"void",rules:"rows",children:[(0,Yk.jsx)("thead",{children:(0,Yk.jsxs)("tr",{className:"tableHeaderRow",children:[(0,Yk.jsx)("th",{className:"listNameCell",children:"Name"}),(0,Yk.jsx)("th",{className:"sharedCell",children:"Shared"}),(0,Yk.jsx)("th",{className:"deleteCell",children:"Delete"})]})}),(0,Yk.jsx)("tbody",{children:e.lists.map((e=>(0,Yk.jsx)("tr",{className:"tableRow",children:i===e.id?a(e):o(e)},e.id)))})]})}):(0,Yk.jsx)("div",{id:"messageContainer",children:(0,Yk.jsx)("h3",{children:"Create your first list!"})}),(0,Yk.jsxs)("form",{id:"createRow",children:[(0,Yk.jsx)("div",{id:"createInputWrapper",children:(0,Yk.jsx)("input",{id:"createInput",type:"text",value:n,placeholder:"New list",onChange:e=>r(e.target.value)})}),(0,Yk.jsx)("div",{id:"createButtonWrapper",children:(0,Yk.jsx)("button",{id:"createNewButton",type:"submit",disabled:0===n.length,onClick:t=>{t.preventDefault(),e.onListAdded(n,0===e.lists.length),r("")},children:(0,Yk.jsx)(jk,{icon:qk})})})]})]})})};const rT=function(){return(0,Yk.jsx)("div",{id:"popUpBackground",className:"loadingPopUpBackground",children:(0,Yk.jsx)("div",{id:"loader"})})};function iT(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}const sT=function(e){const n="Sign In",r="Sign Up",[i,s]=(0,t.useState)(null);function o(e){return e.replace("Firebase: ","").split("(")[0]}function a(){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[a,c]=(0,t.useState)("");return(0,Yk.jsx)(Yk.Fragment,{children:e.signUpLoading?(0,Yk.jsx)(rT,{}):(0,Yk.jsxs)("form",{id:"signUp",children:[(0,Yk.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Yk.jsx)("input",{id:"email",className:"signUpSignInInput",type:"email",value:n,onChange:e=>r(e.target.value)}),(0,Yk.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Yk.jsx)("input",{id:"password",className:"signUpSignInInput",type:"password",value:i,onChange:e=>s(e.target.value)}),""!==i&&i.length<6&&(0,Yk.jsx)("span",{className:"errorMessage",children:"Password must be at least 6 characters long"}),(0,Yk.jsx)("label",{htmlFor:"verifyPassword",children:" Verify Password:"}),(0,Yk.jsx)("input",{id:"verifyPassword",className:"signUpSignInInput",type:"password",value:a,onChange:e=>c(e.target.value)}),""!==i&&""!==a&&i!==a&&(0,Yk.jsx)("span",{className:"errorMessage",children:"Passwords don't match!"}),(0,Yk.jsx)("button",{id:"signUpSubmit",type:"submit",onClick:()=>e.createUserWithEmailAndPassword(n,i),disabled:!iT(n)||i.length<6||i!==a,children:"Submit"}),null!==e.signUpError&&void 0!==e.signUpError&&(0,Yk.jsx)("span",{className:"errorMessage",children:o(e.signUpError.message)})]})})}function c(){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)("");return(0,Yk.jsx)(Yk.Fragment,{children:e.signInLoading?(0,Yk.jsx)(rT,{}):(0,Yk.jsxs)("form",{id:"signIn",children:[(0,Yk.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Yk.jsx)("input",{id:"email",className:"signUpSignInInput",type:"email",value:n,onChange:e=>r(e.target.value)}),(0,Yk.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Yk.jsx)("input",{id:"password",className:"signUpSignInInput",type:"password",value:i,onChange:e=>s(e.target.value)}),(0,Yk.jsx)("button",{id:"signInSubmit",type:"submit",onClick:()=>e.signInWithEmailAndPassword(n,i),disabled:""===n||""===i,children:"Submit"}),null!==e.signInError&&void 0!==e.signInError&&(0,Yk.jsx)("span",{className:"errorMessage",children:o(e.signInError.message)})]})})}return(0,Yk.jsxs)("div",{id:"signUpSignIn",children:[null===i&&(0,Yk.jsx)("h1",{id:"title",children:"To-Do List"}),(0,Yk.jsxs)("div",{id:"buttonOptions",children:[i===n&&(0,Yk.jsx)(c,{}),i===r&&(0,Yk.jsx)(a,{}),null!==i&&(0,Yk.jsxs)("div",{id:"divider",children:[(0,Yk.jsx)("hr",{}),(0,Yk.jsx)("span",{children:"Or"}),(0,Yk.jsx)("hr",{})]}),i!==n&&(0,Yk.jsx)("button",{id:"logInButton",onClick:()=>s(n),children:"Log In"}),i!==r&&(0,Yk.jsx)("button",{id:"signUpButton",onClick:()=>s(r),children:"Sign Up"})]})]})};const oT=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[c,l]=(0,t.useState)(null),u=e.lists.find((t=>t.id===e.currentListID));function h(t){return[i,o].includes(t)?function(t){return(0,Yk.jsxs)("td",{colSpan:"3",className:"confirmCell",children:[(0,Yk.jsxs)("span",{children:[t+":",(0,Yk.jsx)("br",{}),i===t?"Remove from list?":"Make owner? (You will lose ownership)"]}),(0,Yk.jsx)("button",{className:"cancelButton",onClick:()=>i===t?s(null):a(null),children:"No"}),(0,Yk.jsx)("button",{className:"confirmButton",onClick:()=>{i===t?(s(null),l(null),e.onListChanged(e.currentListID,"sharedWith",u.sharedWith.filter((e=>e!==t)))):(e.onListChanged(e.currentListID,"owner",t),e.setAppMode(aT.DEFAULT_MODE))},children:"Yes"})]})}(t):t===c?function(e){return(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsxs)("td",{className:"sharedEmailCell",children:[(0,Yk.jsx)("button",{className:"makeOwnerButton",onClick:()=>a(e),children:"Make Owner"}),(0,Yk.jsx)("button",{className:"removeUserButton",onClick:()=>s(e),children:"Remove"})]}),(0,Yk.jsx)("td",{className:"manageCell",children:(0,Yk.jsx)("button",{className:"cancelManageButton",onClick:()=>l(null),children:(0,Yk.jsx)(jk,{icon:Hk,size:"xs"})})})]})}(t):function(e){return(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)("td",{className:"sharedEmailCell",children:(0,Yk.jsx)("span",{children:e})}),(0,Yk.jsx)("td",{className:"manageCell",children:(0,Yk.jsx)("button",{className:"manageButton",onClick:()=>l(e),children:(0,Yk.jsx)(jk,{icon:Wk,size:"xs"})})})]})}(t)}return(0,Yk.jsx)("div",{id:"popUpBackground",children:(0,Yk.jsxs)("div",{id:"popUp",children:[(0,Yk.jsxs)("div",{id:"popUpHeader",children:[(0,Yk.jsx)("button",{id:"closePopUp",disabled:0===e.lists.length,onClick:()=>{r(""),s(null),a(null),e.setAppMode(aT.DEFAULT_MODE)},children:"X"}),(0,Yk.jsxs)("h2",{id:"tableTitle",children:["Share List:",(0,Yk.jsx)("br",{}),u.listName]}),(0,Yk.jsx)("button",{children:"X"})]}),u.sharedWith.filter((t=>t!==e.user.email)).length>0?(0,Yk.jsx)("div",{id:"tableContainer",children:(0,Yk.jsxs)("table",{id:"table",border:"1",frame:"void",rules:"rows",children:[(0,Yk.jsx)("thead",{children:(0,Yk.jsxs)("tr",{className:"tableHeaderRow",children:[(0,Yk.jsx)("th",{className:"sharedEmailCell",children:"Email"}),(0,Yk.jsx)("th",{className:"manageCell",children:"Settings"})]})}),(0,Yk.jsx)("tbody",{children:u.sharedWith.filter((t=>t!==e.user.email)).map((e=>(0,Yk.jsx)("tr",{className:"tableRow",children:h(e)},e)))})]})}):(0,Yk.jsx)("div",{id:"messageContainer",children:(0,Yk.jsx)("h3",{children:"Add another user below!"})}),(0,Yk.jsxs)("form",{id:"createRow",children:[(0,Yk.jsx)("div",{id:"createInputWrapper",children:(0,Yk.jsx)("input",{id:"createInput",type:"email",value:n,placeholder:"User email",onChange:e=>r(e.target.value)})}),(0,Yk.jsx)("div",{id:"createButtonWrapper",children:(0,Yk.jsx)("button",{id:"createNewButton",type:"submit",disabled:!iT(n)||u.sharedWith.includes(n),onClick:t=>{t.preventDefault(),e.onListChanged(e.currentListID,"sharedWith",u.sharedWith.concat([n])),r("")},children:(0,Yk.jsx)(jk,{icon:qk})})})]})]})})},aT={ADD_TASK_MODE:"add_task_mode",EDIT_LISTS_MODE:"edit_lists_mode",SHARE_LISTS_MODE:"share_lists_mode",DEFAULT_MODE:"default_mode",EDIT_MODE:"edit_mode"},cT={ALL:"all",UNCOMPLETED:"uncompleted"};const lT=function(e){const[n,r]=(0,t.useState)(aT.DEFAULT_MODE),[i,s]=(0,t.useState)(cT.ALL),[o,a]=(0,t.useState)({});return(0,Yk.jsxs)("div",{className:"App",children:[n===aT.SHARE_LISTS_MODE&&(0,Yk.jsx)(oT,{appMode:n,setAppMode:r,user:e.user,lists:e.lists,onListChanged:e.onListChanged,currentListID:e.currentListID}),n===aT.EDIT_LISTS_MODE&&(0,Yk.jsx)(nT,{appMode:n,setAppMode:r,lists:e.lists,user:e.user,onListAdded:e.onListAdded,onListChanged:e.onListChanged,onListDeleted:e.onListDeleted}),n===aT.ADD_TASK_MODE&&(0,Yk.jsx)(eT,{appMode:n,setAppMode:r,onItemAdded:e.onTaskAdded}),(0,Yk.jsx)(Xk,{dataLength:e.data.length,lists:e.lists,appMode:n,setAppMode:r,applyDataChanges:function(){let t=[];Object.keys(o).forEach((function(n){"delete"in o[n]&&t.push(n),Object.keys(o[n]).filter((e=>"delete"!==e)).forEach((function(t){e.onTaskChanged(n,t,o[n][t])}))})),t.length>0&&e.onTasksDeleted(t)},setDataChanges:a,sortParameter:e.sortParameter,setSortParameter:e.setSortParameter}),(0,Yk.jsx)(tT,{currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,lists:e.lists,setAppMode:r,user:e.user}),(0,Yk.jsx)($k,{data:e.data,lists:e.lists,onTaskChanged:e.onTaskChanged,appMode:n,tasksShowing:i,setDataChanges:a,dataChanges:o}),(0,Yk.jsx)(Zk,{data:e.data,appMode:n,tasksShowing:i,setTasksShowing:s,onTasksDeleted:e.onTasksDeleted,user:e.user,auth:e.auth})]})};const uT=function(e){return(0,Yk.jsx)(Yk.Fragment,{children:e.error&&(0,Yk.jsx)("div",{id:"popUpBackground",className:"errorPopUp",children:(0,Yk.jsxs)("div",{id:"popUp",children:[(0,Yk.jsxs)("div",{id:"popUpHeader",children:[(0,Yk.jsx)("button",{id:"closePopUp",onClick:()=>window.location.reload(!0),children:"X"}),(0,Yk.jsx)("h2",{id:"errorTitle",children:"ERROR"}),(0,Yk.jsx)("button",{children:"X"})]}),(0,Yk.jsxs)("span",{id:"errorMessage",children:["Type: ",JSON.stringify(e.error.name),(0,Yk.jsx)("br",{}),"Message: ",JSON.stringify(e.error.code)]})]})})})};const hT=function(e){const[n,r]=(0,t.useState)("priorityLevel desc"),[i,s]=(0,t.useState)(null);(0,t.useEffect)((()=>{e.currentListID?e.db.doc(e.currentListID).get().then((t=>{t.exists?s(e.db.doc(e.currentListID).collection("tasks").orderBy(n.split(" ")[0],n.split(" ")[1])):s(null)})).catch((e=>e)):s(null)}),[e.currentListID,e.db,n]);const[o,a,c]=KI(i),l=(null===o||void 0===o?void 0:o.docs.map((e=>e.data())))||[];return(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)(uT,{error:c}),a&&(0,Yk.jsx)(rT,{}),(0,Yk.jsx)(lT,{lists:e.lists,data:l,user:e.user,auth:e.auth,currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,onListAdded:e.onListAdded,onListDeleted:e.onListDeleted,onListChanged:e.onListChanged,sortParameter:n,setSortParameter:r,onTaskAdded:function(t,n){const r=ro();e.db.doc(e.currentListID).collection("tasks").doc(r).set({id:r,taskName:t,priorityLevel:n,isChecked:!1,created:ps.firestore.FieldValue.serverTimestamp()})},onTaskChanged:function(t,n,r){e.db.doc(e.currentListID).collection("tasks").doc(t).update({[n]:r})},onTasksDeleted:function(t){for(let n of t)e.db.doc(e.currentListID).collection("tasks").doc(n).delete()}})]})};ps.initializeApp({apiKey:"AIzaSyDbDnRMAuOjcmsEB2iwcbt2_w6SPX-EAQo",authDomain:"cs124lab3.firebaseapp.com",projectId:"cs124lab3",storageBucket:"cs124lab3.appspot.com",messagingSenderId:"191143519167",appId:"1:191143519167:web:f33464f0d0ede5b538370a",measurementId:"G-B8CQHTFNQE"});const dT=ps.firestore(),fT="lists";const pT=function(e){const[n,r]=(0,t.useState)(null),i=dT.collection(fT).where("sharedWith","array-contains",e.user.email),[s,o,a]=KI(i),[c,l]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{l((null===s||void 0===s?void 0:s.docs.map((e=>e.data())))||[])}),[s]),(0,t.useEffect)((()=>{null!==n||u||c.length>0&&r(c[0].id)}),[n,c,u]),(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)(uT,{error:a}),o&&(0,Yk.jsx)(rT,{}),(0,Yk.jsx)(hT,{lists:c,user:e.user,auth:e.auth,db:dT.collection(fT),currentListID:n,setCurrentListID:r,onListAdded:async function(t){h(!0);const n=ro();await dT.collection(fT).doc(n).set({id:n,listName:t,owner:e.user.email,sharedWith:[e.user.email]}),h(!1)},onListDeleted:async function(e){h(!0);let t=n;r(null);const i=await dT.collection(fT).doc(e).collection("tasks").get();await i.docs.forEach((e=>e.ref.delete())),await dT.collection(fT).doc(e).delete(),e!==t&&r(t),h(!1)},onListChanged:async function(t,i,s){h(!0),t===n&&"sharedWith"===i&&void 0===s.find((t=>t===e.user.email))&&r(null),await dT.collection(fT).doc(t).update({[i]:s}),h(!1)}})]})};const mT=function(e){const[n,r]=(0,t.useState)(!1);return(0,Yk.jsx)("div",{id:"popUpBackground",children:(0,Yk.jsxs)("div",{id:"popUp",children:[(0,Yk.jsxs)("div",{id:"popUpHeader",children:[(0,Yk.jsx)("button",{id:"closePopUp",onClick:()=>e.auth.signOut(),children:"X"}),(0,Yk.jsx)("h2",{children:" Verify Email "}),(0,Yk.jsx)("button",{children:"X"})]}),(0,Yk.jsx)("div",{id:"verifyBody",children:n?(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsxs)("span",{id:"verifyMessage",children:["Check your email for a verification link:",(0,Yk.jsx)("br",{}),e.user.email]}),(0,Yk.jsx)("div",{id:"loader"}),(0,Yk.jsx)("button",{id:"sendEmail",onClick:()=>window.location.reload(!0),children:"Refresh Page"})]}):(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsxs)("span",{id:"verifyMessage",children:["Click the button below to send a verification email to:",(0,Yk.jsx)("br",{}),e.user.email]}),(0,Yk.jsx)("button",{id:"sendEmail",onClick:()=>{r(!0),e.auth.currentUser.sendEmailVerification()},children:"Send Email"})]})})]})})},gT=ps.auth();const yT=function(){const[e,t,n]=as(gT),[r,i,s,o]=ls(gT),[a,c,l,u]=cs(gT);return(0,Yk.jsxs)(Yk.Fragment,{children:[(0,Yk.jsx)(uT,{error:n}),t?(0,Yk.jsx)(rT,{}):(0,Yk.jsx)(Yk.Fragment,{children:e?(0,Yk.jsx)(Yk.Fragment,{children:e.emailVerified?(0,Yk.jsx)(pT,{user:e,auth:gT}):(0,Yk.jsx)(mT,{auth:gT,user:e})}):(0,Yk.jsx)(sT,{auth:gT,signInWithEmailAndPassword:r,signInUserCredential:i,signInLoading:s,signInError:o,createUserWithEmailAndPassword:a,signUpUserCredential:c,signUpLoading:l,signUpError:u})})]})};r.render((0,Yk.jsx)(t.StrictMode,{children:(0,Yk.jsx)(yT,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.9c8a8b34.js.map