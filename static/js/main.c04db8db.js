/*! For license information please see main.c04db8db.js.LICENSE.txt */
(()=>{var e={725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))n.call(s,c)&&(a[c]=s[c]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(725),s=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,I=60106,k=60107,S=60108,T=60114,x=60109,C=60110,N=60112,A=60113,D=60120,O=60115,P=60116,R=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),I=U("react.portal"),k=U("react.fragment"),S=U("react.strict_mode"),T=U("react.profiler"),x=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),D=U("react.suspense_list"),O=U("react.memo"),P=U("react.lazy"),R=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case I:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return W(e.type);case R:return W(e._render);case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,xe=null,Ce=null;function Ne(e){if(e=ni(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ae(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function De(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Oe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Le=Oe,Me=!1,Fe=!1;function je(){null===xe&&null===Ce||(Re(),De())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function Be(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var qe=!1,Ke=null,Ge=!1,He=null,We={onError:function(e){qe=!0,Ke=e}};function Qe(e,t,n,r,i,s,o,a,l){qe=!1,Ke=null,Be.apply(We,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,lt=null,ct=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(vt),ut.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==lt&&bt(lt,e),ct.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},kt={},St={};function Tt(e){if(kt[e])return kt[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return kt[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var xt=Tt("animationend"),Ct=Tt("animationiteration"),Nt=Tt("animationstart"),At=Tt("transitionend"),Dt=new Map,Ot=new Map,Pt=["abort","abort",xt,"animationEnd",Ct,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Dt.set(r,i),c(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!==(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=Lt):0!==(a&=s)&&(r=Mt(a),i=Lt)}else 0!==(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Ht=s.unstable_UserBlockingPriority,Wt=s.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||Re();var i=Jt,s=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=s)||je()}}function Xt(e,t,n,r){Wt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=$t(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Rr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var s=Ye(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Xe(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,cn,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),En=an(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return Tn}var Cn=i({},fn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Cn),An=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),On=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Cr(e,0)}function Jn(e){if(J(ri(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Wn(t,Yn,e,Se(e)),e=Xn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,je()}}}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ar(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==$(r)||("selectionStart"in(r=vr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Pt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Ir.length;kr++)Ot.set(Ir[kr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=Ke;qe=!1,Ke=null,Ge||(Ge=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;xr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;xr(i,a,c),s=l}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Nr(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Ar]||(e[Ar]=!0,a.forEach((function(t){Tr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Pr(s,e,i,t),o.add(a))}function Pr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=s,i=Se(n),o=[];e:{var a=Dt.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case xt:case Ct:case Nt:l=wn;break;case At:l=On;break;case"scroll":l=pn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ue(p,d))&&u.push(Lr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ri(l),f=null==c?a:ri(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==l&&jr(o,a,l,u,!1),null!==c&&null!==h&&jr(o,h,c,u,!0)}if("select"===(l=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Hn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Er(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(y=Mr(r,w)).length&&(w=new En(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=qn(n))&&(w.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ue(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ue(n,s))&&o.unshift(Lr(n,l,a)):i||null!=(l=Ue(n,s))&&o.push(Lr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,Zr="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[$r]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function li(e){return{current:e}}function ci(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=li(hi),fi=li(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(fi),ci(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ui(di,t),ui(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,W(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(fi),ci(di),ui(di,e)):ci(fi),ui(fi,n)}var Ei=null,Ii=null,ki=s.unstable_runWithPriority,Si=s.unstable_scheduleCallback,Ti=s.unstable_cancelCallback,xi=s.unstable_shouldYield,Ci=s.unstable_requestPaint,Ni=s.unstable_now,Ai=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,Pi=s.unstable_NormalPriority,Ri=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},ji=null,Ui=null,Vi=!1,zi=Ni(),Bi=1e4>zi?Ni:function(){return Ni()-zi};function qi(){switch(Ai()){case Di:return 99;case Oi:return 98;case Pi:return 97;case Ri:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Oi;case 97:return Pi;case 96:return Ri;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),ki(e,t)}function Hi(e,t,n){return e=Ki(e),Si(e,t,n)}function Wi(){if(null!==Ui){var e=Ui;Ui=null,Ti(e)}Qi()}function Qi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Di,Wi),n}finally{Vi=!1}}}var Yi=_.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),$i=null,Zi=null,es=null;function ts(){es=Zi=$i=null}function ns(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){$i=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===$i)throw Error(o(308));Zi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==o){for(d=s.baseState,a=0,h=u=c=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,d,l):p)||void 0===l)break e;d=i({},d,l);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,c=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,za|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dl(),i=fl(e),s=cs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dl(),i=fl(e),s=cs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),r=fl(e),i=cs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),us(e,i),pl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Es(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Is(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ks(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Xl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Es(e,t,n),r.return=e,r):((r=Wl(n.type,n.key,n.props,null,e.mode,r)).ref=Es(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ql(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Wl(t.type,t.key,t.props,null,e.mode,n)).ref=Es(e,null,t),n.return=e,n;case I:return(t=Jl(t,e.mode,n)).return=e,t}if(_s(t)||B(t))return(t=Ql(t,e.mode,n,null)).return=e,t;Is(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===k?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null}if(_s(n)||B(n))return null!==i?null:h(e,t,n,r,null);Is(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===k?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Is(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=B(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,l){var c="object"===typeof s&&null!==s&&s.type===k&&null===s.key;c&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case E:e:{for(u=s.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(s.type===k){n(e,c.sibling),(r=i(c,s.props.children)).return=e,e=r;break e}}else if(c.elementType===s.type){n(e,c.sibling),(r=i(c,s.props)).ref=Es(e,c,s),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}s.type===k?((r=Ql(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Wl(s.type,s.key,s.props,null,e.mode,l)).ref=Es(e,r,s),l.return=e,e=l)}return a(e);case I:e:{for(c=s.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Xl(s,e.mode,l)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,l);if(B(s))return g(e,r,s,l);if(u&&Is(e,s),"undefined"===typeof s&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Ss=ks(!0),Ts=ks(!1),xs={},Cs=li(xs),Ns=li(xs),As=li(xs);function Ds(e){if(e===xs)throw Error(o(174));return e}function Os(e,t){switch(ui(As,t),ui(Ns,e),ui(Cs,xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Cs),ui(Cs,t)}function Ps(){ci(Cs),ci(Ns),ci(As)}function Rs(e){Ds(As.current);var t=Ds(Cs.current),n=fe(t,e.type);t!==n&&(ui(Ns,e),ui(Cs,n))}function Ls(e){Ns.current===e&&(ci(Cs),ci(Ns))}var Ms=li(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=null,Us=null,Vs=!1;function zs(e,t){var n=Kl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(Vs){var t=Us;if(t){var n=t;if(!Bs(e,t)){if(!(t=Wr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Vs=!1,void(js=e);zs(js,n)}js=e,Us=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Vs=!1,js=e}}function Ks(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;js=e}function Gs(e){if(e!==js)return!1;if(!Vs)return Ks(e),Vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Us;t;)zs(e,t),t=Wr(t.nextSibling);if(Ks(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Us=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Us=null}}else Us=js?Wr(e.stateNode.nextSibling):null;return!0}function Hs(){Us=js=null,Vs=!1}var Ws=[];function Qs(){for(var e=0;e<Ws.length;e++)Ws[e]._workInProgressVersionPrimary=null;Ws.length=0}var Ys=_.ReactCurrentDispatcher,Xs=_.ReactCurrentBatchConfig,Js=0,$s=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,$s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=null===e||null===e.memoizedState?Oo:Po,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Ys.current=Ro,e=n(r,i)}while(no)}if(Ys.current=Do,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=$s=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?$s.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=$s.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?$s.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?$s.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,c=i;do{var u=c.lane;if((Js&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,$s.lanes|=u,za|=u}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=a,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);cr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Ws.push(t))),e)return n(t._source);throw Ws.push(t),Error(o(350))}function fo(e,t,n,r){var i=Pa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Ys.current,c=l.useState((function(){return ho(i,t,n)})),u=c[1],h=c[0];c=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=$s;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!cr(a,e)){e=n(t._source),cr(h,e)||(u(e),e=fl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-qt(o),c=1<<l;r[l]|=e,o&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,r]),cr(p,n)&&cr(m,t)&&cr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=u=Ao.bind(null,$s,e),c.queue=e,c.baseQueue=null,h=ho(i,t,n),c.memoizedState=c.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Ao.bind(null,$s,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$s.updateQueue)?(t={lastEffect:null},$s.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();$s.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}$s.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Eo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,ko.bind(null,t,e),n)}function To(){}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=qi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Xs.transition;Xs.transition=1;try{e(!1),t()}finally{Xs.transition=n}}))}function Ao(e,t,n){var r=dl(),i=fl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===$s||null!==o&&o===$s)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,cr(l,a))return}catch(c){}pl(e,i,r)}}var Do={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,$s,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$s.mode)&&($s.flags|=516,go(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Co,useReducer:co,useRef:vo,useState:function(){return co(lo)},useDebugValue:To,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return Eo((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Co,useReducer:uo,useRef:vo,useState:function(){return uo(lo)},useDebugValue:To,useDeferredValue:function(e){var t=uo(lo),n=t[0],r=t[1];return Eo((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=uo(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ts(t,null,n,r):Ss(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Uo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Gl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?sa(e,t,s):(t.flags|=1,(e=Hl(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(s&i))return t.lanes=e.lanes,sa(e,t,s);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function zo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},El(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},El(t,e),null;t.memoizedState={baseLanes:0},El(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,El(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Ko(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ss(c):c=mi(t,c=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&ws(t,o,r,c),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||os?("function"===typeof u&&(ms(t,n,u,r),l=t.memoizedState),(a=os||ys(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ls(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Xi(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ss(l):l=mi(t,l=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ws(t,o,r,l),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"===typeof f&&(ms(t,n,f,r),p=t.memoizedState),(c=os||ys(t,n,c,r,d,p,l))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,s,i)}function Go(e,t,n,r,i,s){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),sa(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Os(e,t.containerInfo)}var Wo,Qo,Yo,Xo,Jo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ui(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ta(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Yl(t,i,0,null),n=Ql(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Hl(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hl(o,a),null!==e?r=Hl(e,r):(r=Ql(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ra(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,s,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function sa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function oa(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Ps(),ci(fi),ci(di),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gs(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:Ls(t);var s=Ds(As.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ds(Cs.current),Gs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[$r]=a,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Nr(Sr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":le(r,a),Nr("invalid",r)}for(var c in Ie(n,a),e=null,a)a.hasOwnProperty(c)&&(s=a[c],"children"===c?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(c)&&null!=s&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":X(r),re(r,a,!0);break;case"textarea":X(r),ue(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[$r]=r,Wo(e,t,!1,!1),t.stateNode=e,c=ke(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),s=r;break;case"iframe":case"object":case"embed":Nr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Sr.length;s++)Nr(Sr[s],e);s=r;break;case"source":Nr("error",e),s=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),s=r;break;case"details":Nr("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Nr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Nr("invalid",e);break;default:s=r}Ie(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Nr("scroll",e):null!=h&&b(e,a,h,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ur)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ds(As.current),Ds(Cs.current),Gs(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gs(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Pa||0===(134217727&za)&&0===(134217727&Ba)||vl(Pa,La))),(r||n)&&(t.flags|=4),null);case 4:return Ps(),Qo(t),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ci(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(c=r.rendering))if(a)oa(r,!1);else{if(0!==ja||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fs(e))){for(t.flags|=64,oa(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Ha&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),oa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Ha&&1073741824!==n&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ui(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return Il(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function la(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ps(),ci(fi),ci(di),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return ci(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ms),null;case 4:return Ps(),null;case 10:return ns(e),null;case 23:case 24:return Il(),null;default:return null}}function ca(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},Yo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ds(Cs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ie(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Nr("scroll",e),a||c===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=cs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xa||(Xa=!0,Ja=r),ua(0,t)},n}function fa(e,t,n){(n=cs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$a?$a=new Set([this]):$a.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pa="function"===typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vl(e,n)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function ya(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fl(n,e),Ml(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function va(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wa(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ei,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fl(t,n);else{r=t;try{i()}catch(s){Vl(r,s)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vl(t,s)}break;case 5:ma(t);break;case 4:Sa(e,t)}}function ba(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _a(e){return 5===e.tag||3===e.tag||4===e.tag}function Ea(e){e:{for(var t=e.return;null!==t;){if(_a(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ia(e,n,t):ka(e,n,t)}function Ia(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ia(e,t,n),e=e.sibling;null!==e;)Ia(e,t,n),e=e.sibling}function ka(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ka(e,t,n),e=e.sibling;null!==e;)ka(e,t,n),e=e.sibling}function Sa(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,c=l;;)if(wa(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ta(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,i),t=ke(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?_e(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ye(n,l):b(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ga=Bi(),va(t.child,!0)),void xa(t);case 19:return void xa(t);case 23:case 24:return void va(t,null!==t.memoizedState)}throw Error(o(163))}function xa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pa),t.forEach((function(t){var r=Bl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ca(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Na=Math.ceil,Aa=_.ReactCurrentDispatcher,Da=_.ReactCurrentOwner,Oa=0,Pa=null,Ra=null,La=0,Ma=0,Fa=li(0),ja=0,Ua=null,Va=0,za=0,Ba=0,qa=0,Ka=null,Ga=0,Ha=1/0;function Wa(){Ha=Bi()+500}var Qa,Ya=null,Xa=!1,Ja=null,$a=null,Za=!1,el=null,tl=90,nl=[],rl=[],il=null,sl=0,ol=null,al=-1,ll=0,cl=0,ul=null,hl=!1;function dl(){return 0!==(48&Oa)?Bi():-1!==al?al:al=Bi()}function fl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===ll&&(ll=Va),0!==Yi.transition){0!==cl&&(cl=null!==Ka?Ka.pendingLanes:0),e=ll;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Oa)&&98===e?e=Ut(12,ll):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function pl(e,t,n){if(50<sl)throw sl=0,ol=null,Error(o(185));if(null===(e=ml(e,t)))return null;Bt(e,t,n),e===Pa&&(Ba|=t,4===ja&&vl(e,La));var r=qi();1===t?0!==(8&Oa)&&0===(48&Oa)?wl(e):(gl(e,n),0===Oa&&(Wa(),Wi())):(0===(4&Oa)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Ka=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-qt(a),c=1<<l,u=s[l];if(-1===u){if(0===(c&r)||0!==(c&i)){u=t,Mt(c);var h=Lt;s[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=Ft(e,e===Pa?La:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ti(n)}15===t?(n=wl.bind(null,e),null===ji?(ji=[n],Ui=Si(Di,Qi)):ji.push(n),n=Mi):14===t?n=Hi(99,wl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,yl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yl(e){if(al=-1,cl=ll=0,0!==(48&Oa))throw Error(o(327));var t=e.callbackNode;if(Ll()&&e.callbackNode!==t)return null;var n=Ft(e,e===Pa?La:0);if(0===n)return null;var r=n,i=Oa;Oa|=16;var s=Tl();for(Pa===e&&La===r||(Wa(),kl(e,r));;)try{Nl();break}catch(l){Sl(e,l)}if(ts(),Aa.current=s,Oa=i,null!==Ra?r=0:(Pa=null,La=0,r=ja),0!==(Va&Ba))kl(e,0);else if(0!==r){if(2===r&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=xl(e,n))),1===r)throw t=Ua,kl(e,0),vl(e,n),gl(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ol(e);break;case 3:if(vl(e,n),(62914560&n)===n&&10<(r=Ga+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Ol.bind(null,e),r);break}Ol(e);break;case 4:if(vl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Na(n/1960))-n)){e.timeoutHandle=Kr(Ol.bind(null,e),n);break}Ol(e);break;default:throw Error(o(329))}}return gl(e,Bi()),e.callbackNode===t?yl.bind(null,e):null}function vl(e,t){for(t&=~qa,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function wl(e){if(0!==(48&Oa))throw Error(o(327));if(Ll(),e===Pa&&0!==(e.expiredLanes&La)){var t=La,n=xl(e,t);0!==(Va&Ba)&&(n=xl(e,t=Ft(e,t)))}else n=xl(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=xl(e,t))),1===n)throw n=Ua,kl(e,0),vl(e,t),gl(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),gl(e,Bi()),null}function bl(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(Wa(),Wi())}}function _l(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&(Wa(),Wi())}}function El(e,t){ui(Fa,Ma),Ma|=t,Va|=t}function Il(){Ma=Fa.current,ci(Fa)}function kl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ra)for(n=Ra.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Ps(),ci(fi),ci(di),Qs();break;case 5:Ls(r);break;case 4:Ps();break;case 13:case 19:ci(Ms);break;case 10:ns(r);break;case 23:case 24:Il()}n=n.return}Pa=e,Ra=Hl(e.current,null),La=Ma=Va=t,ja=0,Ua=null,qa=Ba=za=0}function Sl(e,t){for(;;){var n=Ra;try{if(ts(),Ys.current=Do,to){for(var r=$s.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=$s=null,no=!1,Da.current=null,null===n||null===n.return){ja=1,Ua=t,Ra=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(c),d.updateQueue=y}else g.add(c);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=cs(-1,1);v.tag=2,us(a,v)}a.lanes|=1;break e}l=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ha,l=new Set,w.set(c,l)):void 0===(l=w.get(c))&&(l=new Set,w.set(c,l)),!l.has(a)){l.add(a);var b=zl.bind(null,s,c,a);c.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),l=ca(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,da(0,s,t));break e;case 1:s=l;var _=d.type,E=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===$a||!$a.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,fa(d,s,t));break e}}d=d.return}while(null!==d)}Dl(n)}catch(I){t=I,Ra===n&&null!==n&&(Ra=n=n.return);continue}break}}function Tl(){var e=Aa.current;return Aa.current=Do,null===e?Do:e}function xl(e,t){var n=Oa;Oa|=16;var r=Tl();for(Pa===e&&La===t||kl(e,t);;)try{Cl();break}catch(i){Sl(e,i)}if(ts(),Oa=n,Aa.current=r,null!==Ra)throw Error(o(261));return Pa=null,La=0,ja}function Cl(){for(;null!==Ra;)Al(Ra)}function Nl(){for(;null!==Ra&&!xi();)Al(Ra)}function Al(e){var t=Qa(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,null===t?Dl(e):Ra=t,Da.current=null}function Dl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=aa(n,t,Ma)))return void(Ra=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=la(t)))return n.flags&=2047,void(Ra=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ra=t);Ra=t=e}while(null!==t);0===ja&&(ja=5)}function Ol(e){var t=qi();return Gi(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Ll()}while(null!==el);if(0!==(48&Oa))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var c=31-qt(s),u=1<<c;i[c]=0,a[c]=-1,l[c]=-1,s&=~u}if(null!==il&&0===(24&r)&&il.has(e)&&il.delete(e),e===Pa&&(Ra=Pa=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Oa,Oa|=32,Da.current=null,Vr=Qt,gr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,s=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(T){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==c||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===c&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;zr={focusedElem:a,selectionRange:l},Qt=!1,ul=null,hl=!1,Ya=r;do{try{Rl()}catch(T){if(null===Ya)throw Error(o(330));Vl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);ul=null,Ya=r;do{try{for(a=e;null!==Ya;){var w=Ya.flags;if(16&w&&ye(Ya.stateNode,""),128&w){var b=Ya.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:Ea(Ya),Ya.flags&=-3;break;case 6:Ea(Ya),Ya.flags&=-3,Ta(Ya.alternate,Ya);break;case 1024:Ya.flags&=-1025;break;case 1028:Ya.flags&=-1025,Ta(Ya.alternate,Ya);break;case 4:Ta(Ya.alternate,Ya);break;case 8:Sa(a,l=Ya);var E=l.alternate;ba(l),null!==E&&ba(E)}Ya=Ya.nextEffect}}catch(T){if(null===Ya)throw Error(o(330));Vl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);if(_=zr,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=w.textContent.length,E=Math.min(a.start,l),a=void 0===a.end?E:Math.min(a.end,l),!_.extend&&E>a&&(l=a,a=E,E=l),l=fr(w,E),s=fr(w,a),l&&s&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),E>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!Vr,zr=Vr=null,e.current=n,Ya=r;do{try{for(w=e;null!==Ya;){var I=Ya.flags;if(36&I&&ya(w,Ya.alternate,Ya),128&I){b=void 0;var k=Ya.ref;if(null!==k){var S=Ya.stateNode;Ya.tag,b=S,"function"===typeof k?k(b):k.current=b}}Ya=Ya.nextEffect}}catch(T){if(null===Ya)throw Error(o(330));Vl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);Ya=null,Fi(),Oa=i}else e.current=n;if(Za)Za=!1,el=e,tl=t;else for(Ya=r;null!==Ya;)t=Ya.nextEffect,Ya.nextEffect=null,8&Ya.flags&&((I=Ya).sibling=null,I.stateNode=null),Ya=t;if(0===(r=e.pendingLanes)&&($a=null),1===r?e===ol?sl++:(sl=0,ol=e):sl=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(gl(e,Bi()),Xa)throw Xa=!1,e=Ja,Ja=null,e;return 0!==(8&Oa)||Wi(),null}function Rl(){for(;null!==Ya;){var e=Ya.alternate;hl||null===ul||(0!==(8&Ya.flags)?Ze(Ya,ul)&&(hl=!0):13===Ya.tag&&Ca(e,Ya)&&Ze(Ya,ul)&&(hl=!0));var t=Ya.flags;0!==(256&t)&&ga(e,Ya),0===(512&t)||Za||(Za=!0,Hi(97,(function(){return Ll(),null}))),Ya=Ya.nextEffect}}function Ll(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Gi(e,jl)}return!1}function Ml(e,t){nl.push(t,e),Za||(Za=!0,Hi(97,(function(){return Ll(),null})))}function Fl(e,t){rl.push(t,e),Za||(Za=!0,Hi(97,(function(){return Ll(),null})))}function jl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Oa))throw Error(o(331));var t=Oa;Oa|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(c){if(null===s)throw Error(o(330));Vl(s,c)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(null===s)throw Error(o(330));Vl(s,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Oa=t,Wi(),!0}function Ul(e,t,n){us(e,t=da(0,t=ca(n,t),1)),t=dl(),null!==(e=ml(e,1))&&(Bt(e,1,t),gl(e,t))}function Vl(e,t){if(3===e.tag)Ul(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ul(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$a||!$a.has(r))){var i=fa(n,e=ca(t,e),1);if(us(n,i),i=dl(),null!==(n=ml(n,1)))Bt(n,1,i),gl(n,i);else if("function"===typeof r.componentDidCatch&&(null===$a||!$a.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function zl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,Pa===e&&(La&n)===n&&(4===ja||3===ja&&(62914560&La)===La&&500>Bi()-Ga?kl(e,0):qa|=n),gl(e,t)}function Bl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===ll&&(ll=Va),0===(t=Vt(62914560&~ll))&&(t=4194304))),n=dl(),null!==(e=ml(e,t))&&(Bt(e,t,n),gl(e,n))}function ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Kl(e,t,n,r){return new ql(e,t,n,r)}function Gl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hl(e,t){var n=e.alternate;return null===n?((n=Kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Gl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Ql(n.children,i,s,t);case M:a=8,i|=16;break;case S:a=8,i|=1;break;case T:return(e=Kl(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=s,e;case A:return(e=Kl(13,n,t,i)).type=A,e.elementType=A,e.lanes=s,e;case D:return(e=Kl(19,n,t,i)).elementType=D,e.lanes=s,e;case F:return Yl(n,i,s,t);case j:return(e=Kl(24,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case C:a=9;break e;case N:a=11;break e;case O:a=14;break e;case P:a=16,r=null;break e;case R:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Kl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ql(e,t,n,r){return(e=Kl(7,e,r,t)).lanes=n,e}function Yl(e,t,n,r){return(e=Kl(23,e,r,t)).elementType=F,e.lanes=n,e}function Xl(e,t,n){return(e=Kl(6,e,null,t)).lanes=n,e}function Jl(e,t,n){return(t=Kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zl(e,t,n,r){var i=t.current,s=dl(),a=fl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=wi(n,c,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=cs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),us(i,t),pl(i,a,s),a}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $l(e,t,null!=n&&!0===n.hydrate),t=Kl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=ec(o);a.call(e)}}Zl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var l=i;i=function(){var e=ec(o);l.call(e)}}_l((function(){Zl(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Ho(t),Hs();break;case 5:Rs(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(ui(Ms,1&Ms.current),null!==(t=sa(e,t,n))?t.sibling:null);ui(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return sa(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Go(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Gl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Xi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ls(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Hs(),t=sa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Us=Wr(t.stateNode.containerInfo.firstChild),js=t,s=Vs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Ws.push(s);for(n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Hs();t=t.child}return t;case 5:return Rs(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),Bo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return $o(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ss(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(ui(Ji,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=cr(l,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=sa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===l.tag&&((u=cs(-1,n&-n)).tag=2,us(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),rs(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Xi(i=t.type,t.pendingProps),Uo(e,t,i,s=Xi(i.type,s),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rc.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pl(e,4,dl()),nc(e,4))},tt=function(e){13===e.tag&&(pl(e,67108864,dl()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=dl(),n=fl(e);pl(e,n,t),nc(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bl,Pe=function(e,t,n,r,i){var s=Oa;Oa|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Oa=s)&&(Wa(),Wi())}},Re=function(){0===(49&Oa)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,Bi())}))}Wi()}(),Ll())},Le=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&(Wa(),Wi())}};var ac={Events:[ni,ri,ii,Ae,De,Ll,{current:!1}]},lc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{Ei=uc.inject(cc),Ii=uc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ac,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oa;if(0!==(48&n))return e(t);Oa|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Oa=n,Wi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return sc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return sc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(_l((function(){sc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return sc(e,t,n,!1,r)},t.version="17.0.2"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.jsx=c,t.jsxs=c},117:(e,t,n)=>{"use strict";var r=n(725),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+T(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),x(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+T(a=e[c],c);l+=x(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=x(a=a.value,t,n,u=r+T(a,c++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(f(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)_.call(t,u)&&!E.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>S(o,n))void 0!==l&&0>S(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>S(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],x=[],C=1,N=null,A=3,D=!1,O=!1,P=!1;function R(e){for(var t=I(x);null!==t;){if(null===t.callback)k(x);else{if(!(t.startTime<=e))break;k(x),t.sortIndex=t.expirationTime,E(T,t)}t=I(x)}}function L(e){if(P=!1,R(e),!O)if(null!==I(T))O=!0,n(M);else{var t=I(x);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,P&&(P=!1,i()),D=!0;var s=A;try{for(R(n),N=I(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var a=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?N.callback=a:N===I(T)&&k(T),R(n)}else k(T);N=I(T)}if(null!==N)var l=!0;else{var c=I(x);null!==c&&r(L,c.startTime-n),l=!1}return l}finally{N=null,A=s,D=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return I(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,E(x,e),null===I(T)&&e===I(x)&&(P?i():P=!0,r(L,o-a))):(e.sortIndex=l,E(T,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>y,SDK_VERSION:()=>be,_DEFAULT_ENTRY_NAME:()=>le,_addComponent:()=>de,_addOrOverwriteComponent:()=>fe,_apps:()=>ue,_clearComponents:()=>ye,_components:()=>he,_getProvider:()=>me,_registerComponent:()=>pe,_removeServiceInstance:()=>ge,deleteApp:()=>ke,getApp:()=>Ee,getApps:()=>Ie,initializeApp:()=>_e,onLog:()=>Te,registerVersion:()=>Se,setLogLevel:()=>xe});var t=n(791),r=n(164);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g(){try{return"object"===typeof indexedDB}catch(e){return!1}}class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new y(n,s,t)}}const w=/\{\$([^}]+)}/g;function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(E(n)&&E(s)){if(!_(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function E(e){return null!==e&&"object"===typeof e}function I(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function k(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function S(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function T(e,t){const n=new x(e,t);return n.subscribe.bind(n)}class x{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function N(e){return e&&e._delegate?e._delegate:e}class A{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const D="[DEFAULT]";class O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(ly){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===D?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(ly){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const R=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},F=L.INFO,j={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=j[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class V{constructor(e){this.name=e,this._logLevel=F,this._logHandler=U,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}const z=(e,t)=>t.some((t=>e instanceof t));let B,q;const K=new WeakMap,G=new WeakMap,H=new WeakMap,W=new WeakMap,Q=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return G.get(e);if("objectStoreNames"===t)return e.objectStoreNames||H.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function X(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Z(this),n),$(K.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $(e.apply(Z(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Z(this),t,...r);return H.set(s,t.sort?t.sort():[t]),$(s)}}function J(e){return"function"===typeof e?X(e):(e instanceof IDBTransaction&&function(e){if(G.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));G.set(e,t)}(e),z(e,B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Y):e)}function $(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t($(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&K.set(t,e)})).catch((()=>{})),Q.set(t,e),t}(e);if(W.has(e))return W.get(e);const t=J(e);return t!==e&&(W.set(e,t),Q.set(t,e)),t}const Z=e=>Q.get(e);const ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function re(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ee.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ne.set(t,s),s}Y=(e=>({...e,get:(t,n,r)=>re(t,n)||e.get(t,n,r),has:(t,n)=>!!re(t,n)||e.has(t,n)}))(Y);class ie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const se="@firebase/app",oe="0.9.13",ae=new V("@firebase/app"),le="[DEFAULT]",ce={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,he=new Map;function de(e,t){try{e.container.addComponent(t)}catch(n){ae.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function fe(e,t){e.container.addOrOverwriteComponent(t)}function pe(e){const t=e.name;if(he.has(t))return ae.debug("There were multiple attempts to register component ".concat(t,".")),!1;he.set(t,e);for(const n of ue.values())de(n,e);return!0}function me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le;me(e,t).clearInstance(n)}function ye(){he.clear()}const ve=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class we{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new A("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ve.create("app-deleted",{appName:this._name})}}const be="9.23.0";function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:le,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ve.create("bad-app-name",{appName:String(i)});if(n||(n=d()),!n)throw ve.create("no-options");const s=ue.get(i);if(s){if(_(n,s.options)&&_(r,s.config))return s;throw ve.create("duplicate-app",{appName:i})}const o=new P(i);for(const l of he.values())o.addComponent(l);const a=new we(n,r,o);return ue.set(i,a),a}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;const t=ue.get(e);if(!t&&e===le&&d())return _e();if(!t)throw ve.create("no-app",{appName:e});return t}function Ie(){return Array.from(ue.values())}async function ke(e){const t=e.name;ue.has(t)&&(ue.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Se(e,t,n){var r;let i=null!==(r=ce[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ae.warn(e.join(" "))}pe(new A("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Te(e,t){if(null!==e&&"function"!==typeof e)throw ve.create("invalid-log-argument");!function(e,t){for(const n of R){let r=null;t&&t.level&&(r=M[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:L[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function xe(e){var t;t=e,R.forEach((e=>{e.setLogLevel(t)}))}const Ce="firebase-heartbeat-database",Ne=1,Ae="firebase-heartbeat-store";let De=null;function Oe(){return De||(De=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=$(o);return r&&o.addEventListener("upgradeneeded",(e=>{r($(o.result),e.oldVersion,e.newVersion,$(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ce,Ne,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ae)}}).catch((e=>{throw ve.create("idb-open",{originalErrorMessage:e.message})}))),De}async function Pe(e,t){try{const n=(await Oe()).transaction(Ae,"readwrite"),r=n.objectStore(Ae);await r.put(t,Re(e)),await n.done}catch(n){if(n instanceof y)ae.warn(n.message);else{const e=ve.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Re(e){return"".concat(e.name,"!").concat(e.options.appId)}class Le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Me();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Me(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),je(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),je(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=a(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Me(){return(new Date).toISOString().substring(0,10)}class Fe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!g()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Oe();return await t.transaction(Ae).objectStore(Ae).get(Re(e))}catch(t){if(t instanceof y)ae.warn(t.message);else{const e=ve.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function je(e){return a(JSON.stringify({version:2,heartbeats:e})).length}var Ue;Ue="",pe(new A("platform-logger",(e=>new ie(e)),"PRIVATE")),pe(new A("heartbeat",(e=>new Le(e)),"PRIVATE")),Se(se,oe,Ue),Se(se,oe,"esm2017"),Se("fire-js","");function Ve(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Be=ze,qe=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new V("@firebase/auth");function Ge(e){if(Ke.logLevel<=L.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ke.error("Auth (".concat(be,"): ").concat(e),...n)}}function He(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ye(e,...n)}function We(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ye(e,...n)}function Qe(e,t,n){const r=Object.assign(Object.assign({},Be()),{[t]:n});return new v("auth","Firebase",r).create(t,{appName:e.name})}function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qe.create(e,...n)}function Xe(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ye(t,...r)}}function Je(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ge(t),new Error(t)}function $e(e,t){e||Je(t)}function Ze(){return"http:"===et()||"https:"===et()}function et(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function tt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ze()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class nt{constructor(e,t){this.shortDelay=e,this.longDelay=t,$e(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return tt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rt(e,t){$e(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class it{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const st={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ot=new nt(3e4,6e4);function at(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lt(e,t,n,r){return ct(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=I(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),it.fetch()(ht(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ct(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},st),t);try{const t=new dt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ft(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ft(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ft(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ft(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qe(e,a,o);He(e,a)}}catch(i){if(i instanceof y)throw i;He(e,"network-request-failed",{message:String(i)})}}async function ut(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await lt(e,t,n,r,i);return"mfaPendingCredential"in s&&He(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ht(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class dt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(We(this.auth,"network-request-failed"))),ot.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ft(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=We(e,t,r);return i.customData._tokenResponse=n,i}function pt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function mt(e){return 1e3*Number(e)}function gt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(Ge("Failed to decode base64 JWT payload"),null)}catch(i){return Ge("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function yt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof y&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class vt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class wt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pt(this.lastLoginAt),this.creationTime=pt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yt(e,async function(e,t){return lt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Xe(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Ve(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe("undefined"!==typeof e.idToken,"internal-error"),Xe("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=gt(e);return Xe(t,"internal-error"),Xe("undefined"!==typeof t.exp,"internal-error"),Xe("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xe(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ct(e,{},(async()=>{const n=I({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ht(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",it.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new _t;return n&&(Xe("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xe("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xe("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return Je("not implemented")}}function Et(e,t){Xe("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class It{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ve(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yt(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=N(e),r=await n.getIdToken(t),i=gt(r);Xe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pt(mt(i.auth_time)),issuedAtTime:pt(mt(i.iat)),expirationTime:pt(mt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=N(e);await bt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new It(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await yt(this,async function(e,t){return lt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Xe(v&&E,e,"internal-error");const I=_t.fromJSON(this.name,E);Xe("string"===typeof v,e,"internal-error"),Et(u,e.name),Et(h,e.name),Xe("boolean"===typeof w,e,"internal-error"),Xe("boolean"===typeof b,e,"internal-error"),Et(d,e.name),Et(f,e.name),Et(p,e.name),Et(m,e.name),Et(g,e.name),Et(y,e.name);const k=new It({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new _t;r.updateFromServerResponse(t);const i=new It({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bt(i),i}}const kt=new Map;function St(e){$e(e instanceof Function,"Expected a class definition");let t=kt.get(e);return t?($e(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kt.set(e,t),t)}class Tt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tt.type="NONE";const xt=Tt;function Ct(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Nt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ct(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ct("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?It._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nt(St(xt),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||St(xt);const s=Ct(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=It._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(ly){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(ly){}}))),new Nt(i,e,n)):new Nt(i,e,n)}}function At(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Dt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mt(t))return"Blackberry";if(Ft(t))return"Webos";if(Ot(t))return"Safari";if((t.includes("chrome/")||Pt(t))&&!t.includes("edge/"))return"Chrome";if(Lt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Dt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/firefox\//i.test(e)}function Ot(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/crios\//i.test(e)}function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iemobile/i.test(e)}function Lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/android/i.test(e)}function Mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/blackberry/i.test(e)}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/webos/i.test(e)}function jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ut(){return function(){const e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Vt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return jt(e)||Lt(e)||Ft(e)||Mt(e)||/windows phone/i.test(e)||Rt(e)}function zt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=At(p());break;case"Worker":t="".concat(At(p()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(be,"/").concat(r)}async function Bt(e,t){return lt(e,"GET","/v2/recaptchaConfig",at(e,t))}function qt(e){return void 0!==e&&void 0!==e.enterprise}class Kt{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Gt(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=We("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ht(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Wt{constructor(e){this.type="recaptcha-enterprise",this.auth=Jt(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;qt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Kt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&qt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Gt("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Qt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Wt(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Yt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Xt{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $t(this),this.idTokenSubscription=new $t(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=St(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Nt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?N(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(St(e))}))}async initializeRecaptchaConfig(){const e=await Bt(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Kt(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Wt(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new v("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&St(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await Nt.create(this,[St(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Xe(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ke.logLevel<=L.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ke.warn("Auth (".concat(be,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Jt(e){return N(e)}class $t{constructor(e){this.auth=e,this.observer=null,this.addObserver=T((e=>this.observer=e))}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Zt{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Je("not implemented")}_getIdTokenResponse(e){return Je("not implemented")}_linkToIdToken(e,t){return Je("not implemented")}_getReauthenticationResolver(e){return Je("not implemented")}}async function en(e,t){return lt(e,"POST","/v1/accounts:update",t)}async function tn(e,t){return ut(e,"POST","/v1/accounts:signInWithPassword",at(e,t))}async function nn(e,t){return lt(e,"POST","/v1/accounts:sendOobCode",at(e,t))}class rn extends Zt{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rn(e,t,"password")}static _fromEmailAndCode(e,t){return new rn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Qt(e,n,"signInWithPassword");return tn(e,t)}return tn(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Qt(e,n,"signInWithPassword");return tn(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithEmailLink",at(e,t))}(e,{email:this._email,oobCode:this._password});default:He(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return en(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithEmailLink",at(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:He(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sn(e,t){return ut(e,"POST","/v1/accounts:signInWithIdp",at(e,t))}class on extends Zt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new on(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):He("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ve(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new on(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return sn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=I(t)}return e}}const an={USER_NOT_FOUND:"user-not-found"};class ln extends Zt{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ln({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ln({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithPhoneNumber",at(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ut(e,"POST","/v1/accounts:signInWithPhoneNumber",at(e,t));if(n.temporaryProof)throw ft(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithPhoneNumber",at(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),an)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ln({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class cn{constructor(e){var t,n,r,i,s,o;const a=k(S(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Xe(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=k(S(e)).link,n=t?k(S(t)).deep_link_id:null,r=k(S(e)).deep_link_id;return(r?k(S(r)).link:null)||r||n||t||e}(e);try{return new cn(t)}catch(ly){return null}}}class un{constructor(){this.providerId=un.PROVIDER_ID}static credential(e,t){return rn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cn.parseLink(t);return Xe(n,"argument-error"),rn._fromEmailAndCode(e,n.code,n.tenantId)}}un.PROVIDER_ID="password",un.EMAIL_PASSWORD_SIGN_IN_METHOD="password",un.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dn extends hn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fn extends dn{constructor(){super("facebook.com")}static credential(e){return on._fromParams({providerId:fn.PROVIDER_ID,signInMethod:fn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fn.credentialFromTaggedObject(e)}static credentialFromError(e){return fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fn.credential(t.oauthAccessToken)}catch(ly){return null}}}fn.FACEBOOK_SIGN_IN_METHOD="facebook.com",fn.PROVIDER_ID="facebook.com";class pn extends dn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return on._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return pn.credential(n,r)}catch(ly){return null}}}pn.GOOGLE_SIGN_IN_METHOD="google.com",pn.PROVIDER_ID="google.com";class mn extends dn{constructor(){super("github.com")}static credential(e){return on._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mn.credentialFromTaggedObject(e)}static credentialFromError(e){return mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mn.credential(t.oauthAccessToken)}catch(ly){return null}}}mn.GITHUB_SIGN_IN_METHOD="github.com",mn.PROVIDER_ID="github.com";class gn extends dn{constructor(){super("twitter.com")}static credential(e,t){return on._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gn.credential(n,r)}catch(ly){return null}}}async function yn(e,t){return ut(e,"POST","/v1/accounts:signUp",at(e,t))}gn.TWITTER_SIGN_IN_METHOD="twitter.com",gn.PROVIDER_ID="twitter.com";class vn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await It._fromIdTokenResponse(e,n,r),s=wn(n);return new vn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=wn(n);return new vn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function wn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bn extends y{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bn(e,t,n,r)}}function _n(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bn._fromErrorAndOperation(e,n,t,r);throw n}))}async function En(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await yt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vn._forOperation(e,"link",r)}async function In(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await yt(e,_n(r,i,t,e),n);Xe(s.idToken,r,"internal-error");const o=gt(s.idToken);Xe(o,r,"internal-error");const{sub:a}=o;return Xe(e.uid===a,r,"user-mismatch"),vn._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&He(r,"user-mismatch"),s}}async function kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await _n(e,r,t),s=await vn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Sn(e,t){return kn(Jt(e),t)}function Tn(e,t,n){var r;Xe((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xe("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xe(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xe(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function xn(e,t,n){var r;const i=Jt(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Qt(i,s,"signUpPassword");o=yn(i,e)}else o=yn(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Qt(i,s,"signUpPassword");return yn(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await vn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function Cn(e,t,n){return Sn(N(e),un.credential(t,n))}async function Nn(e,t){const n=N(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Tn(n.auth,r,t);const{email:i}=await async function(e,t){return nn(e,t)}(n.auth,r);i!==e.email&&await e.reload()}new WeakMap;const An="__sak";class Dn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(An,"1"),this.storage.removeItem(An),Promise.resolve(!0)):Promise.resolve(!1)}catch(ly){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class On extends Dn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=p();return Ot(e)||jt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Vt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ut()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}On.type="LOCAL";class Pn extends Dn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pn.type="SESSION";class Rn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Rn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rn.receivers=[];class Mn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ln("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Fn(){return window}function jn(){return"undefined"!==typeof Fn().WorkerGlobalScope&&"function"===typeof Fn().importScripts}const Un="firebaseLocalStorageDb",Vn="firebaseLocalStorage",zn="fbase_key";class Bn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function qn(e,t){return e.transaction([Vn],t?"readwrite":"readonly").objectStore(Vn)}function Kn(){const e=indexedDB.open(Un,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Vn,{keyPath:zn})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Vn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Un);return new Bn(e).toPromise()}(),t(await Kn()))}))}))}async function Gn(e,t,n){const r=qn(e,!0).put({[zn]:t,value:n});return new Bn(r).toPromise()}function Hn(e,t){const n=qn(e,!0).delete(t);return new Bn(n).toPromise()}class Wn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Kn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rn._getInstance(jn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(ly){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kn();return await Gn(e,An,"1"),await Hn(e,An),!0}catch(ly){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Gn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=qn(e,!1).get(t),r=await new Bn(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=qn(e,!1).getAll();return new Bn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wn.type="LOCAL";Ht("rcb"),new nt(3e4,6e4);const Qn="recaptcha";async function Yn(e,t,n){var r;const i=await n.verify();try{let s;if(Xe("string"===typeof i,e,"argument-error"),Xe(n.type===Qn,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xe("enroll"===t.type,e,"internal-error");const n=await function(e,t){return lt(e,"POST","/v2/accounts/mfaEnrollment:start",at(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xe("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xe(n,e,"missing-multi-factor-info");const o=await function(e,t){return lt(e,"POST","/v2/accounts/mfaSignIn:start",at(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return lt(e,"POST","/v1/accounts:sendVerificationCode",at(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Xn{constructor(e){this.providerId=Xn.PROVIDER_ID,this.auth=Jt(e)}verifyPhoneNumber(e,t){return Yn(this.auth,e,N(t))}static credential(e,t){return ln._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xn.credentialFromTaggedObject(t)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ln._fromTokenResponse(n,r):null}}Xn.PROVIDER_ID="phone",Xn.PHONE_SIGN_IN_METHOD="phone";class Jn extends Zt{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $n(e){return kn(e.auth,new Jn(e),e.bypassAuthState)}function Zn(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),In(n,new Jn(e),e.bypassAuthState)}async function er(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),En(n,new Jn(e),e.bypassAuthState)}class tr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $n;case"linkViaPopup":case"linkViaRedirect":return er;case"reauthViaPopup":case"reauthViaRedirect":return Zn;default:He(this.auth,"internal-error")}}resolve(e){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nr=new nt(2e3,1e4);class rr extends tr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rr.currentPopupAction&&rr.currentPopupAction.cancel(),rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){$e(1===this.filter.length,"Popup operations only handle one event");const e=Ln();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(We(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(We(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(We(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,nr.get())};e()}}rr.currentPopupAction=null;new Map;new nt(3e4,6e4);new nt(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);encodeURIComponent("fac");var ir="@firebase/auth",sr="0.23.2";class or{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=h())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var ar;function lr(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function cr(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}ar="Browser",pe(new A("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:ar,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zt(ar)},c=new Xt(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(St);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pe(new A("auth-internal",(e=>(e=>new or(e))(Jt(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Se(ir,sr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ar)),Se(ir,sr,"esm2017");var ur=function(){return ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ur.apply(this,arguments)},hr=function(e){return{loading:void 0===e||null===e,value:e}},dr=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return ur(ur({},e),{error:t.error,loading:!1,value:void 0});case"reset":return hr(t.defaultValue);case"value":return ur(ur({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),hr(n)),i=r[0],s=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,t.useCallback)((function(e){s({type:"error",error:e})}),[]),l=(0,t.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,o,a,l,i.value])},fr=function(e,n){var r=dr((function(){return e.currentUser})),i=r.error,s=r.loading,o=r.setError,a=r.setValue,l=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return N(e).onAuthStateChanged(t,n,r)}(e,(function(e){return lr(void 0,void 0,void 0,(function(){var t;return cr(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){t()}}),[e]),[l,s,i]},pr=function(e,n){var r=(0,t.useState)(),i=r[0],s=r[1],o=(0,t.useState)(),a=o[0],l=o[1],c=(0,t.useState)(!1),u=c[0],h=c[1],d=(0,t.useCallback)((function(t,r){return lr(void 0,void 0,void 0,(function(){var i,o;return cr(this,(function(a){switch(a.label){case 0:h(!0),s(void 0),a.label=1;case 1:return a.trys.push([1,5,6,7]),[4,xn(e,t,r)];case 2:return i=a.sent(),n&&n.sendEmailVerification&&i.user?[4,Nn(i.user,n.emailVerificationOptions)]:[3,4];case 3:a.sent(),a.label=4;case 4:return l(i),[2,i];case 5:return o=a.sent(),s(o),[3,7];case 6:return h(!1),[7];case 7:return[2]}}))}))}),[e,n]);return[d,a,u,i]},mr=function(e){var n=(0,t.useState)(),r=n[0],i=n[1],s=(0,t.useState)(),o=s[0],a=s[1],l=(0,t.useState)(!1),c=l[0],u=l[1],h=(0,t.useCallback)((function(t,n){return lr(void 0,void 0,void 0,(function(){var r,s;return cr(this,(function(o){switch(o.label){case 0:u(!0),i(void 0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,Cn(e,t,n)];case 2:return r=o.sent(),a(r),[2,r];case 3:return s=o.sent(),i(s),[3,5];case 4:return u(!1),[7];case 5:return[2]}}))}))}),[e]);return[h,o,c,r]};class gr{constructor(e,t){this._delegate=e,this.firebase=t,de(e,new A("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),ke(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){de(this._delegate,e)}_addOrOverwriteComponent(e){fe(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const yr=new v("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const vr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=_e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(b(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Se,setLogLevel:xe,onLog:Te,apps:null,SDK_VERSION:be,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(pe(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw yr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&c(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!b(n,e=e||le))throw yr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(gr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){c(n,e)},createSubscribe:T,ErrorFactory:v,deepExtend:c}),n}(),wr=new V("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){wr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&wr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const br=vr;!function(e){Se("@firebase/app-compat","0.2.13",e)}();br.registerVersion("firebase","9.23.0","app-compat");const _r=()=>"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12);var Er,Ir="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kr={},Sr=Sr||{},Tr=Ir||self;function xr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Cr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Nr="closure_uid_"+(1e9*Math.random()>>>0),Ar=0;function Dr(e,t,n){return e.call.apply(e.bind,arguments)}function Or(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Pr(e,t,n){return(Pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dr:Or).apply(null,arguments)}function Rr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Lr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Mr(){this.s=this.s,this.o=this.o}Mr.prototype.s=!1,Mr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Nr)&&e[Nr]||(e[Nr]=++Ar))},Mr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function jr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ur(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(xr(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Vr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Vr.prototype.h=function(){this.defaultPrevented=!0};var zr=function(){if(!Tr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Tr.addEventListener("test",(()=>{}),t),Tr.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function Br(e){return/^[\s\xa0]*$/.test(e)}function qr(){var e=Tr.navigator;return e&&(e=e.userAgent)?e:""}function Kr(e){return-1!=qr().indexOf(e)}function Gr(e){return Gr[" "](e),e}Gr[" "]=function(){};var Hr,Wr,Qr=Kr("Opera"),Yr=Kr("Trident")||Kr("MSIE"),Xr=Kr("Edge"),Jr=Xr||Yr,$r=Kr("Gecko")&&!(-1!=qr().toLowerCase().indexOf("webkit")&&!Kr("Edge"))&&!(Kr("Trident")||Kr("MSIE"))&&!Kr("Edge"),Zr=-1!=qr().toLowerCase().indexOf("webkit")&&!Kr("Edge");function ei(){var e=Tr.document;return e?e.documentMode:void 0}e:{var ti="",ni=function(){var e=qr();return $r?/rv:([^\);]+)(\)|;)/.exec(e):Xr?/Edge\/([\d\.]+)/.exec(e):Yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Zr?/WebKit\/(\S+)/.exec(e):Qr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ni&&(ti=ni?ni[1]:""),Yr){var ri=ei();if(null!=ri&&ri>parseFloat(ti)){Hr=String(ri);break e}}Hr=ti}if(Tr.document&&Yr){var ii=ei();Wr=ii||(parseInt(Hr,10)||void 0)}else Wr=void 0;var si=Wr;function oi(e,t){if(Vr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($r){e:{try{Gr(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ai[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&oi.$.h.call(this)}}Lr(oi,Vr);var ai={2:"touch",3:"pen",4:"mouse"};oi.prototype.h=function(){oi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var li="closure_listenable_"+(1e6*Math.random()|0),ci=0;function ui(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ci,this.fa=this.ia=!1}function hi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function di(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function fi(e){const t={};for(const n in e)t[n]=e[n];return t}const pi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<pi.length;t++)n=pi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gi(e){this.src=e,this.g={},this.h=0}function yi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Fr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(hi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function vi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}gi.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=vi(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ui(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var wi="closure_lm_"+(1e6*Math.random()|0),bi={};function _i(e,t,n,r,i){if(r&&r.once)return Ii(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)_i(e,t[s],n,r,i);return null}return n=Ai(n),e&&e[li]?e.O(t,n,Cr(r)?!!r.capture:!!r,i):Ei(e,t,n,!1,r,i)}function Ei(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Cr(i)?!!i.capture:!!i,a=Ci(e);if(a||(e[wi]=a=new gi(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=xi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ti(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ii(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ii(e,t[s],n,r,i);return null}return n=Ai(n),e&&e[li]?e.P(t,n,Cr(r)?!!r.capture:!!r,i):Ei(e,t,n,!0,r,i)}function ki(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ki(e,t[s],n,r,i);else r=Cr(r)?!!r.capture:!!r,n=Ai(n),e&&e[li]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=vi(s=e.g[t],n,r,i))&&(hi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ci(e))&&(t=e.g[t.toString()],e=-1,t&&(e=vi(t,n,r,i)),(n=-1<e?t[e]:null)&&Si(n))}function Si(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[li])yi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ti(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ci(t))?(yi(n,e),0==n.h&&(n.src=null,t[wi]=null)):hi(e)}}}function Ti(e){return e in bi?bi[e]:bi[e]="on"+e}function xi(e,t){if(e.fa)e=!0;else{t=new oi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Si(e),e=n.call(r,t)}return e}function Ci(e){return(e=e[wi])instanceof gi?e:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ai(e){return"function"===typeof e?e:(e[Ni]||(e[Ni]=function(t){return e.handleEvent(t)}),e[Ni])}function Di(){Mr.call(this),this.i=new gi(this),this.S=this,this.J=null}function Oi(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Vr(t,e);else if(t instanceof Vr)t.target=t.target||e;else{var i=t;mi(t=new Vr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Pi(o,r,!0,t)&&i}if(i=Pi(o=t.g=e,r,!0,t)&&i,i=Pi(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Pi(o=t.g=n[s],r,!1,t)&&i}function Pi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&yi(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Lr(Di,Mr),Di.prototype[li]=!0,Di.prototype.removeEventListener=function(e,t,n,r){ki(this,e,t,n,r)},Di.prototype.N=function(){if(Di.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hi(n[r]);delete t.g[e],t.h--}}this.J=null},Di.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Di.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ri=Tr.JSON.stringify;function Li(){var e=Bi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Mi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Fi),(e=>e.reset()));class Fi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ji(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ui(e){Tr.setTimeout((()=>{throw e}),0)}let Vi,zi=!1,Bi=new class{constructor(){this.h=this.g=null}add(e,t){const n=Mi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},qi=()=>{const e=Tr.Promise.resolve(void 0);Vi=()=>{e.then(Ki)}};var Ki=()=>{for(var e;e=Li();){try{e.h.call(e.g)}catch(n){Ui(n)}var t=Mi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zi=!1};function Gi(e,t){Di.call(this),this.h=e||1,this.g=t||Tr,this.j=Pr(this.qb,this),this.l=Date.now()}function Hi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Wi(e,t,n){if("function"===typeof e)n&&(e=Pr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Pr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Tr.setTimeout(e,t||0)}function Qi(e){e.g=Wi((()=>{e.g=null,e.i&&(e.i=!1,Qi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Lr(Gi,Di),(Er=Gi.prototype).ga=!1,Er.T=null,Er.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Oi(this,"tick"),this.ga&&(Hi(this),this.start()))}},Er.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Er.N=function(){Gi.$.N.call(this),Hi(this),delete this.g};class Yi extends Mr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qi(this)}N(){super.N(),this.g&&(Tr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(e){Mr.call(this),this.h=e,this.g={}}Lr(Xi,Mr);var Ji=[];function $i(e,t,n,r){Array.isArray(n)||(n&&(Ji[0]=n.toString()),n=Ji);for(var i=0;i<n.length;i++){var s=_i(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Zi(e){di(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Si(e)}),e),e.g={}}function es(){this.g=!0}function ts(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ri(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Xi.prototype.N=function(){Xi.$.N.call(this),Zi(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},es.prototype.Ea=function(){this.g=!1},es.prototype.info=function(){};var ns={},rs=null;function is(){return rs=rs||new Di}function ss(e){Vr.call(this,ns.Ta,e)}function os(e){const t=is();Oi(t,new ss(t))}function as(e,t){Vr.call(this,ns.STAT_EVENT,e),this.stat=t}function ls(e){const t=is();Oi(t,new as(t,e))}function cs(e,t){Vr.call(this,ns.Ua,e),this.size=t}function us(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Tr.setTimeout((function(){e()}),t)}ns.Ta="serverreachability",Lr(ss,Vr),ns.STAT_EVENT="statevent",Lr(as,Vr),ns.Ua="timingevent",Lr(cs,Vr);var hs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ds={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fs(){}function ps(e){return e.h||(e.h=e.i())}function ms(){}fs.prototype.h=null;var gs,ys={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vs(){Vr.call(this,"d")}function ws(){Vr.call(this,"c")}function bs(){}function _s(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Xi(this),this.P=Is,e=Jr?125:void 0,this.V=new Gi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}Lr(vs,Vr),Lr(ws,Vr),Lr(bs,fs),bs.prototype.g=function(){return new XMLHttpRequest},bs.prototype.i=function(){return{}},gs=new bs;var Is=45e3,ks={},Ss={};function Ts(e,t,n){e.L=1,e.v=Gs(Vs(t)),e.s=n,e.S=!0,xs(e,null)}function xs(e,t){e.G=Date.now(),Ds(e),e.A=Vs(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),io(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Es,e.g=oa(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Yi(Pr(e.Pa,e,e.g),e.O)),$i(e.U,e.g,"readystatechange",e.nb),t=e.I?fi(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),os(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Cs(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ns(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=As(e,n),r==Ss){4==t&&(e.o=4,ls(14),i=!1),ts(e.j,e.m,null,"[Incomplete Response]");break}if(r==ks){e.o=4,ls(15),ts(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ts(e.j,e.m,r,null),Ms(e,r)}Cs(e)&&r!=Ss&&r!=ks&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ls(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$o(t),t.M=!0,ls(11))):(ts(e.j,e.m,n,"[Invalid Chunked Response]"),Ls(e),Rs(e))}function As(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ss:(n=Number(t.substring(n,r)),isNaN(n)?ks:(r+=1)+n>t.length?Ss:(t=t.slice(r,r+n),e.C=r+n,t))}function Ds(e){e.Y=Date.now()+e.P,Os(e,e.P)}function Os(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=us(Pr(e.lb,e),t)}function Ps(e){e.B&&(Tr.clearTimeout(e.B),e.B=null)}function Rs(e){0==e.l.H||e.J||ta(e.l,e)}function Ls(e){Ps(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Hi(e.V),Zi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ms(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ho(n.i,e)))if(!e.K&&ho(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ea(n),Ko(n)}Jo(n),ls(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=us(Pr(n.ib,n),6e3));if(1>=uo(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ra(n,11)}else if((e.K||n.g==e)&&ea(n),!Br(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fo(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ks(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=sa(r,r.J?r.pa:null,r.Y),o.K){po(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ps(a),Ds(a)),r.g=o}else Xo(r);0<n.j.length&&Ho(n)}else"stop"!=c[0]&&"close"!=c[0]||ra(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ra(n,7):qo(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}os()}catch(c){}}function Fs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(xr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(xr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Er=_s.prototype).setTimeout=function(e){this.P=e},Er.nb=function(e){e=e.target;const t=this.M;t&&3==Fo(e)?t.l():this.Pa(e)},Er.Pa=function(e){try{if(e==this.g)e:{const u=Fo(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Jr||this.g&&(this.h.h||this.g.ja()||jo(this.g)))){this.J||4!=u||7==t||os(),Ps(this);var n=this.g.da();this.ca=n;t:if(Cs(this)){var r=jo(this.g);e="";var i=r.length,s=4==Fo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ls(this),Rs(this);var o="";break t}this.h.i=new Tr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Br(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ls(12),Ls(this),Rs(this);break e}ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,n)}this.S?(Ns(this,u,o),Jr&&this.i&&3==u&&($i(this.U,this.V,"tick",this.mb),this.V.start())):(ts(this.j,this.m,o,null),Ms(this,o)),4==u&&Ls(this),this.i&&!this.J&&(4==u?ta(this.l,this):(this.i=!1,Ds(this)))}else(function(e){const t={};e=(e.g&&2<=Fo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Br(e[r]))continue;var n=ji(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ls(12)):(this.o=0,ls(13)),Ls(this),Rs(this)}}}catch(u){}},Er.mb=function(){if(this.g){var e=Fo(this.g),t=this.g.ja();this.C<t.length&&(Ps(this),Ns(this,e,t),this.i&&4!=e&&Ds(this))}},Er.cancel=function(){this.J=!0,Ls(this)},Er.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(os(),ls(17)),Ls(this),this.o=2,Rs(this)):Os(this,this.Y-e)};var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Us(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Us){this.h=e.h,zs(this,e.j),this.s=e.s,this.g=e.g,Bs(this,e.m),this.l=e.l;var t=e.i,n=new eo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),qs(this,n),this.o=e.o}else e&&(t=String(e).match(js))?(this.h=!1,zs(this,t[1]||"",!0),this.s=Hs(t[2]||""),this.g=Hs(t[3]||"",!0),Bs(this,t[4]),this.l=Hs(t[5]||"",!0),qs(this,t[6]||"",!0),this.o=Hs(t[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}function Vs(e){return new Us(e)}function zs(e,t,n){e.j=n?Hs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Bs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function qs(e,t,n){t instanceof eo?(e.i=t,function(e,t){t&&!e.j&&(to(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(no(this,t),io(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ws(t,$s)),e.i=new eo(t,e.h))}function Ks(e,t,n){e.i.set(t,n)}function Gs(e){return Ks(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Hs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ws(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Qs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Qs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Us.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ws(t,Ys,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ws(t,Ys,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ws(n,"/"==n.charAt(0)?Js:Xs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ws(n,Zs)),e.join("")};var Ys=/[#\/\?@]/g,Xs=/[#\?:]/g,Js=/[#\?]/g,$s=/[#\?@]/g,Zs=/#/g;function eo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function to(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function no(e,t){to(e),t=so(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ro(e,t){return to(e),t=so(e,t),e.g.has(t)}function io(e,t,n){no(e,t),0<n.length&&(e.i=null,e.g.set(so(e,t),jr(n)),e.h+=n.length)}function so(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Er=eo.prototype).add=function(e,t){to(this),this.i=null,e=so(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Er.forEach=function(e,t){to(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Er.ta=function(){to(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Er.Z=function(e){to(this);let t=[];if("string"===typeof e)ro(this,e)&&(t=t.concat(this.g.get(so(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Er.set=function(e,t){return to(this),this.i=null,ro(this,e=so(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Er.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Er.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var oo=class{constructor(e,t){this.g=e,this.map=t}};function ao(e){this.l=e||lo,Tr.PerformanceNavigationTiming?e=0<(e=Tr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Tr.g&&Tr.g.Ka&&Tr.g.Ka()&&Tr.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lo=10;function co(e){return!!e.h||!!e.g&&e.g.size>=e.j}function uo(e){return e.h?1:e.g?e.g.size:0}function ho(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fo(e,t){e.g?e.g.add(t):e.h=t}function po(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return jr(e.i)}ao.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var go,yo=class{stringify(e){return Tr.JSON.stringify(e,void 0)}parse(e){return Tr.JSON.parse(e,void 0)}};function vo(){this.g=new yo}function wo(e,t,n){const r=n||"";try{Fs(e,(function(e,n){let i=e;Cr(e)&&(i=Ri(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function _o(e){this.l=e.fc||null,this.j=e.ob||!1}function Eo(e,t){Di.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Io,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lr(_o,fs),_o.prototype.g=function(){return new Eo(this.l,this.j)},_o.prototype.i=(go={},function(){return go}),Lr(Eo,Di);var Io=0;function ko(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function So(e){e.readyState=4,e.l=null,e.j=null,e.A=null,To(e)}function To(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Er=Eo.prototype).open=function(e,t){if(this.readyState!=Io)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,To(this)},Er.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Tr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Er.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,So(this)),this.readyState=Io},Er.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Tr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ko(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Er.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?So(this):To(this),3==this.readyState&&ko(this)}},Er.Za=function(e){this.g&&(this.response=this.responseText=e,So(this))},Er.Ya=function(e){this.g&&(this.response=e,So(this))},Er.ka=function(){this.g&&So(this)},Er.setRequestHeader=function(e,t){this.v.append(e,t)},Er.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Er.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xo=Tr.JSON.parse;function Co(e){Di.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=No,this.L=this.M=!1}Lr(Co,Di);var No="",Ao=/^https?$/i,Do=["POST","PUT"];function Oo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Po(e),Lo(e)}function Po(e){e.F||(e.F=!0,Oi(e,"complete"),Oi(e,"error"))}function Ro(e){if(e.h&&"undefined"!=typeof Sr&&(!e.C[1]||4!=Fo(e)||2!=e.da()))if(e.v&&4==Fo(e))Wi(e.La,0,e);else if(Oi(e,"readystatechange"),4==Fo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(js)[1]||null;!i&&Tr.self&&Tr.self.location&&(i=Tr.self.location.protocol.slice(0,-1)),r=!Ao.test(i?i.toLowerCase():"")}n=r}if(n)Oi(e,"complete"),Oi(e,"success");else{e.m=6;try{var s=2<Fo(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Po(e)}}finally{Lo(e)}}}function Lo(e,t){if(e.g){Mo(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Oi(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Mo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Tr.clearTimeout(e.A),e.A=null)}function Fo(e){return e.g?e.g.readyState:0}function jo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case No:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(qa){return null}}function Uo(e){let t="";return di(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Vo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Uo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ks(e,t,n))}function zo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bo(e){this.Ga=0,this.j=[],this.l=new es,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zo("baseRetryDelayMs",5e3,e),this.hb=zo("retryDelaySeedMs",1e4,e),this.eb=zo("forwardChannelMaxRetries",2,e),this.xa=zo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ao(e&&e.concurrentRequestLimit),this.Ja=new vo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qo(e){if(Go(e),3==e.H){var t=e.W++,n=Vs(e.I);if(Ks(n,"SID",e.K),Ks(n,"RID",t),Ks(n,"TYPE","terminate"),Qo(e,n),(t=new _s(e,e.l,t)).L=2,t.v=Gs(Vs(n)),n=!1,Tr.navigator&&Tr.navigator.sendBeacon)try{n=Tr.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Tr.Image&&((new Image).src=t.v,n=!0),n||(t.g=oa(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ds(t)}ia(e)}function Ko(e){e.g&&($o(e),e.g.cancel(),e.g=null)}function Go(e){Ko(e),e.u&&(Tr.clearTimeout(e.u),e.u=null),ea(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Tr.clearTimeout(e.m),e.m=null)}function Ho(e){if(!co(e.i)&&!e.m){e.m=!0;var t=e.Na;Vi||qi(),zi||(Vi(),zi=!0),Bi.add(t,e),e.C=0}}function Wo(e,t){var n;n=t?t.m:e.W++;const r=Vs(e.I);Ks(r,"SID",e.K),Ks(r,"RID",n),Ks(r,"AID",e.V),Qo(e,r),e.o&&e.s&&Vo(r,e.o,e.s),n=new _s(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Yo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),fo(e.i,n),Ts(n,r,t)}function Qo(e,t){e.na&&di(e.na,(function(e,n){Ks(t,n,e)})),e.h&&Fs({},(function(e,n){Ks(t,n,e)}))}function Yo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Pr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{wo(a,e,"req"+n+"_")}catch(el){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Xo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Vi||qi(),zi||(Vi(),zi=!0),Bi.add(t,e),e.A=0}}function Jo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=us(Pr(e.Ma,e),na(e,e.A)),e.A++,!0)}function $o(e){null!=e.B&&(Tr.clearTimeout(e.B),e.B=null)}function Zo(e){e.g=new _s(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Vs(e.wa);Ks(t,"RID","rpc"),Ks(t,"SID",e.K),Ks(t,"AID",e.V),Ks(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ks(t,"TO",e.qa),Ks(t,"TYPE","xmlhttp"),Qo(e,t),e.o&&e.s&&Vo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Gs(Vs(t)),n.s=null,n.S=!0,xs(n,e)}function ea(e){null!=e.v&&(Tr.clearTimeout(e.v),e.v=null)}function ta(e,t){var n=null;if(e.g==t){ea(e),$o(e),e.g=null;var r=2}else{if(!ho(e.i,t))return;n=t.F,po(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Oi(r=is(),new cs(r,n)),Ho(e)}else Xo(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(uo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=us(Pr(e.Na,e,t),na(e,e.C)),e.C++,!0))}(e,t)||2==r&&Jo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ra(e,5);break;case 4:ra(e,10);break;case 3:ra(e,6);break;default:ra(e,2)}}function na(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ra(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Pr(e.pb,e);n||(n=new Us("//www.google.com/images/cleardot.gif"),Tr.location&&"http"==Tr.location.protocol||zs(n,"https"),Gs(n)),function(e,t){const n=new es;if(Tr.Image){const r=new Image;r.onload=Rr(bo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Rr(bo,n,r,"TestLoadImage: error",!1,t),r.onabort=Rr(bo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Rr(bo,n,r,"TestLoadImage: timeout",!1,t),Tr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ls(2);e.H=0,e.h&&e.h.za(t),ia(e),Go(e)}function ia(e){if(e.H=0,e.ma=[],e.h){const t=mo(e.i);0==t.length&&0==e.j.length||(Ur(e.ma,t),Ur(e.ma,e.j),e.i.i.length=0,jr(e.j),e.j.length=0),e.h.ya()}}function sa(e,t,n){var r=n instanceof Us?Vs(n):new Us(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Bs(r,r.m);else{var i=Tr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Us(null);r&&zs(s,r),t&&(s.g=t),i&&Bs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Ks(r,n,t),Ks(r,"VER",e.ra),Qo(e,r),r}function oa(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Co(new _o({ob:!0})):new Co(e.va)).Oa(e.J),t}function aa(){}function la(){if(Yr&&!(10<=Number(si)))throw Error("Environmental error: no available transport.")}function ca(e,t){Di.call(this),this.g=new Bo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Br(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Br(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new da(this)}function ua(e){vs.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ha(){ws.call(this),this.status=1}function da(e){this.g=e}function fa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function pa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ma(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Er=Co.prototype).Oa=function(e){this.M=e},Er.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gs.g(),this.C=this.u?ps(this.u):ps(gs),this.g.onreadystatechange=Pr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Oo(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Tr.FormData&&e instanceof Tr.FormData,!(0<=Fr(Do,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Mo(this),0<this.B&&((this.L=function(e){return Yr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pr(this.ua,this)):this.A=Wi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Oo(this,s)}},Er.ua=function(){"undefined"!=typeof Sr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},Er.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Oi(this,"complete"),Oi(this,"abort"),Lo(this))},Er.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),Co.$.N.call(this)},Er.La=function(){this.s||(this.G||this.v||this.l?Ro(this):this.kb())},Er.kb=function(){Ro(this)},Er.isActive=function(){return!!this.g},Er.da=function(){try{return 2<Fo(this)?this.g.status:-1}catch(go){return-1}},Er.ja=function(){try{return this.g?this.g.responseText:""}catch(go){return""}},Er.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xo(t)}},Er.Ia=function(){return this.m},Er.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Er=Bo.prototype).ra=8,Er.H=1,Er.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new _s(this,this.l,e);let s=this.s;if(this.U&&(s?(s=fi(s),mi(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yo(this,i,t),Ks(n=Vs(this.I),"RID",e),Ks(n,"CVER",22),this.F&&Ks(n,"X-HTTP-Session-Id",this.F),Qo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Uo(s)))+"&"+t:this.o&&Vo(n,this.o,s)),fo(this.i,i),this.bb&&Ks(n,"TYPE","init"),this.P?(Ks(n,"$req",t),Ks(n,"SID","null"),i.aa=!0,Ts(i,n,null)):Ts(i,n,t),this.H=2}}else 3==this.H&&(e?Wo(this,e):0==this.j.length||co(this.i)||Wo(this))},Er.Ma=function(){if(this.u=null,Zo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=us(Pr(this.jb,this),e)}},Er.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ls(10),Ko(this),Zo(this))},Er.ib=function(){null!=this.v&&(this.v=null,Ko(this),Jo(this),ls(19))},Er.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ls(2)):(this.l.info("Failed to ping google.com"),ls(1))},Er.isActive=function(){return!!this.h&&this.h.isActive(this)},(Er=aa.prototype).Ba=function(){},Er.Aa=function(){},Er.za=function(){},Er.ya=function(){},Er.isActive=function(){return!0},Er.Va=function(){},la.prototype.g=function(e,t){return new ca(e,t)},Lr(ca,Di),ca.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ls(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=sa(e,null,e.Y),Ho(e)},ca.prototype.close=function(){qo(this.g)},ca.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ri(e),e=n);t.j.push(new oo(t.fb++,e)),3==t.H&&Ho(t)},ca.prototype.N=function(){this.g.h=null,delete this.j,qo(this.g),delete this.g,ca.$.N.call(this)},Lr(ua,vs),Lr(ha,ws),Lr(da,aa),da.prototype.Ba=function(){Oi(this.g,"a")},da.prototype.Aa=function(e){Oi(this.g,new ua(e))},da.prototype.za=function(e){Oi(this.g,new ha)},da.prototype.ya=function(){Oi(this.g,"b")},Lr(fa,(function(){this.blockSize=-1})),fa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fa.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)pa(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){pa(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){pa(this,r),i=0;break}}this.h=i,this.i+=t},fa.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ga={};function ya(e){return-128<=e&&128>e?function(e,t){var n=ga;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ma([0|e],0>e?-1:0)})):new ma([0|e],0>e?-1:0)}function va(e){if(isNaN(e)||!isFinite(e))return ba;if(0>e)return Sa(va(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=wa;return new ma(t,0)}var wa=4294967296,ba=ya(0),_a=ya(1),Ea=ya(16777216);function Ia(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ka(e){return-1==e.h}function Sa(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ma(n,~e.h).add(_a)}function Ta(e,t){return e.add(Sa(t))}function xa(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ca(e,t){this.g=e,this.h=t}function Na(e,t){if(Ia(t))throw Error("division by zero");if(Ia(e))return new Ca(ba,ba);if(ka(e))return t=Na(Sa(e),t),new Ca(Sa(t.g),Sa(t.h));if(ka(t))return t=Na(e,Sa(t)),new Ca(Sa(t.g),t.h);if(30<e.g.length){if(ka(e)||ka(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_a,r=t;0>=r.X(e);)n=Aa(n),r=Aa(r);var i=Da(n,1),s=Da(r,1);for(r=Da(r,2),n=Da(n,2);!Ia(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Da(r,1),n=Da(n,1)}return t=Ta(e,i.R(t)),new Ca(i,t)}for(i=ba;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=va(n)).R(t);ka(o)||0<o.X(e);)o=(s=va(n-=r)).R(t);Ia(s)&&(s=_a),i=i.add(s),e=Ta(e,o)}return new Ca(i,e)}function Aa(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ma(n,e.h)}function Da(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new ma(i,e.h)}(Er=ma.prototype).ea=function(){if(ka(this))return-Sa(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:wa+r)*t,t*=wa}return e},Er.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ia(this))return"0";if(ka(this))return"-"+Sa(this).toString(e);for(var t=va(Math.pow(e,6)),n=this,r="";;){var i=Na(n,t).g,s=((0<(n=Ta(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ia(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Er.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Er.X=function(e){return ka(e=Ta(this,e))?-1:Ia(e)?0:1},Er.abs=function(){return ka(this)?Sa(this):this},Er.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ma(n,-2147483648&n[n.length-1]?-1:0)},Er.R=function(e){if(Ia(this)||Ia(e))return ba;if(ka(this))return ka(e)?Sa(this).R(Sa(e)):Sa(Sa(this).R(e));if(ka(e))return Sa(this.R(Sa(e)));if(0>this.X(Ea)&&0>e.X(Ea))return va(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,xa(n,2*r+2*i),n[2*r+2*i+1]+=s*l,xa(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,xa(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,xa(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ma(n,0)},Er.gb=function(e){return Na(this,e).h},Er.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ma(n,this.h&e.h)},Er.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ma(n,this.h|e.h)},Er.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ma(n,this.h^e.h)},la.prototype.createWebChannel=la.prototype.g,ca.prototype.send=ca.prototype.u,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,ds.COMPLETE="complete",ms.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",Di.prototype.listen=Di.prototype.O,Co.prototype.listenOnce=Co.prototype.P,Co.prototype.getLastError=Co.prototype.Sa,Co.prototype.getLastErrorCode=Co.prototype.Ia,Co.prototype.getStatus=Co.prototype.da,Co.prototype.getResponseJson=Co.prototype.Wa,Co.prototype.getResponseText=Co.prototype.ja,Co.prototype.send=Co.prototype.ha,Co.prototype.setWithCredentials=Co.prototype.Oa,fa.prototype.digest=fa.prototype.l,fa.prototype.reset=fa.prototype.reset,fa.prototype.update=fa.prototype.j,ma.prototype.add=ma.prototype.add,ma.prototype.multiply=ma.prototype.R,ma.prototype.modulo=ma.prototype.gb,ma.prototype.compare=ma.prototype.X,ma.prototype.toNumber=ma.prototype.ea,ma.prototype.toString=ma.prototype.toString,ma.prototype.getBits=ma.prototype.D,ma.fromNumber=va,ma.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Sa(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=va(Math.pow(n,8)),i=ba,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=va(Math.pow(n,o)),i=i.R(o).add(va(a))):i=(i=i.R(r)).add(va(a))}return i};var Oa=kr.createWebChannelTransport=function(){return new la},Pa=kr.getStatEventTarget=function(){return is()},Ra=kr.ErrorCode=hs,La=kr.EventType=ds,Ma=kr.Event=ns,Fa=kr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ja=kr.FetchXmlHttpFactory=_o,Ua=kr.WebChannel=ms,Va=kr.XhrIo=Co,za=kr.Md5=fa,Ba=kr.Integer=ma;const qa="@firebase/firestore";class Ka{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ka.UNAUTHENTICATED=new Ka(null),Ka.GOOGLE_CREDENTIALS=new Ka("google-credentials-uid"),Ka.FIRST_PARTY=new Ka("first-party-uid"),Ka.MOCK_USER=new Ka("mock-user");let Ga="9.23.0";const Ha=new V("@firebase/firestore");function Wa(){return Ha.logLevel}function Qa(e){if(Ha.logLevel<=L.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ja);Ha.debug("Firestore (".concat(Ga,"): ").concat(e),...i)}}function Ya(e){if(Ha.logLevel<=L.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ja);Ha.error("Firestore (".concat(Ga,"): ").concat(e),...i)}}function Xa(e){if(Ha.logLevel<=L.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ja);Ha.warn("Firestore (".concat(Ga,"): ").concat(e),...i)}}function Ja(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function $a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ga,") INTERNAL ASSERTION FAILED: ")+e;throw Ya(t),new Error(t)}function Za(e,t){e||$a()}function el(e,t){return e}const tl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nl extends y{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class rl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class sl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ka.UNAUTHENTICATED)))}shutdown(){}}class ol{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class al{constructor(e){this.t=e,this.currentUser=Ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new rl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Qa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Qa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Qa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Za("string"==typeof t.accessToken),new il(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Za(null===e||"string"==typeof e),new Ka(e)}}class ll{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Ka.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ll(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Ka.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ul{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Qa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Qa("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Qa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Qa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Za("string"==typeof e.token),this.T=e.token,new ul(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class fl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=dl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function pl(e,t){return e<t?-1:e>t?1:0}function ml(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gl(e){return e+"\0"}class yl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nl(tl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nl(tl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nl(tl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nl(tl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yl.fromMillis(Date.now())}static fromDate(e){return yl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pl(this.nanoseconds,e.nanoseconds):pl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vl(e)}static min(){return new vl(new yl(0,0))}static max(){return new vl(new yl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wl{constructor(e,t,n){void 0===t?t=0:t>e.length&&$a(),void 0===n?n=e.length-t:n>e.length-t&&$a(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bl extends wl{construct(e,t,n){return new bl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new nl(tl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new bl(e)}static emptyPath(){return new bl([])}}const _l=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class El extends wl{construct(e,t,n){return new El(e,t,n)}static isValidIdentifier(e){return _l.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),El.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new El(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new nl(tl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new nl(tl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nl(tl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new nl(tl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new El(t)}static emptyPath(){return new El([])}}class Il{constructor(e){this.path=e}static fromPath(e){return new Il(bl.fromString(e))}static fromName(e){return new Il(bl.fromString(e).popFirst(5))}static empty(){return new Il(bl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Il(new bl(e.slice()))}}class kl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sl(e){return e.fields.find((e=>2===e.kind))}function Tl(e){return e.fields.filter((e=>2!==e.kind))}kl.UNKNOWN_ID=-1;class xl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cl(0,Dl.min())}}function Nl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vl.fromTimestamp(1e9===r?new yl(n+1,0):new yl(n,r));return new Dl(i,Il.empty(),t)}function Al(e){return new Dl(e.readTime,e.key,-1)}class Dl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dl(vl.min(),Il.empty(),-1)}static max(){return new Dl(vl.max(),Il.empty(),-1)}}function Ol(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Il.comparator(e.documentKey,t.documentKey),0!==n?n:pl(e.largestBatchId,t.largestBatchId))}const Pl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ll(e){if(e.code!==tl.FAILED_PRECONDITION||e.message!==Pl)throw e;Qa("LocalStore","Unexpectedly lost primary lease")}class Ml{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$a(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ml(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ml?t:Ml.resolve(t)}catch(e){return Ml.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ml.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ml.reject(t)}static resolve(e){return new Ml(((t,n)=>{t(e)}))}static reject(e){return new Ml(((t,n)=>{n(e)}))}static waitFor(e){return new Ml(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ml.resolve(!1);for(const n of e)t=t.next((e=>e?Ml.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ml(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ml(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Fl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new rl,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Vl(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=Gl(t.target.error);this.v.reject(new Vl(e,n))}}static open(e,t,n,r){try{return new Fl(t,e.transaction(r,n))}catch(e){throw new Vl(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Qa("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bl(t)}}class jl{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===jl.S(p())&&Ya("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qa("SimpleDb","Removing database:",e),ql(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!g())return!1;if(jl.C())return!0;const e=p(),t=jl.S(e),n=0<t&&t<10,r=jl.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(Qa("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Vl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new nl(tl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new nl(tl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Vl(e,r))},r.onupgradeneeded=e=>{Qa("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Qa("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=Fl.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),Ml.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Qa("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ul{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ql(this.L.delete())}}class Vl extends nl{constructor(e,t){super(tl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function zl(e){return"IndexedDbTransactionError"===e.name}class Bl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Qa("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qa("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ql(n)}add(e){return Qa("SimpleDb","ADD",this.store.name,e,e),ql(this.store.add(e))}get(e){return ql(this.store.get(e)).next((t=>(void 0===t&&(t=null),Qa("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Qa("SimpleDb","DELETE",this.store.name,e),ql(this.store.delete(e))}count(){return Qa("SimpleDb","COUNT",this.store.name),ql(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Ml(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ml(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Qa("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new Ml(((n,r)=>{t.onerror=e=>{const t=Gl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Ml(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ul(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ml){const e=o.catch((e=>(s.done(),Ml.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Ml.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ql(e){return new Ml(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Gl(e.target.error);n(t)}}))}let Kl=!1;function Gl(e){const t=jl.S(p());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new nl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Kl||(Kl=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Hl{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Qa("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Qa("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){zl(e)?Qa("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Ll(e)}await this.et(6e4)}))}}class Wl{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return Ml.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Qa("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(Qa("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Al(t);Ol(r,n)>0&&(n=r)})),new Dl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ql{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Yl(e){return null==e}function Xl(e){return 0===e&&1/e==-1/0}function Jl(e){return"number"==typeof e&&Number.isInteger(e)&&!Xl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $l(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ec(t)),t=Zl(e.get(n),t);return ec(t)}function Zl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ec(e){return e+"\x01\x01"}function tc(e){const t=e.length;if(Za(t>=2),2===t)return Za("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bl.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&$a(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:$a()}s=t+2}return new bl(r)}Ql.ct=-1;const nc=["userId","batchId"];function rc(e,t){return[e,$l(t)]}function ic(e,t,n){return[e,$l(t),n]}const sc={},oc=["prefixPath","collectionGroup","readTime","documentId"],ac=["prefixPath","collectionGroup","documentId"],lc=["collectionGroup","readTime","prefixPath","documentId"],cc=["canonicalId","targetId"],uc=["targetId","path"],hc=["path","targetId"],dc=["collectionId","parent"],fc=["indexId","uid"],pc=["uid","sequenceNumber"],mc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gc=["indexId","uid","orderedDocumentKey"],yc=["userId","collectionPath","documentId"],vc=["userId","collectionPath","largestBatchId"],wc=["userId","collectionGroup","largestBatchId"],bc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_c=[...bc,"documentOverlays"],Ec=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ic=Ec,kc=[...Ic,"indexConfiguration","indexState","indexEntries"];class Sc extends Rl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Tc(e,t){const n=el(e);return jl.M(n.ht,t)}function xc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ac{constructor(e,t){this.comparator=e,this.root=t||Oc.EMPTY}insert(e,t){return new Ac(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oc.BLACK,null,null))}remove(e){return new Ac(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Oc.RED,this.left=null!=r?r:Oc.EMPTY,this.right=null!=i?i:Oc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Oc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Oc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Oc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $a();if(this.right.isRed())throw $a();const e=this.left.check();if(e!==this.right.check())throw $a();return e+(this.isRed()?0:1)}}Oc.EMPTY=null,Oc.RED=!0,Oc.BLACK=!1,Oc.EMPTY=new class{constructor(){this.size=0}get key(){throw $a()}get value(){throw $a()}get color(){throw $a()}get left(){throw $a()}get right(){throw $a()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Oc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pc{constructor(e){this.comparator=e,this.data=new Ac(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rc(this.data.getIterator())}getIteratorFrom(e){return new Rc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Pc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pc(this.comparator);return t.data=e,t}}class Rc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lc(e){return e.hasNext()?e.getNext():void 0}class Mc{constructor(e){this.fields=e,e.sort(El.comparator)}static empty(){return new Mc([])}unionWith(e){let t=new Pc(El.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Mc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Fc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fc("Invalid base64 string: "+e):e}}(e);return new jc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jc.EMPTY_BYTE_STRING=new jc("");const Uc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(e){if(Za(!!e),"string"==typeof e){let t=0;const n=Uc.exec(e);if(Za(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zc(e.seconds),nanos:zc(e.nanos)}}function zc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bc(e){return"string"==typeof e?jc.fromBase64String(e):jc.fromUint8Array(e)}function qc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kc(e){const t=e.mapValue.fields.__previous_value__;return qc(t)?Kc(t):t}function Gc(e){const t=Vc(e.mapValue.fields.__local_write_time__.timestampValue);return new yl(t.seconds,t.nanos)}class Hc{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Wc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}const Qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yc={nullValue:"NULL_VALUE"};function Xc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qc(e)?4:uu(e)?9007199254740991:10:$a()}function Jc(e,t){if(e===t)return!0;const n=Xc(e);if(n!==Xc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gc(e).isEqual(Gc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Vc(e.timestampValue),r=Vc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bc(e.bytesValue).isEqual(Bc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zc(e.geoPointValue.latitude)===zc(t.geoPointValue.latitude)&&zc(e.geoPointValue.longitude)===zc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zc(e.integerValue)===zc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zc(e.doubleValue),r=zc(t.doubleValue);return n===r?Xl(n)===Xl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ml(e.arrayValue.values||[],t.arrayValue.values||[],Jc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xc(n)!==xc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jc(n[i],r[i])))return!1;return!0}(e,t);default:return $a()}}function $c(e,t){return void 0!==(e.values||[]).find((e=>Jc(e,t)))}function Zc(e,t){if(e===t)return 0;const n=Xc(e),r=Xc(t);if(n!==r)return pl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zc(e.integerValue||e.doubleValue),r=zc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return eu(e.timestampValue,t.timestampValue);case 4:return eu(Gc(e),Gc(t));case 5:return pl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bc(e),r=Bc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=pl(n[i],r[i]);if(0!==e)return e}return pl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pl(zc(e.latitude),zc(t.latitude));return 0!==n?n:pl(zc(e.longitude),zc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Zc(n[i],r[i]);if(e)return e}return pl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Qc.mapValue&&t===Qc.mapValue)return 0;if(e===Qc.mapValue)return 1;if(t===Qc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=pl(r[o],s[o]);if(0!==e)return e;const t=Zc(n[r[o]],i[s[o]]);if(0!==t)return t}return pl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw $a()}}function eu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pl(e,t);const n=Vc(e),r=Vc(t),i=pl(n.seconds,r.seconds);return 0!==i?i:pl(n.nanos,r.nanos)}function tu(e){return nu(e)}function nu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Vc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Bc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Il.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=nu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(nu(e.fields[i]));return n+"}"}(e.mapValue):$a();var t,n}function ru(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function iu(e){return!!e&&"integerValue"in e}function su(e){return!!e&&"arrayValue"in e}function ou(e){return!!e&&"nullValue"in e}function au(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lu(e){return!!e&&"mapValue"in e}function cu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=cu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function uu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function hu(e){return"nullValue"in e?Yc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ru(Wc.empty(),Il.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:$a()}function du(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ru(Wc.empty(),Il.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Qc:$a()}function fu(e,t){const n=Zc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pu(e,t){const n=Zc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mu{constructor(e){this.value=e}static empty(){return new mu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=El.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=cu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());lu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];lu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Cc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new mu(cu(this.value))}}function gu(e){const t=[];return Cc(e.fields,((e,n)=>{const r=new El([e]);if(lu(n)){const e=gu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Mc(t)}class yu{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new yu(e,0,vl.min(),vl.min(),vl.min(),mu.empty(),0)}static newFoundDocument(e,t,n,r){return new yu(e,1,t,vl.min(),n,r,0)}static newNoDocument(e,t){return new yu(e,2,t,vl.min(),vl.min(),mu.empty(),0)}static newUnknownDocument(e,t){return new yu(e,3,t,vl.min(),vl.min(),mu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class vu{constructor(e,t){this.position=e,this.inclusive=t}}function wu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Il.comparator(Il.fromName(o.referenceValue),n.key):Zc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function bu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Jc(e.position[n],t.position[n]))return!1;return!0}class _u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Eu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Iu{}class ku extends Iu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ru(e,t,n):"array-contains"===t?new ju(e,n):"in"===t?new Uu(e,n):"not-in"===t?new Vu(e,n):"array-contains-any"===t?new zu(e,n):new ku(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Lu(e,n):new Mu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zc(t,this.value)):null!==t&&Xc(this.value)===Xc(t)&&this.matchesComparison(Zc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $a()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Su extends Iu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Su(e,t)}matches(e){return Tu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Tu(e){return"and"===e.op}function xu(e){return"or"===e.op}function Cu(e){return Nu(e)&&Tu(e)}function Nu(e){for(const t of e.filters)if(t instanceof Su)return!1;return!0}function Au(e){if(e instanceof ku)return e.field.canonicalString()+e.op.toString()+tu(e.value);if(Cu(e))return e.filters.map((e=>Au(e))).join(",");{const t=e.filters.map((e=>Au(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Du(e,t){return e instanceof ku?function(e,t){return t instanceof ku&&e.op===t.op&&e.field.isEqual(t.field)&&Jc(e.value,t.value)}(e,t):e instanceof Su?function(e,t){return t instanceof Su&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Du(n,t.filters[r])),!0)}(e,t):void $a()}function Ou(e,t){const n=e.filters.concat(t);return Su.create(n,e.op)}function Pu(e){return e instanceof ku?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(tu(e.value))}(e):e instanceof Su?function(e){return e.op.toString()+" {"+e.getFilters().map(Pu).join(" ,")+"}"}(e):"Filter"}class Ru extends ku{constructor(e,t,n){super(e,t,n),this.key=Il.fromName(n.referenceValue)}matches(e){const t=Il.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lu extends ku{constructor(e,t){super(e,"in",t),this.keys=Fu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Mu extends ku{constructor(e,t){super(e,"not-in",t),this.keys=Fu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Fu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Il.fromName(e.referenceValue)))}class ju extends ku{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return su(t)&&$c(t.arrayValue,this.value)}}class Uu extends ku{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$c(this.value.arrayValue,t)}}class Vu extends ku{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$c(this.value.arrayValue,t)}}class zu extends ku{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!su(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>$c(this.value.arrayValue,e)))}}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function qu(e){return new Bu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ku(e){const t=el(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Au(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Yl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>tu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>tu(e))).join(",")),t.dt=e}return t.dt}function Gu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Eu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Du(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bu(e.startAt,t.startAt)&&bu(e.endAt,t.endAt)}function Hu(e){return Il.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Wu(e,t){return e.filters.filter((e=>e instanceof ku&&e.field.isEqual(t)))}function Qu(e,t,n){let r=Yc,i=!0;for(const s of Wu(e,t)){let e=Yc,t=!0;switch(s.op){case"<":case"<=":e=hu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Yc}fu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];fu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Yu(e,t,n){let r=Qc,i=!0;for(const s of Wu(e,t)){let e=Qc,t=!0;switch(s.op){case">=":case">":e=du(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Qc}pu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];pu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Xu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ju(e,t,n,r,i,s,o,a){return new Xu(e,t,n,r,i,s,o,a)}function $u(e){return new Xu(e)}function Zu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function eh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function th(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function nh(e){return null!==e.collectionGroup}function rh(e){const t=el(e);if(null===t.wt){t.wt=[];const e=th(t),n=eh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new _u(e)),t.wt.push(new _u(El.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new _u(El.keyField(),e))}}}return t.wt}function ih(e){const t=el(e);if(!t._t)if("F"===t.limitType)t._t=qu(t.path,t.collectionGroup,rh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of rh(t)){const t="desc"===i.dir?"asc":"desc";e.push(new _u(i.field,t))}const n=t.endAt?new vu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vu(t.startAt.position,t.startAt.inclusive):null;t._t=qu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function sh(e,t){t.getFirstInequalityField(),th(e);const n=e.filters.concat([t]);return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function oh(e,t,n){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ah(e,t){return Gu(ih(e),ih(t))&&e.limitType===t.limitType}function lh(e){return"".concat(Ku(ih(e)),"|lt:").concat(e.limitType)}function ch(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Pu(e))).join(", "),"]")),Yl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>tu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>tu(e))).join(",")),"Target(".concat(t,")")}(ih(e)),"; limitType=").concat(e.limitType,")")}function uh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Il.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of rh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=wu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,rh(e),t))&&!(e.endAt&&!function(e,t,n){const r=wu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,rh(e),t))}(e,t)}function hh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dh(e){return(t,n)=>{let r=!1;for(const i of rh(e)){const e=fh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function fh(e,t,n){const r=e.field.isKeyField()?Il.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zc(r,i):$a()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $a()}}class ph{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Nc(this.inner)}size(){return this.innerSize}}const mh=new Ac(Il.comparator);function gh(){return mh}const yh=new Ac(Il.comparator);function vh(){let e=yh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function wh(e){let t=yh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bh(){return Eh()}function _h(){return Eh()}function Eh(){return new ph((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ih=new Ac(Il.comparator),kh=new Pc(Il.comparator);function Sh(){let e=kh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Th=new Pc(pl);function xh(){return Th}function Ch(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(t)?"-0":t}}function Nh(e){return{integerValue:""+e}}function Ah(e,t){return Jl(t)?Nh(t):Ch(e,t)}class Dh{constructor(){this._=void 0}}function Oh(e,t,n){return e instanceof Lh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&qc(t)&&(t=Kc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mh?Fh(e,t):e instanceof jh?Uh(e,t):function(e,t){const n=Rh(e,t),r=zh(n)+zh(e.gt);return iu(n)&&iu(e.gt)?Nh(r):Ch(e.serializer,r)}(e,t)}function Ph(e,t,n){return e instanceof Mh?Fh(e,t):e instanceof jh?Uh(e,t):n}function Rh(e,t){return e instanceof Vh?iu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Lh extends Dh{}class Mh extends Dh{constructor(e){super(),this.elements=e}}function Fh(e,t){const n=Bh(t);for(const r of e.elements)n.some((e=>Jc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class jh extends Dh{constructor(e){super(),this.elements=e}}function Uh(e,t){let n=Bh(t);for(const r of e.elements)n=n.filter((e=>!Jc(e,r)));return{arrayValue:{values:n}}}class Vh extends Dh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function zh(e){return zc(e.integerValue||e.doubleValue)}function Bh(e){return su(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qh{constructor(e,t){this.field=e,this.transform=t}}class Kh{constructor(e,t){this.version=e,this.transformResults=t}}class Gh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gh}static exists(e){return new Gh(void 0,e)}static updateTime(e){return new Gh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wh{}function Qh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new id(e.key,Gh.none()):new Zh(e.key,e.data,Gh.none());{const n=e.data,r=mu.empty();let i=new Pc(El.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ed(e.key,r,new Mc(i.toArray()),Gh.none())}}function Yh(e,t,n){e instanceof Zh?function(e,t,n){const r=e.value.clone(),i=nd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ed?function(e,t,n){if(!Hh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=nd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(td(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xh(e,t,n,r){return e instanceof Zh?function(e,t,n,r){if(!Hh(e.precondition,t))return n;const i=e.value.clone(),s=rd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ed?function(e,t,n,r){if(!Hh(e.precondition,t))return n;const i=rd(e.fieldTransforms,r,t),s=t.data;return s.setAll(td(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Hh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rh(r.transform,e||null);null!=i&&(null===n&&(n=mu.empty()),n.set(r.field,i))}return n||null}function $h(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ml(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mh&&t instanceof Mh||e instanceof jh&&t instanceof jh?ml(e.elements,t.elements,Jc):e instanceof Vh&&t instanceof Vh?Jc(e.gt,t.gt):e instanceof Lh&&t instanceof Lh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zh extends Wh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ed extends Wh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function td(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function nd(e,t,n){const r=new Map;Za(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ph(o,a,n[i]))}return r}function rd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Oh(e,s,t))}return r}class id extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sd extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class od{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Yh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_h();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Qh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(vl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sh())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,((e,t)=>$h(e,t)))&&ml(this.baseMutations,e.baseMutations,((e,t)=>$h(e,t)))}}class ad{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Za(e.mutations.length===n.length);let r=Ih;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ad(e,t,n,r)}}class ld{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class cd{constructor(e,t){this.count=e,this.unchangedNames=t}}var ud,hd;function dd(e){switch(e){default:return $a();case tl.CANCELLED:case tl.UNKNOWN:case tl.DEADLINE_EXCEEDED:case tl.RESOURCE_EXHAUSTED:case tl.INTERNAL:case tl.UNAVAILABLE:case tl.UNAUTHENTICATED:return!1;case tl.INVALID_ARGUMENT:case tl.NOT_FOUND:case tl.ALREADY_EXISTS:case tl.PERMISSION_DENIED:case tl.FAILED_PRECONDITION:case tl.ABORTED:case tl.OUT_OF_RANGE:case tl.UNIMPLEMENTED:case tl.DATA_LOSS:return!0}}function fd(e){if(void 0===e)return Ya("GRPC error has no .code"),tl.UNKNOWN;switch(e){case ud.OK:return tl.OK;case ud.CANCELLED:return tl.CANCELLED;case ud.UNKNOWN:return tl.UNKNOWN;case ud.DEADLINE_EXCEEDED:return tl.DEADLINE_EXCEEDED;case ud.RESOURCE_EXHAUSTED:return tl.RESOURCE_EXHAUSTED;case ud.INTERNAL:return tl.INTERNAL;case ud.UNAVAILABLE:return tl.UNAVAILABLE;case ud.UNAUTHENTICATED:return tl.UNAUTHENTICATED;case ud.INVALID_ARGUMENT:return tl.INVALID_ARGUMENT;case ud.NOT_FOUND:return tl.NOT_FOUND;case ud.ALREADY_EXISTS:return tl.ALREADY_EXISTS;case ud.PERMISSION_DENIED:return tl.PERMISSION_DENIED;case ud.FAILED_PRECONDITION:return tl.FAILED_PRECONDITION;case ud.ABORTED:return tl.ABORTED;case ud.OUT_OF_RANGE:return tl.OUT_OF_RANGE;case ud.UNIMPLEMENTED:return tl.UNIMPLEMENTED;case ud.DATA_LOSS:return tl.DATA_LOSS;default:return $a()}}(hd=ud||(ud={}))[hd.OK=0]="OK",hd[hd.CANCELLED=1]="CANCELLED",hd[hd.UNKNOWN=2]="UNKNOWN",hd[hd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hd[hd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hd[hd.NOT_FOUND=5]="NOT_FOUND",hd[hd.ALREADY_EXISTS=6]="ALREADY_EXISTS",hd[hd.PERMISSION_DENIED=7]="PERMISSION_DENIED",hd[hd.UNAUTHENTICATED=16]="UNAUTHENTICATED",hd[hd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hd[hd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hd[hd.ABORTED=10]="ABORTED",hd[hd.OUT_OF_RANGE=11]="OUT_OF_RANGE",hd[hd.UNIMPLEMENTED=12]="UNIMPLEMENTED",hd[hd.INTERNAL=13]="INTERNAL",hd[hd.UNAVAILABLE=14]="UNAVAILABLE",hd[hd.DATA_LOSS=15]="DATA_LOSS";class pd{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return md}static getOrCreateInstance(){return null===md&&(md=new pd),md}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let md=null;function gd(){return new TextEncoder}const yd=new Ba([4294967295,4294967295],0);function vd(e){const t=gd().encode(e),n=new za;return n.update(t),new Uint8Array(n.digest())}function wd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ba([n,r],0),new Ba([i,s],0)]}class bd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new _d("Invalid padding: ".concat(t));if(n<0)throw new _d("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new _d("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new _d("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Ba.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Ba.fromNumber(n)));return 1===r.compare(yd)&&(r=new Ba([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=vd(e),[n,r]=wd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new bd(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=vd(e),[n,r]=wd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class _d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ed{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ed(vl.min(),r,new Ac(pl),gh(),Sh())}}class Id{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Id(n,t,Sh(),Sh(),Sh())}}class kd{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Sd{constructor(e,t){this.targetId=e,this.Vt=t}}class Td{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class xd{constructor(){this.St=0,this.Dt=Ad(),this.Ct=jc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Sh(),t=Sh(),n=Sh();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:$a()}})),new Id(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Ad()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Cd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=gh(),this.zt=Nd(),this.Wt=new Ac(pl)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:$a()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Hu(s))if(0===r){const e=new Il(s.path);this.Yt(n,e,yu.newNoDocument(e,vl.min()))}else Za(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=pd.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Bc(i).toUint8Array()}catch(e){if(e instanceof Fc)return Xa("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new bd(a,s,o)}catch(e){return Xa(e instanceof _d?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Hu(i.target)){const t=new Il(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,yu.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Sh();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Ed(e,t,this.Wt,this.jt,n);return this.jt=gh(),this.zt=Nd(),this.Wt=new Ac(pl),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new xd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Pc(pl),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Qa("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new xd),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Nd(){return new Ac(Il.comparator)}function Ad(){return new Ac(Il.comparator)}const Dd={asc:"ASCENDING",desc:"DESCENDING"},Od={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pd={and:"AND",or:"OR"};class Rd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ld(e,t){return e.useProto3Json||Yl(t)?t:{value:t}}function Md(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jd(e,t){return Md(e,t.toTimestamp())}function Ud(e){return Za(!!e),vl.fromTimestamp(function(e){const t=Vc(e);return new yl(t.seconds,t.nanos)}(e))}function Vd(e,t){return function(e){return new bl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function zd(e){const t=bl.fromString(e);return Za(uf(t)),t}function Bd(e,t){return Vd(e.databaseId,t.path)}function qd(e,t){const n=zd(t);if(n.get(1)!==e.databaseId.projectId)throw new nl(tl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nl(tl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Il(Wd(n))}function Kd(e,t){return Vd(e.databaseId,t)}function Gd(e){const t=zd(e);return 4===t.length?bl.emptyPath():Wd(t)}function Hd(e){return new bl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wd(e){return Za(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qd(e,t,n){return{name:Bd(e,t),fields:n.value.mapValue.fields}}function Yd(e,t,n){const r=qd(e,t.name),i=Ud(t.updateTime),s=t.createTime?Ud(t.createTime):vl.min(),o=new mu({mapValue:{fields:t.fields}}),a=yu.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Xd(e,t){let n;if(t instanceof Zh)n={update:Qd(e,t.key,t.value)};else if(t instanceof id)n={delete:Bd(e,t.key)};else if(t instanceof ed)n={update:Qd(e,t.key,t.data),updateMask:cf(t.fieldMask)};else{if(!(t instanceof sd))return $a();n={verify:Bd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Lh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw $a()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:$a()}(e,t.precondition)),n}function Jd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Gh.updateTime(Ud(e.updateTime)):void 0!==e.exists?Gh.exists(e.exists):Gh.none()}(t.currentDocument):Gh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Za("REQUEST_TIME"===t.setToServerValue),n=new Lh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Mh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new jh(e)}else"increment"in t?n=new Vh(e,t.increment):$a();const r=El.fromServerFormat(t.fieldPath);return new qh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=qd(e,t.update.name),s=new mu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Mc(t.map((e=>El.fromServerFormat(e))))}(t.updateMask);return new ed(i,s,e,n,r)}return new Zh(i,s,n,r)}if(t.delete){const r=qd(e,t.delete);return new id(r,n)}if(t.verify){const r=qd(e,t.verify);return new sd(r,n)}return $a()}function $d(e,t){return{documents:[Kd(e,t.path)]}}function Zd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return lf(Su.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:of(e.field),direction:nf(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ld(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ef(e){let t=Gd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Za(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=tf(e);return t instanceof Su&&Cu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new _u(af(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Yl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new vu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new vu(n,t)}(n.endAt)),Ju(t,i,o,s,a,"F",l,c)}function tf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=af(e.unaryFilter.field);return ku.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=af(e.unaryFilter.field);return ku.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=af(e.unaryFilter.field);return ku.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=af(e.unaryFilter.field);return ku.create(i,"!=",{nullValue:"NULL_VALUE"});default:return $a()}}(e):void 0!==e.fieldFilter?function(e){return ku.create(af(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $a()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Su.create(e.compositeFilter.filters.map((e=>tf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $a()}}(e.compositeFilter.op))}(e):$a()}function nf(e){return Dd[e]}function rf(e){return Od[e]}function sf(e){return Pd[e]}function of(e){return{fieldPath:e.canonicalString()}}function af(e){return El.fromServerFormat(e.fieldPath)}function lf(e){return e instanceof ku?function(e){if("=="===e.op){if(au(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NAN"}};if(ou(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(au(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NAN"}};if(ou(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(e.field),op:rf(e.op),value:e.value}}}(e):e instanceof Su?function(e){const t=e.getFilters().map((e=>lf(e)));return 1===t.length?t[0]:{compositeFilter:{op:sf(e.op),filters:t}}}(e):$a()}function cf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function uf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class df{constructor(e){this.fe=e}}function ff(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Md(e,t.version.toTimestamp()),createTime:Md(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mf(t.version)};else{if(!t.isUnknownDocument())return $a();r.unknownDocument={path:n.path.toArray(),version:mf(t.version)}}return r}function pf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function mf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gf(e){const t=new yl(e.seconds,e.nanoseconds);return vl.fromTimestamp(t)}function yf(e,t){const n=(t.baseMutations||[]).map((t=>Jd(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Jd(e.fe,t))),i=yl.fromMillis(t.localWriteTimeMs);return new od(t.batchId,i,n,r)}function vf(e){const t=gf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?gf(e.lastLimboFreeSnapshotVersion):vl.min();let r;var i;return void 0!==e.query.documents?(Za(1===(i=e.query).documents.length),r=ih($u(Gd(i.documents[0])))):r=function(e){return ih(ef(e))}(e.query),new hf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,jc.fromBase64String(e.resumeToken))}function wf(e,t){const n=mf(t.snapshotVersion),r=mf(t.lastLimboFreeSnapshotVersion);let i;i=Hu(t.target)?$d(e.fe,t.target):Zd(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ku(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bf(e){const t=ef({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oh(t,t.limit,"L"):t}function _f(e,t){return new ld(t.largestBatchId,Jd(e.fe,t.overlayMutation))}function Ef(e,t){const n=t.path.lastSegment();return[e,$l(t.path.popLast()),n]}function If(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:mf(r.readTime),documentKey:$l(r.documentKey.path),largestBatchId:r.largestBatchId}}class kf{getBundleMetadata(e,t){return Sf(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:gf(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Sf(e).put({bundleId:(n=t).id,createTime:mf(Ud(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Tf(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:bf(t.bundledQuery),readTime:gf(t.readTime)};var t}))}saveNamedQuery(e,t){return Tf(e).put(function(e){return{name:e.name,readTime:mf(Ud(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Sf(e){return Tc(e,"bundles")}function Tf(e){return Tc(e,"namedQueries")}class xf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new xf(e,n)}getOverlay(e,t){return Cf(e).get(Ef(this.userId,t)).next((e=>e?_f(this.serializer,e):null))}getOverlays(e,t){const n=bh();return Ml.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new ld(t,i);r.push(this.we(e,s))})),Ml.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add($l(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Cf(e).J("collectionPathOverlayIndex",r))})),Ml.waitFor(i)}getOverlaysForCollection(e,t,n){const r=bh(),i=$l(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Cf(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=_f(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=bh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cf(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=_f(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return Cf(e).put(function(e,t,n){const[r,i,s]=Ef(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xd(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Cf(e){return Tc(e,"documentOverlays")}class Nf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(zc(e.integerValue));else if("doubleValue"in e){const n=zc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Xl(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Bc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?uu(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):$a()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Il.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Af(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Df(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Af(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Nf.Ve=new Nf;class Of{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Df(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=Df(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Pf{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Rf{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Lf{constructor(){this.je=new Of,this.ze=new Pf(this.je),this.We=new Rf(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Mf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Mf(this.indexId,this.documentKey,this.arrayValue,n)}}function Ff(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=jf(e.arrayValue,t.arrayValue),0!==n?n:(n=jf(e.directionalValue,t.directionalValue),0!==n?n:Il.comparator(e.documentKey,t.documentKey)))}function jf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Uf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Za(e.collectionGroup===this.collectionId);const t=Sl(e);if(void 0!==t&&!this.en(t))return!1;const n=Tl(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vf(e){var t,n;if(Za(e instanceof ku||e instanceof Su),e instanceof ku){if(e instanceof Uu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ku.create(e.field,"==",t))))||[];return Su.create(r,"or")}return e}const r=e.filters.map((e=>Vf(e)));return Su.create(r,e.op)}function zf(e){if(0===e.getFilters().length)return[];const t=Gf(Vf(e));return Za(Kf(t)),Bf(t)||qf(t)?[t]:t.getFilters()}function Bf(e){return e instanceof ku}function qf(e){return e instanceof Su&&Cu(e)}function Kf(e){return Bf(e)||qf(e)||function(e){if(e instanceof Su&&xu(e)){for(const t of e.getFilters())if(!Bf(t)&&!qf(t))return!1;return!0}return!1}(e)}function Gf(e){if(Za(e instanceof ku||e instanceof Su),e instanceof ku)return e;if(1===e.filters.length)return Gf(e.filters[0]);const t=e.filters.map((e=>Gf(e)));let n=Su.create(t,e.op);return n=Qf(n),Kf(n)?n:(Za(n instanceof Su),Za(Tu(n)),Za(n.filters.length>1),n.filters.reduce(((e,t)=>Hf(e,t))))}function Hf(e,t){let n;return Za(e instanceof ku||e instanceof Su),Za(t instanceof ku||t instanceof Su),n=e instanceof ku?t instanceof ku?function(e,t){return Su.create([e,t],"and")}(e,t):Wf(e,t):t instanceof ku?Wf(t,e):function(e,t){if(Za(e.filters.length>0&&t.filters.length>0),Tu(e)&&Tu(t))return Ou(e,t.getFilters());const n=xu(e)?e:t,r=xu(e)?t:e,i=n.filters.map((e=>Hf(e,r)));return Su.create(i,"or")}(e,t),Qf(n)}function Wf(e,t){if(Tu(t))return Ou(t,e.getFilters());{const n=t.filters.map((t=>Hf(e,t)));return Su.create(n,"or")}}function Qf(e){if(Za(e instanceof ku||e instanceof Su),e instanceof ku)return e;const t=e.getFilters();if(1===t.length)return Qf(t[0]);if(Nu(e))return e;const n=t.map((e=>Qf(e))),r=[];return n.forEach((t=>{t instanceof ku?r.push(t):t instanceof Su&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Su.create(r,e.op)}class Yf{constructor(){this.rn=new Xf}addToCollectionParentIndex(e,t){return this.rn.add(t),Ml.resolve()}getCollectionParents(e,t){return Ml.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ml.resolve()}deleteFieldIndex(e,t){return Ml.resolve()}getDocumentsMatchingTarget(e,t){return Ml.resolve(null)}getIndexType(e,t){return Ml.resolve(0)}getFieldIndexes(e,t){return Ml.resolve([])}getNextCollectionGroupToUpdate(e){return Ml.resolve(null)}getMinOffset(e,t){return Ml.resolve(Dl.min())}getMinOffsetFromCollectionGroup(e,t){return Ml.resolve(Dl.min())}updateCollectionGroup(e,t,n){return Ml.resolve()}updateIndexEntries(e,t){return Ml.resolve()}}class Xf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pc(bl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Pc(bl.comparator)).toArray()}}const Jf=new Uint8Array(0);class $f{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Xf,this.un=new ph((e=>Ku(e)),((e,t)=>Gu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:$l(r)};return Zf(e).put(i)}return Ml.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gl(t),""],!1,!0);return Zf(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tc(r.parent))}return n}))}addFieldIndex(e,t){const n=tp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=np(e);return i.next((e=>{n.put(If(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=tp(e),r=np(e),i=ep(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=ep(e);let r=!0;const i=new Map;return Ml.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Sh();const r=[];return Ml.forEach(i,((i,s)=>{var o;Qa("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(Ku(t)));const a=function(e,t){const n=Sl(t);if(void 0===n)return null;for(const r of Wu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),l=function(e,t){const n=new Map;for(const r of Tl(t))for(const t of Wu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Tl(t)){const t=0===i.kind?Qu(e,i.fieldPath,e.startAt):Yu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new vu(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Tl(t)){const t=0===i.kind?Yu(e,i.fieldPath,e.endAt):Qu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new vu(n,r)}(s,i),h=this.hn(i,s,c),d=this.hn(i,s,u),f=this.ln(i,s,l),p=this.fn(i.indexId,a,h,c.inclusive,d,u.inclusive,f);return Ml.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Il.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Ml.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:zf(Su.create(e.filters,"and")).map((t=>qu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/l]):Jf,h=this.wn(e,a,n[u%l],r),d=this._n(e,a,i[u%l],s),f=o.map((t=>this.wn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}wn(e,t,n,r){const i=new Mf(e,Il.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new Mf(e,Il.empty(),t,n);return r?i.Je():i}an(e,t){const n=new Uf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Ml.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Pc(El.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new Lf;for(const r of Tl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);Nf.Ve._e(e,i)}return n.Qe()}dn(e){const t=new Lf;return Nf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Lf;return Nf.Ve._e(ru(this.databaseId,t),n.He(function(e){const t=Tl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Lf);let i=0;for(const s of Tl(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&su(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);Nf.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Lf;n.seed(e.Qe()),Nf.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof ku&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=tp(e),r=np(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return Ml.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Cl(t.sequenceNumber,new Dl(gf(t.readTime),new Il(tc(t.documentKey)),t.largestBatchId)):Cl.empty(),r=e.fields.map((e=>{let[t,n]=e;return new xl(El.fromServerFormat(t),n)}));return new kl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=tp(e),i=np(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ml.forEach(t,(t=>i.put(If(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ml.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ml.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ml.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?Ml.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return ep(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return ep(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=ep(e);let i=new Pc(Ff);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new Mf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new Pc(Ff);const r=this.mn(t,e);if(null==r)return n;const i=Sl(t);if(null!=i){const s=e.data.field(i.fieldPath);if(su(s))for(const i of s.arrayValue.values||[])n=n.add(new Mf(t.indexId,e.key,this.dn(i),r))}else n=n.add(new Mf(t.indexId,e.key,Jf,r));return n}vn(e,t,n,r,i){Qa("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Lc(s),l=Lc(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Lc(o)):t?(i(a),a=Lc(s)):(a=Lc(s),l=Lc(o))}}(r,i,Ff,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),Ml.waitFor(s)}Tn(e){let t=1;return np(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ff(e,t))).filter(((e,t,n)=>!t||0!==Ff(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Ff(s,e),i=Ff(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Jf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Jf,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Ff(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rp)}getMinOffset(e,t){return Ml.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||$a())))).next(rp)}}function Zf(e){return Tc(e,"collectionParents")}function ep(e){return Tc(e,"indexEntries")}function tp(e){return Tc(e,"indexConfiguration")}function np(e){return Tc(e,"indexState")}function rp(e){Za(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ol(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Dl(t.readTime,t.documentKey,n)}const ip={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sp(e,sp.DEFAULT_COLLECTION_PERCENTILE,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function op(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Za(1===a)})));const c=[];for(const u of n.mutations){const e=ic(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Ml.waitFor(s).next((()=>c))}function ap(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw $a();t=e.noDocument}return JSON.stringify(t).length}sp.DEFAULT_COLLECTION_PERCENTILE=10,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sp.DEFAULT=new sp(41943040,sp.DEFAULT_COLLECTION_PERCENTILE,sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sp.DISABLED=new sp(-1,0,0);class lp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Za(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new lp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return up(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=hp(e),s=up(e);return s.add({}).next((o=>{Za("number"==typeof o);const a=new od(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Xd(e.fe,t))),i=n.mutations.map((t=>Xd(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Pc(((e,t)=>pl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ic(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,sc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),Ml.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return up(e).get(t).next((e=>e?(Za(e.userId===this.userId),yf(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?Ml.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return up(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Za(t.batchId>=n),i=yf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return up(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return up(e).j("userMutationsIndex",t).next((e=>e.map((e=>yf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return hp(e).X({range:r},((n,r,s)=>{const[o,a,l]=n,c=tc(a);if(o===this.userId&&t.path.isEqual(c))return up(e).get(l).next((e=>{if(!e)throw $a();Za(e.userId===this.userId),i.push(yf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pc(pl);const r=[];return t.forEach((t=>{const i=rc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=hp(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,l=tc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Ml.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Pc(pl);return hp(e).X({range:s},((e,t,i)=>{const[s,a,l]=e,c=tc(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(up(e).get(t).next((e=>{if(null===e)throw $a();Za(e.userId===this.userId),n.push(yf(this.serializer,e))})))})),Ml.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return op(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),Ml.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ml.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return hp(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=tc(e[1]);r.push(t)}else n.done()})).next((()=>{Za(0===r.length)}))}))}containsKey(e,t){return cp(e,this.userId,t)}xn(e){return dp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function cp(e,t,n){const r=rc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return hp(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function up(e){return Tc(e,"mutations")}function hp(e){return Tc(e,"documentMutations")}function dp(e){return Tc(e,"mutationQueues")}class fp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new fp(0)}static Mn(){return new fp(-1)}}class pp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new fp(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>vl.fromTimestamp(new yl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>mp(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(Za(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return mp(e).X(((s,o)=>{const a=vf(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ml.waitFor(i))).next((()=>r))}forEachTarget(e,t){return mp(e).X(((e,n)=>{const r=vf(n);t(r)}))}$n(e){return gp(e).get("targetGlobalKey").next((e=>(Za(null!==e),e)))}On(e,t){return gp(e).put("targetGlobalKey",t)}Fn(e,t){return mp(e).put(wf(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ku(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return mp(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=vf(n);Gu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=yp(e);return t.forEach((t=>{const s=$l(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Ml.waitFor(r)}removeMatchingKeys(e,t,n){const r=yp(e);return Ml.forEach(t,(t=>{const i=$l(t.path);return Ml.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=yp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yp(e);let i=Sh();return r.X({range:n,Y:!0},((e,t,n)=>{const r=tc(e[1]),s=new Il(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=$l(t.path),r=IDBKeyRange.bound([n],[gl(n)],!1,!0);let i=0;return yp(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return mp(e).get(t).next((e=>e?vf(e):null))}}function mp(e){return Tc(e,"targets")}function gp(e){return Tc(e,"targetGlobal")}function yp(e){return Tc(e,"targetDocuments")}function vp(e,t){let[n,r]=e,[i,s]=t;const o=pl(n,i);return 0===o?pl(r,s):o}class wp{constructor(e){this.Ln=e,this.buffer=new Pc(vp),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();vp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){Qa("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zl(e)?Qa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ll(e)}await this.Qn(3e5)}))}}class _p{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ml.resolve(Ql.ct);const n=new wp(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qa("LruGarbageCollector","Garbage collection skipped; disabled"),Ml.resolve(ip)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ip):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Qa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Wa()<=L.DEBUG&&Qa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Ml.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Ep(e,t){return new _p(e,t)}class Ip{constructor(e,t){this.db=e,this.garbageCollector=Ep(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return kp(e,n)}removeReference(e,t,n){return kp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return kp(e,t)}Xn(e,t){return function(e,t){let n=!1;return dp(e).Z((r=>cp(e,r,t).next((e=>(e&&(n=!0),Ml.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,vl.min()),yp(e).delete([0,$l(s.path)]))))}));r.push(t)}})).next((()=>Ml.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return kp(e,t)}Yn(e,t){const n=yp(e);let r,i=Ql.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ql.ct&&t(new Il(tc(r)),i),i=l,r=a):i=Ql.ct})).next((()=>{i!==Ql.ct&&t(new Il(tc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kp(e,t){return yp(e).put(function(e,t){return{targetId:0,path:$l(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Sp{constructor(){this.changes=new ph((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ml.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ap(e).put(n)}removeEntry(e,t,n){return Ap(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],pf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=yu.newInvalidDocument(t);return Ap(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:yu.newInvalidDocument(t)};return Ap(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Dp(t))},((e,r)=>{n={document:this.ts(t,r),size:ap(r)}})).next((()=>n))}getEntries(e,t){let n=gh();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=gh(),r=new Ac(Il.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,ap(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return Ml.resolve();let r=new Pc(Pp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Dp(r.first()),Dp(r.last())),s=r.getIterator();let o=s.getNext();return Ap(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Il.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Pp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(Dp(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),pf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ap(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=gh();for(const i of e){const e=this.ts(Il.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(uh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=gh();const s=Op(t,n),o=Op(t,Dl.max());return Ap(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(Il.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Cp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Np(e).get("remoteDocumentGlobalKey").next((e=>(Za(!!e),e)))}Zn(e,t){return Np(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Yd(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Il.fromSegments(t.noDocument.path),r=gf(t.noDocument.readTime);n=yu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return $a();{const e=Il.fromSegments(t.unknownDocument.path),r=gf(t.unknownDocument.version);n=yu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new yl(e[0],e[1]);return vl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(vl.min()))return e}return yu.newInvalidDocument(e)}}function xp(e){return new Tp(e)}class Cp extends Sp{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ph((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Pc(((e,t)=>pl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=ff(this.os.serializer,s);r=r.add(i.path.popLast());const l=ap(a);n+=l-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=ff(this.os.serializer,s.convertToNoDocument(vl.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),Ml.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Np(e){return Tc(e,"remoteDocumentGlobal")}function Ap(e){return Tc(e,"remoteDocumentsV14")}function Dp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Op(e,t){const n=t.documentKey.path.toArray();return[e,pf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=pl(n[s],r[s]),i)return i;return i=pl(n.length,r.length),i||(i=pl(n[n.length-2],r[r.length-2]),i||pl(n[n.length-1],r[r.length-1]))}class Rp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Lp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Xh(n.mutation,e,Mc.empty(),yl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Sh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sh();const r=bh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=vh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Sh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=gh();const s=Eh(),o=Eh();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ed)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Xh(o.mutation,t,o.mutation.getFieldMask(),yl.now())):s.set(t.key,Mc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Rp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Eh();let r=new Ac(((e,t)=>e-t)),i=Sh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Mc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Sh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=_h();l.forEach((e=>{if(!i.has(e)){const r=Qh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ml.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Il.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ml.resolve(bh());let o=-1,a=i;return s.next((t=>Ml.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ml.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Sh()))).next((e=>({batchId:o,changes:wh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Il(t)).next((e=>{let t=vh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=vh();return this.indexManager.getCollectionParents(e,r).next((s=>Ml.forEach(s,(s=>{const o=function(e,t){return new Xu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,yu.newInvalidDocument(r)))}));let n=vh();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Xh(s.mutation,i,Mc.empty(),yl.now()),uh(t,i)&&(n=n.insert(e,i))})),n}))}}class Mp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ml.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ud(n.createTime)}),Ml.resolve()}getNamedQuery(e,t){return Ml.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:bf(e.bundledQuery),readTime:Ud(e.readTime)}}(t)),Ml.resolve()}}class Fp{constructor(){this.overlays=new Ac(Il.comparator),this.ls=new Map}getOverlay(e,t){return Ml.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bh();return Ml.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Ml.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Ml.resolve()}getOverlaysForCollection(e,t,n){const r=bh(),i=t.length+1,s=new Il(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ml.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ac(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=bh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ml.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ld(t,n));let i=this.ls.get(t);void 0===i&&(i=Sh(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class jp{constructor(){this.fs=new Pc(Up.ds),this.ws=new Pc(Up._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Up(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new Up(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Il(new bl([])),n=new Up(t,e),r=new Up(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Il(new bl([])),n=new Up(t,e),r=new Up(t,e+1);let i=Sh();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Up(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Up{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Il.comparator(e.key,t.key)||pl(e.As,t.As)}static _s(e,t){return pl(e.As,t.As)||Il.comparator(e.key,t.key)}}class Vp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Pc(Up.ds)}checkEmpty(e){return Ml.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new od(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new Up(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ml.resolve(s)}lookupMutationBatch(e,t){return Ml.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Ml.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ml.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ml.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Up(t,0),r=new Up(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Ml.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pc(pl);return t.forEach((e=>{const t=new Up(e,0),r=new Up(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Ml.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Il.isDocumentKey(i)||(i=i.child(""));const s=new Up(new Il(i),0);let o=new Pc(pl);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),Ml.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Za(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ml.forEach(t.mutations,(r=>{const i=new Up(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new Up(t,0),r=this.Rs.firstAfterOrEqual(n);return Ml.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ml.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zp{constructor(e){this.Ds=e,this.docs=new Ac(Il.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ml.resolve(n?n.document.mutableCopy():yu.newInvalidDocument(t))}getEntries(e,t){let n=gh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():yu.newInvalidDocument(e))})),Ml.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=gh();const s=t.path,o=new Il(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ol(Al(o),n)<=0||(r.has(o.key)||uh(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ml.resolve(i)}getAllFromCollectionGroup(e,t,n,r){$a()}Cs(e,t){return Ml.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bp(this)}getSize(e){return Ml.resolve(this.size)}}class Bp extends Sp{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Ml.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class qp{constructor(e){this.persistence=e,this.xs=new ph((e=>Ku(e)),Gu),this.lastRemoteSnapshotVersion=vl.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jp,this.targetCount=0,this.Ms=fp.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Ml.resolve()}getLastRemoteSnapshotVersion(e){return Ml.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ml.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ml.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Ml.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ml.resolve()}updateTargetData(e,t){return this.Fn(t),Ml.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ml.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ml.waitFor(i).next((()=>r))}getTargetCount(e){return Ml.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Ml.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Ml.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ml.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ml.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Ml.resolve(n)}containsKey(e,t){return Ml.resolve(this.ks.containsKey(t))}}class Kp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ql(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new qp(this),this.indexManager=new Yf,this.remoteDocumentCache=function(e){return new zp(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new df(t),this.qs=new Mp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Vp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Qa("MemoryPersistence","Starting transaction:",e);const r=new Gp(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Ml.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Gp extends Rl{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Qs=new jp,this.js=null}static zs(e){return new Hp(e)}get Ws(){if(this.js)return this.js;throw $a()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Ml.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Ml.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ml.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ml.forEach(this.Ws,(n=>{const r=Il.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,vl.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Ml.or([()=>Ml.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Wp{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Fl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nc,{unique:!0}),e.createObjectStore("documentMutations")}(e),Qp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Ml.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Qp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Ml.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:yc});t.createIndex("collectionPathOverlayIndex",vc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:oc});t.createIndex("documentKeyIndex",ac),t.createIndex("collectionGroupIndex",lc)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fc}).createIndex("sequenceNumberIndex",pc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mc}).createIndex("documentKeyIndex",gc,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=ap(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>Ml.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>Ml.forEach(n,(n=>{Za(n.userId===t.userId);const r=yf(this.serializer,n);return op(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new bl(n),o=function(e){return[0,$l(e)]}(s);r.push(t.get(o).next((n=>n?Ml.resolve():(n=>t.put({targetId:0,path:$l(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Ml.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:dc});const n=t.store("collectionParents"),r=new Xf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:$l(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new bl(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=tc(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=vf(n),i=wf(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Il(bl.fromString(o.document.name).popFirst(5)):o.noDocument?Il.fromSegments(o.noDocument.path):o.unknownDocument?Il.fromSegments(o.unknownDocument.path):$a()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Ml.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=xp(this.serializer),i=new Kp(Hp.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Sh();yf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Ml.forEach(n,((e,n)=>{const s=new Ka(n),o=xf.de(this.serializer,s),a=i.getIndexManager(s),l=lp.de(s,this.serializer,a,i.referenceDelegate);return new Lp(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Sc(t,Ql.ct),e).next()}))}))}}function Qp(e){e.createObjectStore("targetDocuments",{keyPath:uc}).createIndex("documentTargetsIndex",hc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cc,{unique:!0}),e.createObjectStore("targetGlobal")}const Yp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xp{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Xp.D())throw new nl(tl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ip(this,r),this.di=t+"main",this.serializer=new df(a),this.wi=new jl(this.di,this.ui,new Wp(this.serializer)),this.Bs=new pp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xp(this.serializer),this.qs=new kf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&Ya("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nl(tl.FAILED_PRECONDITION,Yp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new Ql(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(zl(e))return Qa("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Jp(e).get("owner").next((e=>Ml.resolve(this.Ri(e))))}Pi(e){return $p(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Tc(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ml.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ml.resolve(!0):Jp(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new nl(tl.FAILED_PRECONDITION,Yp);return!1}}return!(!this.networkEnabled||!this.inForeground)||$p(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Qa("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Sc(e,Ql.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>$p(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return lp.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $f(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return xf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){Qa("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?kc:14===s?Ic:13===s?Ec:12===s?_c:11===s?bc:void $a();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new Sc(r,this.Os?this.Os.next():Ql.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Ya("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new nl(tl.FAILED_PRECONDITION,Pl);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return Jp(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nl(tl.FAILED_PRECONDITION,Yp)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jp(e).put("owner",t)}static D(){return jl.D()}Ai(e){const t=Jp(e);return t.get("owner").next((e=>this.Ri(e)?(Qa("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ml.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ya("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;m()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Qa("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ya("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ya("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Jp(e){return Tc(e,"owner")}function $p(e){return Tc(e,"clientMetadata")}function Zp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class em{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Sh(),r=Sh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new em(e,t.fromCache,n,r)}}class tm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Zu(t))return Ml.resolve(null);let n=ih(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=oh(t,null,"F"),n=ih(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Sh(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,oh(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Zu(t)||r.isEqual(vl.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Wa()<=L.DEBUG&&Qa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ch(t)),this.Wi(e,s,t,Nl(r,-1)))}))}ji(e,t){let n=new Pc(dh(e));return t.forEach(((t,r)=>{uh(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Wa()<=L.DEBUG&&Qa("QueryEngine","Using full collection scan to execute query:",ch(t)),this.Ui.getDocumentsMatchingQuery(e,t,Dl.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class nm{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ac(pl),this.Yi=new ph((e=>Ku(e)),Gu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function rm(e,t,n,r){return new nm(e,t,n,r)}async function im(e,t){const n=el(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Sh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function sm(e){const t=el(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function om(e,t,n){let r=Sh(),i=Sh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=gh();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(vl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Qa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function am(e,t){const n=el(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function lm(e,t){const n=el(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Ml.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new hf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function cm(e,t,n){const r=el(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zl(e))throw e;Qa("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function um(e,t,n){const r=el(e);let i=vl.min(),s=Sh();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=el(e),i=r.Yi.get(n);return void 0!==i?Ml.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,ih(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:vl.min(),n?s:Sh()))).next((e=>(fm(r,hh(t),e),{documents:e,ir:s})))))}function hm(e,t){const n=el(e),r=el(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function dm(e,t){const n=el(e),r=n.Xi.get(t)||vl.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,Nl(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(fm(n,t,e),e)))}function fm(e,t,n){let r=e.Xi.get(t)||vl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function pm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sh();const r=await lm(e,ih(bf(t.bundledQuery))),i=el(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ud(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(jc.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function mm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function gm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ym(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class vm{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new nl(r.error.code,r.error.message))),s?new vm(e,t,r.state,i):(Ya("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new nl(n.error.code,n.error.message))),i?new wm(e,n.state,r):(Ya("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=xh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Jl(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new bm(e,i):(Ya("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class _m{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _m(t.clientId,t.onlineState):(Ya("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Em{constructor(){this.activeTargetIds=xh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Im{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ac(pl),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=mm(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Em),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(mm(this.persistenceKey,n));if(e){const t=bm.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ym(this.persistenceKey,e));if(n){const r=wm.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ym(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qa("SharedClientState","READ",e,t),t}setItem(e,t){Qa("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qa("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(Qa("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void Ya("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=Ql.ct;if(null!=e)try{const n=JSON.parse(e);Za("number"==typeof n),t=n}catch(e){Ya("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ql.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new vm(this.currentUser,e,t,n),i=gm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=gm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=ym(this.persistenceKey,e),i=new wm(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return bm.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return vm.ar(new Ka(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return wm.ar(r,t)}br(e){return _m.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);Qa("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=xh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class km{constructor(){this.Hr=new Em,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Em,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sm{Yr(e){}shutdown(){}}class Tm{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Qa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Qa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xm=null;function Cm(){return null===xm?xm=268435456+Math.round(2147483648*Math.random()):xm++,"0x"+xm.toString(16)}const Nm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Am{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Dm="WebChannelConnection";class Om extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Cm(),o=this.To(e,t);Qa("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(Qa("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Xa("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ga,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Nm[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Cm();return new Promise(((s,o)=>{const a=new Va;a.setWithCredentials(!0),a.listenOnce(La.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ra.NO_ERROR:const t=a.getResponseJson();Qa(Dm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Ra.TIMEOUT:Qa(Dm,"RPC '".concat(e,"' ").concat(i," timed out")),o(new nl(tl.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:const n=a.getStatus();if(Qa(Dm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(tl).indexOf(t)>=0?t:tl.UNKNOWN}(t.status);o(new nl(e,t.message))}else o(new nl(tl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new nl(tl.UNAVAILABLE,"Connection failed."));break;default:$a()}}finally{Qa(Dm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Qa(Dm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Cm(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Oa(),o=Pa(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new ja({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Qa(Dm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Am({ro:t=>{d?Qa(Dm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Qa(Dm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ua.EventType.OPEN,(()=>{d||Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Ua.EventType.CLOSE,(()=>{d||(d=!0,Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,Ua.EventType.ERROR,(t=>{d||(d=!0,Xa(Dm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new nl(tl.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ua.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Za(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ud[e];if(void 0!==t)return fd(t)}(t),i=o.message;void 0===n&&(n=tl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new nl(n,i)),u.close()}else Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,Ma.STAT_EVENT,(t=>{t.stat===Fa.PROXY?Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Fa.NOPROXY&&Qa(Dm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Pm(){return"undefined"!=typeof window?window:null}function Rm(){return"undefined"!=typeof document?document:null}function Lm(e){return new Rd(e,!0)}class Mm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Qa("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Fm{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Mm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===tl.RESOURCE_EXHAUSTED?(Ya(t.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===tl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new nl(tl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Qa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Qa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jm extends Fm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:$a()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Za(void 0===t||"string"==typeof t),jc.fromBase64String(t||"")):(Za(void 0===t||t instanceof Uint8Array),jc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?tl.UNKNOWN:fd(e.code);return new nl(t,e.message||"")}(o);n=new Td(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=qd(e,r.document.name),s=Ud(r.document.updateTime),o=r.document.createTime?Ud(r.document.createTime):vl.min(),a=new mu({mapValue:{fields:r.document.fields}}),l=yu.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=qd(e,r.document),s=r.readTime?Ud(r.readTime):vl.min(),o=yu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=qd(e,r.document),s=r.removedTargetIds||[];n=new kd([],s,i,null)}else{if(!("filter"in t))return $a();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new cd(r,i),o=e.targetId;n=new Sd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vl.min():t.readTime?Ud(t.readTime):vl.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Hd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Hu(r)?{documents:$d(e,r)}:{query:Zd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Fd(e,t.resumeToken);const r=Ld(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vl.min())>0){n.readTime=Md(e,t.snapshotVersion.toTimestamp());const r=Ld(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $a()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Hd(this.serializer),t.removeTarget=e,this.Wo(t)}}class Um extends Fm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Za(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Za(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ud(e.updateTime):Ud(t);return n.isEqual(vl.min())&&(n=Ud(t)),new Kh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ud(e.commitTime);return this.listener.cu(n,t)}return Za(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Hd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Xd(this.serializer,e)))};this.Wo(t)}}class Vm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new nl(tl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===tl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nl(tl.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===tl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nl(tl.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class zm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ya(t),this.mu=!1):Qa("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Bm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Jm(this)&&(Qa("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=el(e);t.vu.add(4),await Km(t),t.bu.set("Unknown"),t.vu.delete(4),await qm(t)}(this))}))})),this.bu=new zm(n,r)}}async function qm(e){if(Jm(e))for(const t of e.Ru)await t(!0)}async function Km(e){for(const t of e.Ru)await t(!1)}function Gm(e,t){const n=el(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Xm(n)?Ym(n):mg(n).Ko()&&Wm(n,t))}function Hm(e,t){const n=el(e),r=mg(n);n.Au.delete(t),r.Ko()&&Qm(n,t),0===n.Au.size&&(r.Ko()?r.jo():Jm(n)&&n.bu.set("Unknown"))}function Wm(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mg(e).su(t)}function Qm(e,t){e.Vu.qt(t),mg(e).iu(t)}function Ym(e){e.Vu=new Cd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),mg(e).start(),e.bu.gu()}function Xm(e){return Jm(e)&&!mg(e).Uo()&&e.Au.size>0}function Jm(e){return 0===el(e).vu.size}function $m(e){e.Vu=void 0}async function Zm(e){e.Au.forEach(((t,n)=>{Wm(e,t)}))}async function eg(e,t){$m(e),Xm(e)?(e.bu.Iu(t),Ym(e)):e.bu.set("Unknown")}async function tg(e,t,n){if(e.bu.set("Online"),t instanceof Td&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Qa("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ng(e,n)}else if(t instanceof kd?e.Vu.Ht(t):t instanceof Sd?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(vl.min()))try{const t=await sm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(jc.EMPTY_BYTE_STRING,r.snapshotVersion)),Qm(e,t);const i=new hf(r.target,t,n,r.sequenceNumber);Wm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qa("RemoteStore","Failed to raise snapshot:",t),await ng(e,t)}}async function ng(e,t,n){if(!zl(t))throw t;e.vu.add(1),await Km(e),e.bu.set("Offline"),n||(n=()=>sm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Qa("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await qm(e)}))}function rg(e,t){return t().catch((n=>ng(e,n,t)))}async function ig(e){const t=el(e),n=gg(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;sg(t);)try{const e=await am(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,og(t,e)}catch(e){await ng(t,e)}ag(t)&&lg(t)}function sg(e){return Jm(e)&&e.Eu.length<10}function og(e,t){e.Eu.push(t);const n=gg(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function ag(e){return Jm(e)&&!gg(e).Uo()&&e.Eu.length>0}function lg(e){gg(e).start()}async function cg(e){gg(e).hu()}async function ug(e){const t=gg(e);for(const n of e.Eu)t.uu(n.mutations)}async function hg(e,t,n){const r=e.Eu.shift(),i=ad.from(r,t,n);await rg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ig(e)}async function dg(e,t){t&&gg(e).ou&&await async function(e,t){if(dd(n=t.code)&&n!==tl.ABORTED){const n=e.Eu.shift();gg(e).Qo(),await rg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ig(e)}var n}(e,t),ag(e)&&lg(e)}async function fg(e,t){const n=el(e);n.asyncQueue.verifyOperationInProgress(),Qa("RemoteStore","RemoteStore received new credentials");const r=Jm(n);n.vu.add(3),await Km(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await qm(n)}async function pg(e,t){const n=el(e);t?(n.vu.delete(2),await qm(n)):t||(n.vu.add(2),await Km(n),n.bu.set("Unknown"))}function mg(e){return e.Su||(e.Su=function(e,t,n){const r=el(e);return r.fu(),new jm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Zm.bind(null,e),ao:eg.bind(null,e),nu:tg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Xm(e)?Ym(e):e.bu.set("Unknown")):(await e.Su.stop(),$m(e))}))),e.Su}function gg(e){return e.Du||(e.Du=function(e,t,n){const r=el(e);return r.fu(),new Um(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:cg.bind(null,e),ao:dg.bind(null,e),au:ug.bind(null,e),cu:hg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await ig(e)):(await e.Du.stop(),e.Eu.length>0&&(Qa("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class yg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nl(tl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(e,t){if(Ya("AsyncQueue","".concat(t,": ").concat(e)),zl(e))return new nl(tl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class wg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Il.comparator(t.key,n.key):(e,t)=>Il.comparator(e.key,t.key),this.keyedMap=vh(),this.sortedSet=new Ac(this.comparator)}static emptySet(e){return new wg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bg{constructor(){this.Cu=new Ac(Il.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):$a():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class _g{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new _g(e,t,wg.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Eg{constructor(){this.Nu=void 0,this.listeners=[]}}class Ig{constructor(){this.queries=new ph((e=>lh(e)),ah),this.onlineState="Unknown",this.ku=new Set}}async function kg(e,t){const n=el(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Eg),i)try{s.Nu=await n.onListen(r)}catch(e){const n=vg(e,"Initialization of query '".concat(ch(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Cg(n)}async function Sg(e,t){const n=el(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Tg(e,t){const n=el(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Cg(n)}function xg(e,t,n){const r=el(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Cg(e){e.ku.forEach((e=>{e.next()}))}class Ng{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new _g(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=_g.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Ag{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Dg{constructor(e){this.serializer=e}rr(e){return qd(this.serializer,e)}ur(e){return e.metadata.exists?Yd(this.serializer,e.document,!1):yu.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ud(e)}}class Og{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pg(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=bl.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new Dg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Sh()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=el(e);let s=Sh(),o=gh();for(const c of n){const e=t.rr(c.metadata.name);c.document&&(s=s.add(e));const n=t.ur(c);n.setReadTime(t.cr(c.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),l=await lm(i,function(e){return ih($u(bl.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>om(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Bs.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new Dg(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await pm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function Pg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Rg{constructor(e){this.key=e}}class Lg{constructor(e){this.key=e}}class Mg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Sh(),this.mutatedKeys=Sh(),this.tc=dh(e),this.ec=new wg(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new bg,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=uh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $a()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new _g(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Sh(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Lg(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Rg(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Sh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return _g.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Fg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class jg{constructor(e){this.key=e,this.fc=!1}}class Ug{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new ph((e=>lh(e)),ah),this._c=new Map,this.mc=new Set,this.gc=new Ac(Il.comparator),this.yc=new Map,this.Ic=new jp,this.Tc={},this.Ec=new Map,this.Ac=fp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Vg(e,t){const n=dy(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await lm(n.localStore,ih(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await zg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Gm(n.remoteStore,e)}return i}async function zg(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await um(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return $g(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await um(e.localStore,t,!0),o=new Mg(t,s.ir),a=o.sc(s.documents),l=Id.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);$g(e,n,c.cc);const u=new Fg(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Bg(e,t){const n=el(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!ah(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await cm(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Hm(n.remoteStore,r.targetId),Xg(n,r.targetId)})).catch(Ll)):(Xg(n,r.targetId),await cm(n.localStore,r.targetId,!0))}async function qg(e,t){const n=el(e);try{const e=await function(e,t){const n=el(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(jc.EMPTY_BYTE_STRING,vl.min()).withLastLimboFreeSnapshotVersion(vl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))}));let a=gh(),l=Sh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(om(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(vl.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ml.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Za(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Za(r.fc):e.removedDocuments.size>0&&(Za(r.fc),r.fc=!1))})),await ty(n,e,t)}catch(e){await Ll(e)}}function Kg(e,t,n){const r=el(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=el(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&Cg(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gg(e,t,n){const r=el(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Ac(Il.comparator);e=e.insert(s,yu.newNoDocument(s,vl.min()));const n=Sh().add(s),i=new Ed(vl.min(),new Map,new Ac(pl),e,n);await qg(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),ey(r)}else await cm(r.localStore,t,!1).then((()=>Xg(r,t,n))).catch(Ll)}async function Hg(e,t){const n=el(e),r=t.batch.batchId;try{const e=await function(e,t){const n=el(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ml.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Za(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Sh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Yg(n,r,null),Qg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ty(n,e)}catch(e){await Ll(e)}}async function Wg(e,t,n){const r=el(e);try{const e=await function(e,t){const n=el(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Za(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Yg(r,t,n),Qg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ty(r,e)}catch(n){await Ll(n)}}function Qg(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Yg(e,t,n){const r=el(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Xg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Jg(e,t)}))}function Jg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Hm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),ey(e))}function $g(e,t,n){for(const r of n)r instanceof Rg?(e.Ic.addReference(r.key,t),Zg(e,r)):r instanceof Lg?(Qa("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Jg(e,r.key)):$a()}function Zg(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Qa("SyncEngine","New document in limbo: "+n),e.mc.add(r),ey(e))}function ey(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Il(bl.fromString(t)),r=e.Ac.next();e.yc.set(r,new jg(n)),e.gc=e.gc.insert(n,r),Gm(e.remoteStore,new hf(ih($u(n.path)),r,"TargetPurposeLimboResolution",Ql.ct))}}async function ty(e,t,n){const r=el(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=em.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=el(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ml.forEach(t,(t=>Ml.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ml.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zl(e))throw e;Qa("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function ny(e,t){const n=el(e);if(!n.currentUser.isEqual(t)){Qa("SyncEngine","User change. New user:",t.toKey());const e=await im(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new nl(tl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ty(n,e.er)}}function ry(e,t){const n=el(e),r=n.yc.get(t);if(r&&r.fc)return Sh().add(r.key);{let e=Sh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function iy(e,t){const n=el(e),r=await um(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&$g(n,t.targetId,i.cc),i}async function sy(e,t){const n=el(e);return dm(n.localStore,t).then((e=>ty(n,e)))}async function oy(e,t,n,r){const i=el(e),s=await function(e,t){const n=el(e),r=el(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Ml.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ig(i.remoteStore):"acknowledged"===n||"rejected"===n?(Yg(i,t,r||null),Qg(i,t),function(e,t){el(el(e).mutationQueue).Cn(t)}(i.localStore,t)):$a(),await ty(i,s)):Qa("SyncEngine","Cannot apply mutation batch with id: "+t)}async function ay(e,t,n){const r=el(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await lm(r.localStore,ih(t[0]));for(const e of t){const t=r.wc.get(e),n=await iy(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await hm(r.localStore,o);e=await lm(r.localStore,t),await zg(r,ly(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function ly(e){return Ju(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function cy(e){const t=el(e);return el(el(t.localStore).persistence).$i()}async function uy(e,t,n,r){const i=el(e);if(i.vc)return void Qa("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await dm(i.localStore,hh(s[0])),r=Ed.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,jc.EMPTY_BYTE_STRING);await ty(i,e,r);break}case"rejected":await cm(i.localStore,t,!0),Xg(i,t,r);break;default:$a()}}async function hy(e,t,n){const r=dy(e);if(r.vc){for(const e of t){if(r._c.has(e)){Qa("SyncEngine","Adding an already active target "+e);continue}const t=await hm(r.localStore,e),n=await lm(r.localStore,t);await zg(r,ly(t),n.targetId,!1,n.resumeToken),Gm(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await cm(r.localStore,e,!1).then((()=>{Hm(r.remoteStore,e),Xg(r,e)})).catch(Ll)}}function dy(e){const t=el(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ry.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gg.bind(null,t),t.dc.nu=Tg.bind(null,t.eventManager),t.dc.Pc=xg.bind(null,t.eventManager),t}function fy(e){const t=el(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wg.bind(null,t),t}class py{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return rm(this.persistence,new tm,e.initialUser,this.serializer)}createPersistence(e){return new Kp(Hp.zs,this.serializer)}createSharedClientState(e){return new km}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class my extends py{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await fy(this.Vc.syncEngine),await ig(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return rm(this.persistence,new tm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new bp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Wl(t,this.persistence);return new Hl(e.asyncQueue,n)}createPersistence(e){const t=Zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sp.withCacheSize(this.cacheSizeBytes):sp.DEFAULT;return new Xp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pm(),Rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new km}}class gy extends my{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof Im&&(this.sharedClientState.syncEngine={jr:oy.bind(null,t),zr:uy.bind(null,t),Wr:hy.bind(null,t),$i:cy.bind(null,t),Qr:sy.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=el(e);if(dy(n),fy(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await ay(n,e.toArray());n.vc=!0,await pg(n.remoteStore,!0);for(const r of t)Gm(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Xg(n,i),cm(n.localStore,i,!0)))),Hm(n.remoteStore,i)})),await t,await ay(n,e),function(e){const t=el(e);t.yc.forEach(((e,n)=>{Hm(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Ac(Il.comparator)}(n),n.vc=!1,await pg(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Pm();if(!Im.D(t))throw new nl(tl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Im(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class yy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,this.syncEngine),await pg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ig}createDatastore(e){const t=Lm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Om(r));var r;return function(e,t,n,r){return new Vm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Kg(this.syncEngine,e,0),s=Tm.D()?new Tm:new Sm,new Bm(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ug(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=el(e);Qa("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Km(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function vy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ya("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class by{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new rl,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new Ag(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class _y{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new nl(tl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=el(e),r=Hd(n.serializer)+"/documents",i={documents:t.map((e=>Bd(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Za(!!t.found),t.found.name,t.found.updateTime;const n=qd(e,t.found.name),r=Ud(t.found.updateTime),i=t.found.createTime?Ud(t.found.createTime):vl.min(),s=new mu({mapValue:{fields:t.found.fields}});return yu.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Za(!!t.missing),Za(!!t.readTime);const n=qd(e,t.missing),r=Ud(t.readTime);return yu.newNoDocument(n,r)}(e,t):$a()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Za(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new id(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Il.fromPath(t);this.mutations.push(new sd(n,this.precondition(n)))})),await async function(e,t){const n=el(e),r=Hd(n.serializer)+"/documents",i={writes:t.map((e=>Xd(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $a();t=vl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nl(tl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vl.min())?Gh.exists(!1):Gh.updateTime(t):Gh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vl.min()))throw new nl(tl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gh.updateTime(t)}return Gh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ey{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new Mm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new _y(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Yl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dd(t)}return!1}}class Iy{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ka.UNAUTHENTICATED,this.clientId=fl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Qa("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Qa("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nl(tl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ky(e,t){e.asyncQueue.verifyOperationInProgress(),Qa("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await im(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Sy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xy(e);Qa("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>fg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>fg(t.remoteStore,n))),e._onlineComponents=t}function Ty(e){return"FirebaseError"===e.name?e.code===tl.FAILED_PRECONDITION||e.code===tl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function xy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qa("FirestoreClient","Using user provided OfflineComponentProvider");try{await ky(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Ty(n))throw n;Xa("Error using user provided cache. Falling back to memory cache: "+n),await ky(e,new py)}}else Qa("FirestoreClient","Using default OfflineComponentProvider"),await ky(e,new py);return e._offlineComponents}async function Cy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qa("FirestoreClient","Using user provided OnlineComponentProvider"),await Sy(e,e._uninitializedComponentsProvider._online)):(Qa("FirestoreClient","Using default OnlineComponentProvider"),await Sy(e,new yy))),e._onlineComponents}function Ny(e){return xy(e).then((e=>e.persistence))}function Ay(e){return xy(e).then((e=>e.localStore))}function Dy(e){return Cy(e).then((e=>e.remoteStore))}function Oy(e){return Cy(e).then((e=>e.syncEngine))}function Py(e){return Cy(e).then((e=>e.datastore))}async function Ry(e){const t=await Cy(e),n=t.eventManager;return n.onListen=Vg.bind(null,t.syncEngine),n.onUnlisten=Bg.bind(null,t.syncEngine),n}function Ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new wy({next:s=>{t.enqueueAndForget((()=>Sg(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new nl(tl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new nl(tl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Ng($u(n.path),s,{includeMetadataChanges:!0,Ku:!0});return kg(e,o)}(await Ry(e),e.asyncQueue,t,n,r))),r.promise}function My(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new wy({next:n=>{t.enqueueAndForget((()=>Sg(e,o))),n.fromCache&&"server"===r.source?i.reject(new nl(tl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ng(n,s,{includeMetadataChanges:!0,Ku:!0});return kg(e,o)}(await Ry(e),e.asyncQueue,t,n,r))),r.promise}function Fy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?gd().encode(e):e,function(e,t){return new by(e,t)}(function(e,t){if(e instanceof Uint8Array)return vy(e,t);if(e instanceof ArrayBuffer)return vy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Lm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=el(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=el(e),r=Ud(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Pg(r));const i=new Og(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await ty(e,o.Ju,void 0),await function(e,t){const n=el(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return Xa("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Oy(e),i,r)}))}function jy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Uy=new Map;function Vy(e,t,n){if(!n)throw new nl(tl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zy(e,t,n,r){if(!0===t&&!0===r)throw new nl(tl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function By(e){if(!Il.isDocumentKey(e))throw new nl(tl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qy(e){if(Il.isDocumentKey(e))throw new nl(tl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ky(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":$a()}function Gy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nl(tl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ky(e);throw new nl(tl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Hy(e,t){if(t<=0)throw new nl(tl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Wy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new nl(tl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nl(tl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Qy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nl(tl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nl(tl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sl;switch(e.type){case"firstParty":return new cl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nl(tl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Uy.get(e);t&&(Qa("ComponentProvider","Removing Datastore"),Uy.delete(e),t.terminate())}(this),Promise.resolve()}}function Yy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Gy(e,Qy))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ka.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new nl(tl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ka(s)}e._authCredentials=new ol(new il(t,n))}}class Xy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $y(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xy(this.firestore,e,this._key)}}class Jy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Jy(this.firestore,e,this._query)}}class $y extends Jy{constructor(e,t,n){super(e,t,$u(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xy(this.firestore,null,new Il(e))}withConverter(e){return new $y(this.firestore,e,this._path)}}function Zy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=N(e),Vy("collection","path",t),e instanceof Qy){const n=bl.fromString(t,...r);return qy(n),new $y(e,null,n)}{if(!(e instanceof Xy||e instanceof $y))throw new nl(tl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bl.fromString(t,...r));return qy(n),new $y(e.firestore,null,n)}}function ev(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=N(e),1===arguments.length&&(t=fl.A()),Vy("doc","path",t),e instanceof Qy){const n=bl.fromString(t,...r);return By(n),new Xy(e,null,new Il(n))}{if(!(e instanceof Xy||e instanceof $y))throw new nl(tl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bl.fromString(t,...r));return By(n),new Xy(e.firestore,e instanceof $y?e.converter:null,new Il(n))}}function tv(e,t){return e=N(e),t=N(t),(e instanceof Xy||e instanceof $y)&&(t instanceof Xy||t instanceof $y)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function nv(e,t){return e=N(e),t=N(t),e instanceof Jy&&t instanceof Jy&&e.firestore===t.firestore&&ah(e._query,t._query)&&e.converter===t.converter}class rv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Mm(this,"async_queue_retry"),this.Xc=()=>{const e=Rm();e&&Qa("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Rm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Rm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new rl;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!zl(e))throw e;Qa("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ya("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=yg.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&$a()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function iv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class sv{constructor(){this._progressObserver={},this._taskCompletionResolver=new rl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ov extends Qy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lv(this),this._firestoreClient.terminate()}}function av(e){return e._firestoreClient||lv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lv(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Hc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Iy(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cv(e,t,n){const r=new rl;return e.asyncQueue.enqueue((async()=>{try{await ky(e,n),await Sy(e,t),r.resolve()}catch(e){const n=e;if(!Ty(n))throw n;Xa("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function uv(e){return function(e){const t=new rl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=el(e);Jm(n.remoteStore)||Qa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=el(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=vg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Oy(e),t))),t.promise}(av(e=Gy(e,ov)))}function hv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ny(e),n=await Dy(e);return t.setNetworkEnabled(!0),function(e){const t=el(e);return t.vu.delete(0),qm(t)}(n)}))}(av(e=Gy(e,ov)))}function dv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ny(e),n=await Dy(e);return t.setNetworkEnabled(!1),async function(e){const t=el(e);t.vu.add(0),await Km(t),t.bu.set("Offline")}(n)}))}(av(e=Gy(e,ov)))}function fv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=el(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await Ay(e),t)))}(av(e=Gy(e,ov)),t).then((t=>t?new Jy(e,null,t.query):null))}function pv(e){if(e._initialized||e._terminated)throw new nl(tl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mv(jc.fromBase64String(e))}catch(e){throw new nl(tl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mv(jc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new nl(tl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new El(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yv{constructor(e){this._methodName=e}}class vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nl(tl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nl(tl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pl(this._lat,e._lat)||pl(this._long,e._long)}}const wv=/^__.*__$/;class bv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ed(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zh(e,this.data,t,this.fieldTransforms)}}class _v{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ed(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ev(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $a()}}class Iv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Iv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return qv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ev(this.ca)&&wv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Lm(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Iv({ca:e,methodName:t,ga:n,path:El.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sv(e){const t=e._freezeSettings(),n=Lm(e._databaseId);return new kv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Tv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);Uv("Data must be an object, but it was:",o,r);const a=Fv(r,o);let l,c;if(s.merge)l=new Mc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Vv(t,r,n);if(!o.contains(i))throw new nl(tl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Kv(e,i)||e.push(i)}l=new Mc(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new bv(new mu(a),l,c)}class xv extends yv{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xv}}function Cv(e,t,n){return new Iv({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Nv extends yv{_toFieldTransform(e){return new qh(e.path,new Lh)}isEqual(e){return e instanceof Nv}}class Av extends yv{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Cv(this,e,!0),n=this.pa.map((e=>Mv(e,t))),r=new Mh(n);return new qh(e.path,r)}isEqual(e){return this===e}}class Dv extends yv{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Cv(this,e,!0),n=this.pa.map((e=>Mv(e,t))),r=new jh(n);return new qh(e.path,r)}isEqual(e){return this===e}}class Ov extends yv{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Vh(e.serializer,Ah(e.serializer,this.Ia));return new qh(e.path,t)}isEqual(e){return this===e}}function Pv(e,t,n,r){const i=e.ya(1,t,n);Uv("Data must be an object, but it was:",i,r);const s=[],o=mu.empty();Cc(r,((e,r)=>{const a=Bv(t,e,n);r=N(r);const l=i.da(a);if(r instanceof xv)s.push(a);else{const e=Mv(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Mc(s);return new _v(o,a,i.fieldTransforms)}function Rv(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[Vv(t,r,n)],l=[i];if(s.length%2!=0)throw new nl(tl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Vv(t,s[d])),l.push(s[d+1]);const c=[],u=mu.empty();for(let d=a.length-1;d>=0;--d)if(!Kv(c,a[d])){const e=a[d];let t=l[d];t=N(t);const n=o.da(e);if(t instanceof xv)c.push(e);else{const r=Mv(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Mc(c);return new _v(u,h,o.fieldTransforms)}function Lv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Mv(n,e.ya(r?4:3,t))}function Mv(e,t){if(jv(e=N(e)))return Uv("Unsupported field value:",t,e),Fv(e,t);if(e instanceof yv)return function(e,t){if(!Ev(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Mv(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=N(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ah(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yl.fromDate(e);return{timestampValue:Md(t.serializer,n)}}if(e instanceof yl){const n=new yl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Md(t.serializer,n)}}if(e instanceof vv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mv)return{bytesValue:Fd(t.serializer,e._byteString)};if(e instanceof Xy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Vd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Ky(e)))}(e,t)}function Fv(e,t){const n={};return Nc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cc(e,((e,r)=>{const i=Mv(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yl||e instanceof vv||e instanceof mv||e instanceof Xy||e instanceof yv)}function Uv(e,t,n){if(!jv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ky(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Vv(e,t,n){if((t=N(t))instanceof gv)return t._internalPath;if("string"==typeof t)return Bv(e,t);throw qv("Field path arguments must be of type string or ",e,!1,void 0,n)}const zv=new RegExp("[~\\*/\\[\\]]");function Bv(e,t,n){if(t.search(zv)>=0)throw qv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new gv(...t.split("."))._internalPath}catch(r){throw qv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function qv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new nl(tl.INVALID_ARGUMENT,a+e+l)}function Kv(e,t){return e.some((e=>e.isEqual(t)))}class Gv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hv extends Gv{data(){return super.data()}}function Wv(e,t){return"string"==typeof t?Bv(e,t):t instanceof gv?t._internalPath:t._delegate._internalPath}function Qv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nl(tl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yv{}class Xv extends Yv{}function Jv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Yv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Zv)).length,n=e.filter((e=>e instanceof $v)).length;if(t>1||t>0&&n>0)throw new nl(tl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class $v extends Xv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new $v(e,t,n)}_apply(e){const t=this._parse(e);return aw(e._query,t),new Jy(e.firestore,e.converter,sh(e._query,t))}_parse(e){const t=Sv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nl(tl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){ow(o,s);const t=[];for(const n of o)t.push(sw(r,e,n));a={arrayValue:{values:t}}}else a=sw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ow(o,s),a=Lv(n,"where",o,"in"===s||"not-in"===s);return ku.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Zv extends Yv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Su.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)aw(n,i),n=sh(n,i)}(e._query,t),new Jy(e.firestore,e.converter,sh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ew extends Xv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ew(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new nl(tl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nl(tl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new _u(t,n);return function(e,t){if(null===eh(e)){const n=th(e);null!==n&&lw(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Jy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class tw extends Xv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new tw(e,t,n)}_apply(e){return new Jy(e.firestore,e.converter,oh(e._query,this._limit,this._limitType))}}class nw extends Xv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nw(e,t,n)}_apply(e){const t=iw(e,this.type,this._docOrFields,this._inclusive);return new Jy(e.firestore,e.converter,function(e,t){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class rw extends Xv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new rw(e,t,n)}_apply(e){const t=iw(e,this.type,this._docOrFields,this._inclusive);return new Jy(e.firestore,e.converter,function(e,t){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function iw(e,t,n,r){if(n[0]=N(n[0]),n[0]instanceof Gv)return function(e,t,n,r,i){if(!r)throw new nl(tl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of rh(e))if(o.field.isKeyField())s.push(ru(t,r.key));else{const e=r.data.field(o.field);if(qc(e))throw new nl(tl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new nl(tl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new vu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Sv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new nl(tl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new nl(tl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!nh(e)&&-1!==s.indexOf("/"))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(bl.fromString(s));if(!Il.isDocumentKey(n))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Il(n);a.push(ru(t,i))}else{const e=Lv(n,r,s);a.push(e)}}return new vu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function sw(e,t,n){if("string"==typeof(n=N(n))){if(""===n)throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nh(t)&&-1!==n.indexOf("/"))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(bl.fromString(n));if(!Il.isDocumentKey(r))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ru(e,new Il(r))}if(n instanceof Xy)return ru(e,n._key);throw new nl(tl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ky(n),"."))}function ow(e,t){if(!Array.isArray(e)||0===e.length)throw new nl(tl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function aw(e,t){if(t.isInequality()){const n=th(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=eh(e);null!==i&&lw(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new nl(tl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nl(tl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function lw(e,t,n){if(!n.isEqual(t))throw new nl(tl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class cw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $a()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Cc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new vv(zc(e.latitude),zc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Kc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const t=Vc(e);return new yl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bl.fromString(e);Za(uf(n));const r=new Wc(n.get(1),n.get(3)),i=new Il(n.popFirst(5));return r.isEqual(t)||Ya("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function uw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hw extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new mv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xy(this.firestore,null,t)}}class dw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fw extends Gv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Wv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class pw extends fw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pw(this._firestore,this._userDataWriter,n.key,n,new dw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nl(tl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new pw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new pw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:gw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $a()}}function yw(e,t){return e instanceof fw&&t instanceof fw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof mw&&t instanceof mw&&e._firestore===t._firestore&&nv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class vw extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new mv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xy(this.firestore,null,t)}}function ww(e){e=Gy(e,Xy);const t=Gy(e.firestore,ov),n=av(t),r=new vw(t);return function(e,t){const n=new rl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=el(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new nl(tl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=vg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Ay(e),t,n))),n.promise}(n,e._key).then((n=>new fw(t,r,e._key,n,new dw(null!==n&&n.hasLocalMutations,!0),e.converter)))}function bw(e){e=Gy(e,Jy);const t=Gy(e.firestore,ov),n=av(t),r=new vw(t);return function(e,t){const n=new rl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await um(e,t,!0),i=new Mg(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=vg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Ay(e),t,n))),n.promise}(n,e._query).then((n=>new mw(t,r,e,n)))}function _w(e,t,n){e=Gy(e,Xy);const r=Gy(e.firestore,ov),i=uw(e.converter,t,n);return Sw(r,[Tv(Sv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gh.none())])}function Ew(e,t,n){e=Gy(e,Xy);const r=Gy(e.firestore,ov),i=Sv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=N(t))||t instanceof gv?Rv(i,"updateDoc",e._key,t,n,a):Pv(i,"updateDoc",e._key,t),Sw(r,[s.toMutation(e._key,Gh.exists(!0))])}function Iw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=N(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||iv(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(iv(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Xy)h=Gy(e.firestore,ov),d=$u(e._key.path),u={next:t=>{n[l]&&n[l](Tw(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Gy(e,Jy);h=Gy(t.firestore,ov),d=t._query;const r=new vw(h);u={next:e=>{n[l]&&n[l](new mw(h,r,t,e))},error:n[l+1],complete:n[l+2]},Qv(e._query)}return function(e,t,n,r){const i=new wy(r),s=new Ng(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>kg(await Ry(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>Sg(await Ry(e),s)))}}(av(h),d,c,u)}function kw(e,t){return function(e,t){const n=new wy(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){el(e).ku.add(t),t.next()}(await Ry(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){el(e).ku.delete(t)}(await Ry(e),n)))}}(av(e=Gy(e,ov)),iv(t)?t:{next:t})}function Sw(e,t){return function(e,t){const n=new rl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=fy(e);try{const e=await function(e,t){const n=el(e),r=yl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Sh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=gh(),l=Sh();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Jh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ed(e.key,t,gu(t.value.mapValue),Gh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:wh(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ac(pl)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await ty(r,e.changes),await ig(r.remoteStore)}catch(e){const t=vg(e,"Failed to persist write");n.reject(t)}}(await Oy(e),t,n))),n.promise}(av(e),t)}function Tw(e,t,n){const r=n.docs.get(t._key),i=new vw(e);return new fw(e,i,t._key,r,new dw(n.hasPendingWrites,n.fromCache),t.converter)}const xw={maxAttempts:5};class Cw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sv(e)}set(e,t,n){this._verifyNotCommitted();const r=Nw(e,this._firestore),i=uw(r.converter,t,n),s=Tv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Gh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Nw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=N(t))||t instanceof gv?Rv(this._dataReader,"WriteBatch.update",r._key,t,n,o):Pv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Gh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nw(e,this._firestore);return this._mutations=this._mutations.concat(new id(t._key,Gh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nl(tl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nw(e,t){if((e=N(e)).firestore!==t)throw new nl(tl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Aw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sv(e)}get(e){const t=Nw(e,this._firestore),n=new hw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return $a();const r=e[0];if(r.isFoundDocument())return new Gv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Gv(this._firestore,n,t._key,null,t.converter);throw $a()}))}set(e,t,n){const r=Nw(e,this._firestore),i=uw(r.converter,t,n),s=Tv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Nw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=N(t))||t instanceof gv?Rv(this._dataReader,"Transaction.update",r._key,t,n,o):Pv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Nw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nw(e,this._firestore),n=new vw(this._firestore);return super.get(e).then((e=>new fw(this._firestore,n,t._key,e._document,new dw(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ga=e}(be),pe(new A("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new ov(new al(e.getProvider("auth-internal")),new hl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nl(tl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Se(qa,"3.13.0",e),Se(qa,"3.13.0","esm2017")}();function Dw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ow(){if("undefined"===typeof Uint8Array)throw new nl("unimplemented","Uint8Arrays are not available in this environment.")}function Pw(){if("undefined"==typeof atob)throw new nl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Rw{constructor(e){this._delegate=e}static fromBase64String(e){return Pw(),new Rw(mv.fromBase64String(e))}static fromUint8Array(e){return Ow(),new Rw(mv.fromUint8Array(e))}toBase64(){return Pw(),this._delegate.toBase64()}toUint8Array(){return Ow(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Mw{enableIndexedDbPersistence(e,t){return function(e,t){pv(e=Gy(e,ov));const n=av(e);if(n._uninitializedComponentsProvider)throw new nl(tl.FAILED_PRECONDITION,"SDK cache is already specified.");Xa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new yy;return cv(n,i,new my(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){pv(e=Gy(e,ov));const t=av(e);if(t._uninitializedComponentsProvider)throw new nl(tl.FAILED_PRECONDITION,"SDK cache is already specified.");Xa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new yy;return cv(t,r,new gy(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new nl(tl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!jl.D())return Promise.resolve();const t=e+"main";await jl.delete(t)}(Zp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Fw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Xa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Yy(this._delegate,e,t,n)}enableNetwork(){return hv(this._delegate)}disableNetwork(){return dv(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,zy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uv(this._delegate)}onSnapshotsInSync(e){return kw(this._delegate,e)}get app(){if(!this._appCompat)throw new nl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jw(this,Zy(this._delegate,e))}catch(t){throw qw(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bw(this,ev(this._delegate,e))}catch(t){throw qw(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qw(this,function(e,t){if(e=Gy(e,Qy),Vy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nl(tl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Jy(e,null,function(e){return new Xu(bl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw qw(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Gy(e,ov);const r=Object.assign(Object.assign({},xw),n);return function(e){if(e.maxAttempts<1)throw new nl(tl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new rl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Py(e);new Ey(e.asyncQueue,i,n,t,r).run()})),r.promise}(av(e),(n=>t(new Aw(e,n))),r)}(this._delegate,(t=>e(new Uw(this,t))))}batch(){return av(this._delegate),new Vw(new Cw(this._delegate,(e=>Sw(this._delegate,e))))}loadBundle(e){return function(e,t){const n=av(e=Gy(e,ov)),r=new sv;return Fy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return fv(this._delegate,e).then((e=>e?new Qw(this,e):null))}}class jw extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rw(new mv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bw.forKey(t,this.firestore,null)}}class Uw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jw(e)}get(e){const t=$w(e);return this._delegate.get(t).then((e=>new Hw(this._firestore,new fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=$w(e);return n?(Dw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=$w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=$w(e);return this._delegate.delete(t),this}}class Vw{constructor(e){this._delegate=e}set(e,t,n){const r=$w(e);return n?(Dw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=$w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=$w(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ww(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=zw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new zw(e,new jw(e),t),r.set(t,i)),i}}zw.INSTANCES=new WeakMap;class Bw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new nl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Bw(t,new Xy(t._delegate,n,new Il(e)))}static forKey(e,t,n){return new Bw(t,new Xy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Jw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jw(this.firestore,Zy(this._delegate,e))}catch(t){throw qw(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=N(e))instanceof Xy&&tv(this._delegate,e)}set(e,t){t=Dw("DocumentReference.set",t);try{return t?_w(this._delegate,e,t):_w(this._delegate,e)}catch(n){throw qw(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ew(this._delegate,e):Ew(this._delegate,e,t,...r)}catch(s){throw qw(s,"updateDoc()","DocumentReference.update()")}}delete(){return Sw(Gy((e=this._delegate).firestore,ov),[new id(e._key,Gh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Kw(t),i=Gw(t,(e=>new Hw(this.firestore,new fw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Iw(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ww(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Gy(e,Xy);const t=Gy(e.firestore,ov);return Ly(av(t),e._key,{source:"server"}).then((n=>Tw(t,e,n)))}(this._delegate):function(e){e=Gy(e,Xy);const t=Gy(e.firestore,ov);return Ly(av(t),e._key).then((n=>Tw(t,e,n)))}(this._delegate),t.then((e=>new Hw(this.firestore,new fw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Bw(this.firestore,e?this._delegate.withConverter(zw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qw(e,t,n){return e.message=e.message.replace(t,n),e}function Kw(e){for(const t of e)if("object"===typeof t&&!Lw(t))return t;return{}}function Gw(e,t){var n,r;let i;return i=Lw(e[0])?e[0]:Lw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Hw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yw(this._delegate,e._delegate)}}class Ww extends Hw{data(e){const t=this._delegate.data(e);return void 0!==t||$a(),t}}class Qw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jw(e)}where(e,t,n){try{return new Qw(this.firestore,Jv(this._delegate,function(e,t,n){const r=t,i=Wv("where",e);return $v._create(i,r,n)}(e,t,n)))}catch(r){throw qw(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qw(this.firestore,Jv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Wv("orderBy",e);return ew._create(n,t)}(e,t)))}catch(n){throw qw(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qw(this.firestore,Jv(this._delegate,(Hy("limit",t=e),tw._create("limit",t,"F"))))}catch(n){throw qw(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Qw(this.firestore,Jv(this._delegate,(Hy("limitToLast",t=e),tw._create("limitToLast",t,"L"))))}catch(n){throw qw(n,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Qw(this.firestore,Jv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nw._create("startAt",t,!0)}(...arguments)))}catch(e){throw qw(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Qw(this.firestore,Jv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nw._create("startAfter",t,!1)}(...arguments)))}catch(e){throw qw(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Qw(this.firestore,Jv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rw._create("endBefore",t,!1)}(...arguments)))}catch(e){throw qw(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Qw(this.firestore,Jv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rw._create("endAt",t,!0)}(...arguments)))}catch(e){throw qw(e,"endAt()","Query.endAt()")}}isEqual(e){return nv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?bw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Gy(e,Jy);const t=Gy(e.firestore,ov),n=av(t),r=new vw(t);return My(n,e._query,{source:"server"}).then((n=>new mw(t,r,e,n)))}(this._delegate):function(e){e=Gy(e,Jy);const t=Gy(e.firestore,ov),n=av(t),r=new vw(t);return Qv(e._query),My(n,e._query).then((n=>new mw(t,r,e,n)))}(this._delegate),t.then((e=>new Xw(this.firestore,new mw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Kw(t),i=Gw(t,(e=>new Xw(this.firestore,new mw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Iw(this._delegate,r,i)}withConverter(e){return new Qw(this.firestore,e?this._delegate.withConverter(zw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Yw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ww(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Ww(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Yw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Ww(this._firestore,n))}))}isEqual(e){return yw(this._delegate,e._delegate)}}class Jw extends Qw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bw(this.firestore,e):null}doc(e){try{return new Bw(this.firestore,void 0===e?ev(this._delegate):ev(this._delegate,e))}catch(t){throw qw(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Gy(e.firestore,ov),r=ev(e),i=uw(e.converter,t);return Sw(n,[Tv(Sv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Bw(this.firestore,e)))}isEqual(e){return tv(this._delegate,e._delegate)}withConverter(e){return new Jw(this.firestore,e?this._delegate.withConverter(zw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $w(e){return Gy(e,Xy)}class Zw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new gv(...t)}static documentId(){return new Zw(El.keyField().canonicalString())}isEqual(e){return(e=N(e))instanceof gv&&this._delegate._internalPath.isEqual(e._internalPath)}}class eb{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Nv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new eb(e)}static delete(){const e=new xv("deleteField");return e._methodName="FieldValue.delete",new eb(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Av("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new eb(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new eb(e)}static increment(e){const t=new Ov("increment",e);return t._methodName="FieldValue.increment",new eb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tb={Firestore:Fw,GeoPoint:vv,Timestamp:yl,Blob:Rw,Transaction:Uw,WriteBatch:Vw,DocumentReference:Bw,DocumentSnapshot:Hw,Query:Qw,QueryDocumentSnapshot:Ww,QuerySnapshot:Xw,CollectionReference:Jw,FieldPath:Zw,FieldValue:eb,setLogLevel:function(e){var t;t=e,Ha.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var nb;(function(e,t){e.INTERNAL.registerComponent(new A("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},tb)))})(nb=br,((e,t)=>new Fw(e,t,new Mw))),nb.registerVersion("@firebase/firestore-compat","0.3.12");var rb=function(){return rb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rb.apply(this,arguments)},ib=function(e){return{loading:void 0===e||null===e,value:e}},sb=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return rb(rb({},e),{error:t.error,loading:!1,value:void 0});case"reset":return ib(t.defaultValue);case"value":return rb(rb({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),ib(n)),i=r[0],s=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,t.useCallback)((function(e){s({type:"error",error:e})}),[]),l=(0,t.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,o,a,l,i.value])},ob=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},ab=function(e,t){var n=!e&&!t,r=!!e&&!!t&&nv(e,t);return n||r},lb=function(e,t){return ob(e,ab,t)},cb=function(e,n){var r=sb(),i=r.error,s=r.loading,o=r.reset,a=r.setError,l=r.setValue,c=r.value,u=lb(e,o);return(0,t.useEffect)((function(){if(u.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?Iw(u.current,n.snapshotListenOptions,l,a):Iw(u.current,l,a);return function(){e()}}l(void 0)}),[u.current]),[c,s,i]};function ub(e){return ub="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(e)}function hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function db(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){db(e,t,n[t])}))}return e}function pb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mb=function(){},gb={},yb={},vb={mark:mb,measure:mb};try{"undefined"!==typeof window&&(gb=window),"undefined"!==typeof document&&(yb=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(vb=performance)}catch(FE){}var wb=(gb.navigator||{}).userAgent,bb=void 0===wb?"":wb,_b=gb,Eb=yb,Ib=vb,kb=(_b.document,!!Eb.documentElement&&!!Eb.head&&"function"===typeof Eb.addEventListener&&"function"===typeof Eb.createElement),Sb=(~bb.indexOf("MSIE")||bb.indexOf("Trident/"),"___FONT_AWESOME___"),Tb="fa",xb="svg-inline--fa",Cb="data-fa-i2svg",Nb=(function(){try{return!0}catch(FE){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),Ab=Nb.concat([11,12,13,14,15,16,17,18,19,20]),Db={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ob=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Db.GROUP,Db.SWAP_OPACITY,Db.PRIMARY,Db.SECONDARY].concat(Nb.map((function(e){return"".concat(e,"x")}))).concat(Ab.map((function(e){return"w-".concat(e)}))),_b.FontAwesomeConfig||{});if(Eb&&"function"===typeof Eb.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=pb(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Eb.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Ob[r]=i)}))}var Pb=fb({},{familyPrefix:Tb,replacementClass:xb,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Ob);Pb.autoReplaceSvg||(Pb.observeMutations=!1);var Rb=fb({},Pb);_b.FontAwesomeConfig=Rb;var Lb=_b||{};Lb[Sb]||(Lb[Sb]={}),Lb[Sb].styles||(Lb[Sb].styles={}),Lb[Sb].hooks||(Lb[Sb].hooks={}),Lb[Sb].shims||(Lb[Sb].shims=[]);var Mb=Lb[Sb],Fb=[];kb&&((Eb.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Eb.readyState)||Eb.addEventListener("DOMContentLoaded",(function e(){Eb.removeEventListener("DOMContentLoaded",e),1,Fb.map((function(e){return e()}))})));var jb,Ub="pending",Vb="settled",zb="fulfilled",Bb="rejected",qb=function(){},Kb="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,Gb="undefined"===typeof setImmediate?setTimeout:setImmediate,Hb=[];function Wb(){for(var e=0;e<Hb.length;e++)Hb[e][0](Hb[e][1]);Hb=[],jb=!1}function Qb(e,t){Hb.push([e,t]),jb||(jb=!0,Gb(Wb,0))}function Yb(e){var t=e.owner,n=t._state,r=t._data,i=e[n],s=e.then;if("function"===typeof i){n=zb;try{r=i(r)}catch(FE){Zb(s,FE)}}Xb(s,r)||(n===zb&&Jb(s,r),n===Bb&&Zb(s,r))}function Xb(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===ub(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?$b(e,r):Jb(e,r))}),(function(t){n||(n=!0,Zb(e,t))})),!0}}catch(FE){return n||Zb(e,FE),!0}return!1}function Jb(e,t){e!==t&&Xb(e,t)||$b(e,t)}function $b(e,t){e._state===Ub&&(e._state=Vb,e._data=t,Qb(t_,e))}function Zb(e,t){e._state===Ub&&(e._state=Vb,e._data=t,Qb(n_,e))}function e_(e){e._then=e._then.forEach(Yb)}function t_(e){e._state=zb,e_(e)}function n_(e){e._state=Bb,e_(e),!e._handled&&Kb&&n.g.process.emit("unhandledRejection",e._data,e)}function r_(e){n.g.process.emit("rejectionHandled",e)}function i_(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof i_===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){Zb(t,e)}try{e((function(e){Jb(t,e)}),n)}catch(FE){n(FE)}}(e,this)}i_.prototype={constructor:i_,_state:Ub,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(qb),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Bb&&Kb&&Qb(r_,this)),this._state===zb||this._state===Bb?Qb(Yb,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},i_.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new i_((function(t,n){var r=[],i=0;function s(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,a=0;a<e.length;a++)(o=e[a])&&"function"===typeof o.then?o.then(s(a),n):r[a]=o;i||t(r)}))},i_.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new i_((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},i_.resolve=function(e){return e&&"object"===ub(e)&&e.constructor===i_?e:new i_((function(t){t(e)}))},i_.reject=function(e){return new i_((function(t,n){n(e)}))};var s_={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function o_(e){if(e&&kb){var t=Eb.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Eb.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Eb.head.insertBefore(t,r),e}}var a_="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function l_(){for(var e=12,t="";e-- >0;)t+=a_[62*Math.random()|0];return t}function c_(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u_(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function h_(e){return e.size!==s_.size||e.x!==s_.x||e.y!==s_.y||e.rotate!==s_.rotate||e.flipX||e.flipY}function d_(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var f_={x:0,y:0,width:"100%",height:"100%"};function p_(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function m_(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,f=void 0!==d&&d,p=r.found?r:n,m=p.width,g=p.height,y="fak"===i,v=y?"":"fa-w-".concat(Math.ceil(m/g*16)),w=[Rb.replacementClass,s?"".concat(Rb.familyPrefix,"-").concat(s):"",v].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),b={children:[],attributes:fb({},h.attributes,{"data-prefix":i,"data-icon":s,class:w,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},_=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(b.attributes[Cb]=""),l&&b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||l_())},children:[l]});var E=fb({},b,{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:fb({},_,h.styles)}),I=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,l=i.width,c=i.icon,u=s.width,h=s.icon,d=d_({transform:a,containerWidth:u,iconWidth:l}),f={tag:"rect",attributes:fb({},f_,{fill:"white"})},p=c.children?{children:c.children.map(p_)}:{},m={tag:"g",attributes:fb({},d.inner),children:[p_(fb({tag:c.tag,attributes:fb({},c.attributes,d.path)},p))]},g={tag:"g",attributes:fb({},d.outer),children:[m]},y="mask-".concat(o||l_()),v="clip-".concat(o||l_()),w={tag:"mask",attributes:fb({},f_,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(t=h,"g"===t.tag?t.children:[t])},w]};return n.push(b,{tag:"rect",attributes:fb({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},f_)}),{children:n,attributes:r}}(E):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,s=u_(e.styles);if(s.length>0&&(n.style=s),h_(i)){var o=d_({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:fb({},o.outer),children:[{tag:"g",attributes:fb({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:fb({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(E),k=I.children,S=I.attributes;return E.children=k,E.attributes=S,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fb({},i,{id:!0===s?"".concat(t,"-").concat(Rb.familyPrefix,"-").concat(n):s}),children:r}]}]}(E):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(h_(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=u_(fb({},s,{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(E)}var g_=function(){},y_=(Rb.measurePerformance&&Ib&&Ib.mark&&Ib.measure,function(e,t,n,r){var i,s,o,a=Object.keys(e),l=a.length,c=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<l;i++)o=c(o,e[s=a[i]],s,e);return o});function v_(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof Mb.hooks.addPack||r?Mb.styles[e]=fb({},Mb.styles[e]||{},i):Mb.hooks.addPack(e,i),"fas"===e&&v_("fa",t)}var w_=Mb.styles,b_=Mb.shims,__=function(){var e=function(e){return y_(w_,(function(t,n,r){return t[r]=y_(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in w_;y_(b_,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:s},e}),{})};__();Mb.styles;function E_(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function I_(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?c_(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(c_(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(I_).join(""),"</").concat(t,">")}var k_=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function S_(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}S_.prototype=Object.create(Error.prototype),S_.prototype.constructor=S_;var T_={fill:"currentColor"},x_={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},C_={tag:"path",attributes:fb({},T_,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},N_=fb({},x_,{attributeName:"opacity"});fb({},T_,{cx:"256",cy:"364",r:"28"}),fb({},x_,{attributeName:"r",values:"28;14;28;28;14;28;"}),fb({},N_,{values:"1;0;1;1;0;1;"}),fb({},T_,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),fb({},N_,{values:"1;0;0;0;0;1;"}),fb({},T_,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),fb({},N_,{values:"0;0;1;1;0;0;"}),Mb.styles;function A_(e){var t=e[0],n=e[1],r=pb(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Rb.familyPrefix,"-").concat(Db.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Rb.familyPrefix,"-").concat(Db.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Rb.familyPrefix,"-").concat(Db.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}Mb.styles;var D_='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function O_(){var e=Tb,t=xb,n=Rb.familyPrefix,r=Rb.replacementClass,i=D_;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var P_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=fb({},e.definitions[t]||{},i[t]),v_(t,i[t]),__()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][s]=o})),e}}],n&&hb(t.prototype,n),r&&hb(t,r),e}();function R_(){Rb.autoAddCss&&!U_&&(o_(O_()),U_=!0)}function L_(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return I_(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(kb){var t=Eb.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function M_(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return E_(j_.definitions,n,r)||E_(Mb.styles,n,r)}var F_,j_=new P_,U_=!1,V_={transform:function(e){return k_(e)}},z_=(F_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?s_:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,l=t.maskId,c=void 0===l?null:l,u=t.title,h=void 0===u?null:u,d=t.titleId,f=void 0===d?null:d,p=t.classes,m=void 0===p?[]:p,g=t.attributes,y=void 0===g?{}:g,v=t.styles,w=void 0===v?{}:v;if(e){var b=e.prefix,_=e.iconName,E=e.icon;return L_(fb({type:"icon"},e),(function(){return R_(),Rb.autoA11y&&(h?y["aria-labelledby"]="".concat(Rb.replacementClass,"-title-").concat(f||l_()):(y["aria-hidden"]="true",y.focusable="false")),m_({icons:{main:A_(E),mask:a?A_(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:_,transform:fb({},s_,r),symbol:s,title:h,maskId:c,titleId:f,extra:{attributes:y,styles:w,classes:m}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:M_(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:M_(r||{})),F_(n,fb({},t,{mask:r}))}),B_=n(7),q_=n.n(B_);function K_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K_(Object(n),!0).forEach((function(t){W_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H_(e){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(e)}function W_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y_(e){return function(e){if(Array.isArray(e))return X_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return X_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X_(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J_(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var $_=["style"];var Z_=!1;try{Z_=!0}catch(FE){}function eE(e){return e&&"object"===H_(e)&&e.prefix&&e.iconName&&e.icon?e:V_.icon?V_.icon(e):null===e?null:e&&"object"===H_(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function tE(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?W_({},e,t):{}}var nE=["forwardedRef"];function rE(e){var t=e.forwardedRef,n=Q_(e,nE),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=eE(r),h=tE("classes",[].concat(Y_(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,s=e.bounce,o=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,y=e.size,v=e.rotation,w=e.pull,b=(W_(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(y),"undefined"!==typeof y&&null!==y),W_(t,"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),W_(t,"fa-pull-".concat(w),"undefined"!==typeof w&&null!==w),W_(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(n)),Y_(o.split(" ")))),d=tE("transform","string"===typeof n.transform?V_.transform(n.transform):n.transform),f=tE("mask",eE(i)),p=z_(u,G_(G_(G_(G_({},h),d),f),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!p)return function(){var e;!Z_&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=p.abstract,g={ref:t};return Object.keys(n).forEach((function(e){rE.defaultProps.hasOwnProperty(e)||(g[e]=n[e])})),iE(m[0],g)}rE.displayName="FontAwesomeIcon",rE.propTypes={beat:q_().bool,border:q_().bool,beatFade:q_().bool,bounce:q_().bool,className:q_().string,fade:q_().bool,flash:q_().bool,mask:q_().oneOfType([q_().object,q_().array,q_().string]),maskId:q_().string,fixedWidth:q_().bool,inverse:q_().bool,flip:q_().oneOf([!0,!1,"horizontal","vertical","both"]),icon:q_().oneOfType([q_().object,q_().array,q_().string]),listItem:q_().bool,pull:q_().oneOf(["right","left"]),pulse:q_().bool,rotation:q_().oneOf([0,90,180,270]),shake:q_().bool,size:q_().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:q_().bool,spinPulse:q_().bool,spinReverse:q_().bool,symbol:q_().oneOfType([q_().bool,q_().string]),title:q_().string,titleId:q_().string,transform:q_().oneOfType([q_().string,q_().object]),swapOpacity:q_().bool},rE.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var iE=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=J_(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[J_(t)]=r}return e}),{attrs:{}}),o=r.style,a=void 0===o?{}:o,l=Q_(r,$_);return s.attrs.style=G_(G_({},s.attrs.style),a),t.apply(void 0,[n.tag,G_(G_({},s.attrs),l)].concat(Y_(i)))}.bind(null,t.createElement),sE={prefix:"fas",iconName:"door-open",icon:[640,512,[],"f52b","M624 448h-80V113.45C544 86.19 522.47 64 496 64H384v64h96v384h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM312.24 1.01l-192 49.74C105.99 54.44 96 67.7 96 82.92V448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h336V33.18c0-21.58-19.56-37.41-39.76-32.17zM264 288c-13.25 0-24-14.33-24-32s10.75-32 24-32 24 14.33 24 32-10.75 32-24 32z"]},oE={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},aE={prefix:"fas",iconName:"list-ul",icon:[512,512,[],"f0ca","M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"]},lE={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},cE={prefix:"fas",iconName:"save",icon:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"]},uE={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},hE={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]},dE={prefix:"fas",iconName:"user-cog",icon:[640,512,[],"f4fe","M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"]},fE={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]},pE=n(184);const mE=function(e){return(0,pE.jsxs)("div",{id:"topTab",children:[(0,pE.jsx)("div",{className:"topTabThird first",children:(0,pE.jsxs)("select",{id:"sortParameterSelector",value:e.sortParameter,disabled:e.dataLength<=1,onChange:t=>e.setSortParameter(t.target.value),children:[(0,pE.jsx)("option",{"aria-label":"Increasing by taskname",value:"taskName asc",children:"Name \u2b06"}),(0,pE.jsx)("option",{"aria-label":"Decreasing by taskname",value:"taskName desc",children:"Name \u2b07"}),(0,pE.jsx)("option",{"aria-label":"Increasing by date created",value:"created asc",children:"Date \u2b06"}),(0,pE.jsx)("option",{"aria-label":"Decreasing by date created",value:"created desc",children:"Date \u2b07"}),(0,pE.jsx)("option",{"aria-label":"Increasing by priority level",value:"priorityLevel asc",children:"Priority \u2b06"}),(0,pE.jsx)("option",{"aria-label":"Decreasing by priority level",value:"priorityLevel desc",children:"Priority \u2b07"})]})}),(0,pE.jsx)("div",{className:"topTabThird",children:(0,pE.jsx)("h1",{children:"To-Do"})}),(0,pE.jsx)("div",{className:"topTabThird last",children:e.appMode===TE.EDIT_MODE?(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)("button",{"aria-label":"Cancel Edits",id:"cancelEdits",onClick:()=>{e.setDataChanges({}),e.setAppMode(TE.DEFAULT_MODE)},children:(0,pE.jsx)(rE,{icon:hE})}),(0,pE.jsx)("button",{"aria-label":"Save Edits",id:"saveEdits",onClick:()=>{e.applyDataChanges(),e.setAppMode(TE.DEFAULT_MODE)},children:(0,pE.jsx)(rE,{icon:cE})})]}):(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)("button",{"aria-label":"Edit Button",id:"editButton",onClick:()=>e.setAppMode(TE.EDIT_MODE),disabled:e.dataLength<1||e.appMode!==TE.DEFAULT_MODE,children:(0,pE.jsx)(rE,{icon:oE})}),(0,pE.jsx)("button",{"aria-label":"Add Button",id:"addItem",onClick:()=>{e.setAppMode(TE.ADD_TASK_MODE)},disabled:e.appMode!==TE.DEFAULT_MODE||0===e.lists.length,children:(0,pE.jsx)(rE,{icon:lE})})]})})]})};const gE=function(e){var t,n;function r(t,n){e.addToTaskChangeList(e.task.id,{...e.taskChangeList,[t]:n})}return(0,pE.jsx)(pE.Fragment,{children:!("delete"in e.taskChangeList)&&(0,pE.jsx)("li",{className:"listItem",children:(0,pE.jsxs)("label",{className:"taskLabel",children:[(0,pE.jsx)("input",{className:"checkbox",type:"checkbox",checked:e.task.isChecked,disabled:e.appMode===TE.EDIT_MODE,onChange:t=>e.onTaskChanged(e.task.id,"isChecked",t.target.checked)}),(0,pE.jsx)("div",{className:"taskContent",children:e.appMode===TE.EDIT_MODE?(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)("input",{className:"editInput",type:"text",value:void 0!==e.taskChangeList.taskName?e.taskChangeList.taskName:e.task.taskName,onChange:e=>{r("taskName",e.target.value)}}),(0,pE.jsxs)("select",{className:"prioritySelector",value:(null===(t=e.taskChangeList)||void 0===t?void 0:t.priorityLevel)||e.task.priorityLevel,onChange:e=>r("priorityLevel",parseInt(e.target.value)),children:[(0,pE.jsx)("option",{"aria-label":"Low priority",value:"1",children:"!"}),(0,pE.jsx)("option",{"aria-label":"Medium priority",value:"2",children:"!!"}),(0,pE.jsx)("option",{"aria-label":"High priority",value:"3",children:"!!!"})]}),(0,pE.jsx)("button",{"aria-label":"Delete task",className:"deleteButton",onClick:()=>{r("delete",!0)},children:(0,pE.jsx)(rE,{icon:uE,size:"xs"})})]}):(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)("span",{className:"taskName",children:e.task.taskName}),(0,pE.jsx)("span",{className:(n=e.task.priorityLevel,1===n?"priorityLevel low":2===n?"priorityLevel medium":"priorityLevel high"),children:"!".repeat(e.task.priorityLevel)})]})})]})})})};const yE=function(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.filter((t=>e.tasksShowing===xE.ALL||e.tasksShowing===xE.UNCOMPLETED&&!t.isChecked));function r(t,n){e.setDataChanges({...e.dataChanges,[t]:n})}return(0,pE.jsx)("ul",{id:"itemList",children:n.length>0?n.map((t=>(0,pE.jsx)(gE,{task:t,onTaskChanged:e.onTaskChanged,appMode:e.appMode,addToTaskChangeList:r,taskChangeList:t.id in e.dataChanges?e.dataChanges[t.id]:{}},t.id))):(0,pE.jsx)("li",{id:"noItems",children:(0,pE.jsx)("h3",{children:e.appMode===TE.EDIT_MODE?"No tasks to edit.":0===e.lists.length?"You have no lists. Create your first one by clicking the lists icon above!":"You have completed all your tasks, woohoo!"})},"1")})};const vE=function(e){const[n,r]=(0,t.useState)(null);function i(e){return e>1?e+" tasks":e+" task"}const s=(0,pE.jsxs)("div",{id:"deleteButtonContainer",children:[null===n?(0,pE.jsx)("button",{type:"button",id:"deleteCompleted",disabled:e.tasksShowing===xE.UNCOMPLETED||0===e.data.filter((e=>e.isChecked)).length,onClick:()=>r("completed"),children:" Delete All Completed"}):(0,pE.jsx)("button",{type:"button",id:"cancel",onClick:()=>r(null),children:" Cancel"}),null===n?(0,pE.jsx)("button",{type:"button",id:"deleteAll",disabled:0===e.data.length,onClick:()=>{r("all")},children:" Delete All"}):(0,pE.jsxs)("button",{type:"button",id:"confirm",onClick:()=>{e.onTasksDeleted("all"===n?e.data.map((e=>e.id)):e.data.filter((e=>e.isChecked)).map((e=>e.id))),r(null)},children:[" Delete ",i("all"===n?e.data.length:e.data.filter((e=>e.isChecked)).length)]})]}),o=(0,pE.jsxs)("div",{"aria-label":"Select Shown Tasks",id:"switcherContainer",children:[(0,pE.jsx)("button",{"aria-label":"Show All Tasks",type:"button",id:"showAll",disabled:e.tasksShowing===xE.ALL,onClick:()=>e.setTasksShowing(xE.ALL),children:" All"}),(0,pE.jsx)("button",{"aria-label":"Show Uncompleted Tasks",type:"button",id:"showUncompleted",disabled:e.tasksShowing===xE.UNCOMPLETED,onClick:()=>e.setTasksShowing(xE.UNCOMPLETED),children:" Uncompleted"})]});return(0,pE.jsxs)("div",{id:"footer",children:[e.appMode===TE.EDIT_MODE?s:o,(0,pE.jsxs)("div",{id:"signOutRow",children:[(0,pE.jsx)("span",{children:e.user.email}),(0,pE.jsx)("button",{id:"signOutButton",onClick:()=>e.auth.signOut(),children:"Sign Out"})]})]})};const wE=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(1);return(0,pE.jsx)("div",{id:"popUpBackground",children:(0,pE.jsxs)("div",{id:"popUp",children:[(0,pE.jsxs)("div",{id:"popUpHeader",children:[(0,pE.jsx)("button",{id:"closePopUp",onClick:()=>{r(""),s(1),e.setAppMode(TE.DEFAULT_MODE)},children:"X"}),(0,pE.jsx)("h2",{children:" New Task "}),(0,pE.jsx)("button",{children:"X"})]}),(0,pE.jsxs)("form",{id:"createForm",onSubmit:t=>{t.preventDefault(),e.onItemAdded(n,i),r(""),s(1),e.setAppMode(TE.DEFAULT_MODE)},children:[(0,pE.jsx)("input",{id:"taskName",type:"text",value:n,onChange:e=>r(e.target.value),autoFocus:!0}),(0,pE.jsxs)("div",{id:"prioritySelector",children:[(0,pE.jsx)("button",{"aria-label":"Low priority",className:"priorityButton",type:"button",id:"low",disabled:1===i,onClick:()=>s(1),children:"Low!"}),(0,pE.jsx)("button",{"aria-label":"Medium priority",className:"priorityButton",type:"button",id:"medium",disabled:2===i,onClick:()=>s(2),children:"Medium!!"}),(0,pE.jsx)("button",{"aria-label":"High priority",className:"priorityButton",type:"button",id:"high",disabled:3===i,onClick:()=>s(3),children:"High!!!"})]}),(0,pE.jsx)("button",{id:"addTask",type:"submit",disabled:0===n.length,children:"Add Task"})]})]})})};const bE=function(e){var t;return(0,pE.jsxs)("div",{id:"listSelectorRow",children:[(0,pE.jsx)("div",{className:"topTabThird first",children:(0,pE.jsx)("select",{id:"listSelector",disabled:0===e.lists.length,value:e.currentListID||void 0,onChange:t=>e.setCurrentListID(t.target.value),children:e.lists.map((e=>(0,pE.jsx)("option",{value:e.id,children:e.listName},e.id)))})}),(0,pE.jsx)("div",{className:"topTabThird"}),(0,pE.jsxs)("div",{className:"topTabThird last",children:[(null===(t=e.lists.find((t=>t.id===e.currentListID)))||void 0===t?void 0:t.owner)===e.user.email&&(0,pE.jsx)("button",{id:"shareLists",onClick:()=>e.setAppMode(TE.SHARE_LISTS_MODE),children:(0,pE.jsx)(rE,{icon:fE})}),(0,pE.jsx)("button",{id:"editLists",onClick:()=>e.setAppMode(TE.EDIT_LISTS_MODE),children:(0,pE.jsx)(rE,{icon:aE})})]})]})};const _E=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(null);function o(t){return(0,pE.jsxs)(pE.Fragment,{children:[t.owner===e.user.email?(0,pE.jsx)("td",{className:"listNameCell",children:(0,pE.jsx)("input",{className:"listNameInput",type:"text",value:t.listName,onChange:n=>e.onListChanged(t.id,"listName",n.target.value)})}):(0,pE.jsx)("td",{className:"sharedEmailCell",children:(0,pE.jsx)("span",{children:t.listName})}),(0,pE.jsx)("td",{className:"sharedCell",children:t.sharedWith.length>1&&(0,pE.jsx)(rE,{icon:fE,size:"xs"})}),(0,pE.jsx)("td",{className:"deleteCell",children:(0,pE.jsx)("button",{className:"deleteListButton",onClick:()=>s(t.id),children:t.owner===e.user.email?(0,pE.jsx)(rE,{icon:uE,size:"xs"}):(0,pE.jsx)(rE,{icon:sE,size:"xs"})})})]})}function a(t){return(0,pE.jsxs)("td",{colSpan:"3",className:"confirmCell",children:[(0,pE.jsxs)("span",{children:[(t.owner===e.user.email?"Delete ":"Leave ")+t.listName,"?"]}),(0,pE.jsx)("button",{className:"cancelButton",onClick:()=>s(null),children:"No"}),(0,pE.jsx)("button",{className:"confirmButton",onClick:()=>{t.owner===e.user.email?(e.onListDeleted(t.id),s(null)):e.onListChanged(t.id,"sharedWith",t.sharedWith.filter((t=>t!==e.user.email)))},children:"Yes"})]})}return(0,pE.jsx)("div",{id:"popUpBackground",children:(0,pE.jsxs)("div",{id:"popUp",children:[(0,pE.jsxs)("div",{id:"popUpHeader",children:[(0,pE.jsx)("button",{id:"closePopUp",onClick:()=>{r(""),s(null),e.setAppMode(TE.DEFAULT_MODE)},children:"X"}),(0,pE.jsx)("h2",{id:"tableTitle",children:" Lists "}),(0,pE.jsx)("button",{children:"X"})]}),e.lists.length>0?(0,pE.jsx)("div",{id:"tableContainer",children:(0,pE.jsxs)("table",{id:"table",border:"1",frame:"void",rules:"rows",children:[(0,pE.jsx)("thead",{children:(0,pE.jsxs)("tr",{className:"tableHeaderRow",children:[(0,pE.jsx)("th",{className:"listNameCell",children:"Name"}),(0,pE.jsx)("th",{className:"sharedCell",children:"Shared"}),(0,pE.jsx)("th",{className:"deleteCell",children:"Delete"})]})}),(0,pE.jsx)("tbody",{children:e.lists.map((e=>(0,pE.jsx)("tr",{className:"tableRow",children:i===e.id?a(e):o(e)},e.id)))})]})}):(0,pE.jsx)("div",{id:"messageContainer",children:(0,pE.jsx)("h3",{children:"Create your first list!"})}),(0,pE.jsxs)("form",{id:"createRow",children:[(0,pE.jsx)("div",{id:"createInputWrapper",children:(0,pE.jsx)("input",{id:"createInput",type:"text",value:n,placeholder:"New list",onChange:e=>r(e.target.value)})}),(0,pE.jsx)("div",{id:"createButtonWrapper",children:(0,pE.jsx)("button",{id:"createNewButton",type:"submit",disabled:0===n.length,onClick:t=>{t.preventDefault(),e.onListAdded(n,0===e.lists.length),r("")},children:(0,pE.jsx)(rE,{icon:lE})})})]})]})})};const EE=function(){return(0,pE.jsx)("div",{id:"popUpBackground",className:"loadingPopUpBackground",children:(0,pE.jsx)("div",{id:"loader"})})};function IE(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}const kE=function(e){const n="Sign In",r="Sign Up",[i,s]=(0,t.useState)(null);function o(e){return e.replace("Firebase: ","").split("(")[0]}function a(){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("");return(0,pE.jsx)(pE.Fragment,{children:e.signUpLoading?(0,pE.jsx)(EE,{}):(0,pE.jsxs)("form",{id:"signUp",children:[(0,pE.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,pE.jsx)("input",{id:"email",className:"signUpSignInInput",type:"email",value:n,onChange:e=>r(e.target.value)}),(0,pE.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,pE.jsx)("input",{id:"password",className:"signUpSignInInput",type:"password",value:i,onChange:e=>s(e.target.value)}),""!==i&&i.length<6&&(0,pE.jsx)("span",{className:"errorMessage",children:"Password must be at least 6 characters long"}),(0,pE.jsx)("label",{htmlFor:"verifyPassword",children:" Verify Password:"}),(0,pE.jsx)("input",{id:"verifyPassword",className:"signUpSignInInput",type:"password",value:a,onChange:e=>l(e.target.value)}),""!==i&&""!==a&&i!==a&&(0,pE.jsx)("span",{className:"errorMessage",children:"Passwords don't match!"}),(0,pE.jsx)("button",{id:"signUpSubmit",type:"submit",onClick:()=>e.createUserWithEmailAndPassword(n,i),disabled:!IE(n)||i.length<6||i!==a,children:"Submit"}),null!==e.signUpError&&void 0!==e.signUpError&&(0,pE.jsx)("span",{className:"errorMessage",children:o(e.signUpError.message)})]})})}function l(){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)("");return(0,pE.jsx)(pE.Fragment,{children:e.signInLoading?(0,pE.jsx)(EE,{}):(0,pE.jsxs)("form",{id:"signIn",children:[(0,pE.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,pE.jsx)("input",{id:"email",className:"signUpSignInInput",type:"email",value:n,onChange:e=>r(e.target.value)}),(0,pE.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,pE.jsx)("input",{id:"password",className:"signUpSignInInput",type:"password",value:i,onChange:e=>s(e.target.value)}),(0,pE.jsx)("button",{id:"signInSubmit",type:"submit",onClick:()=>e.signInWithEmailAndPassword(n,i),disabled:""===n||""===i,children:"Submit"}),null!==e.signInError&&void 0!==e.signInError&&(0,pE.jsx)("span",{className:"errorMessage",children:o(e.signInError.message)})]})})}return(0,pE.jsxs)("div",{id:"signUpSignIn",children:[null===i&&(0,pE.jsx)("h1",{id:"title",children:"To-Do List"}),(0,pE.jsxs)("div",{id:"buttonOptions",children:[i===n&&(0,pE.jsx)(l,{}),i===r&&(0,pE.jsx)(a,{}),null!==i&&(0,pE.jsxs)("div",{id:"divider",children:[(0,pE.jsx)("hr",{}),(0,pE.jsx)("span",{children:"Or"}),(0,pE.jsx)("hr",{})]}),i!==n&&(0,pE.jsx)("button",{id:"logInButton",onClick:()=>s(n),children:"Log In"}),i!==r&&(0,pE.jsx)("button",{id:"signUpButton",onClick:()=>s(r),children:"Sign Up"})]})]})};const SE=function(e){const[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),u=e.lists.find((t=>t.id===e.currentListID));function h(t){return[i,o].includes(t)?function(t){return(0,pE.jsxs)("td",{colSpan:"3",className:"confirmCell",children:[(0,pE.jsxs)("span",{children:[t+":",(0,pE.jsx)("br",{}),i===t?"Remove from list?":"Make owner? (You will lose ownership)"]}),(0,pE.jsx)("button",{className:"cancelButton",onClick:()=>i===t?s(null):a(null),children:"No"}),(0,pE.jsx)("button",{className:"confirmButton",onClick:()=>{i===t?(s(null),c(null),e.onListChanged(e.currentListID,"sharedWith",u.sharedWith.filter((e=>e!==t)))):(e.onListChanged(e.currentListID,"owner",t),e.setAppMode(TE.DEFAULT_MODE))},children:"Yes"})]})}(t):t===l?function(e){return(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsxs)("td",{className:"sharedEmailCell",children:[(0,pE.jsx)("button",{className:"makeOwnerButton",onClick:()=>a(e),children:"Make Owner"}),(0,pE.jsx)("button",{className:"removeUserButton",onClick:()=>s(e),children:"Remove"})]}),(0,pE.jsx)("td",{className:"manageCell",children:(0,pE.jsx)("button",{className:"cancelManageButton",onClick:()=>c(null),children:(0,pE.jsx)(rE,{icon:hE,size:"xs"})})})]})}(t):function(e){return(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)("td",{className:"sharedEmailCell",children:(0,pE.jsx)("span",{children:e})}),(0,pE.jsx)("td",{className:"manageCell",children:(0,pE.jsx)("button",{className:"manageButton",onClick:()=>c(e),children:(0,pE.jsx)(rE,{icon:dE,size:"xs"})})})]})}(t)}return(0,pE.jsx)("div",{id:"popUpBackground",children:(0,pE.jsxs)("div",{id:"popUp",children:[(0,pE.jsxs)("div",{id:"popUpHeader",children:[(0,pE.jsx)("button",{id:"closePopUp",disabled:0===e.lists.length,onClick:()=>{r(""),s(null),a(null),e.setAppMode(TE.DEFAULT_MODE)},children:"X"}),(0,pE.jsxs)("h2",{id:"tableTitle",children:["Share List:",(0,pE.jsx)("br",{}),u.listName]}),(0,pE.jsx)("button",{children:"X"})]}),u.sharedWith.filter((t=>t!==e.user.email)).length>0?(0,pE.jsx)("div",{id:"tableContainer",children:(0,pE.jsxs)("table",{id:"table",border:"1",frame:"void",rules:"rows",children:[(0,pE.jsx)("thead",{children:(0,pE.jsxs)("tr",{className:"tableHeaderRow",children:[(0,pE.jsx)("th",{className:"sharedEmailCell",children:"Email"}),(0,pE.jsx)("th",{className:"manageCell",children:"Settings"})]})}),(0,pE.jsx)("tbody",{children:u.sharedWith.filter((t=>t!==e.user.email)).map((e=>(0,pE.jsx)("tr",{className:"tableRow",children:h(e)},e)))})]})}):(0,pE.jsx)("div",{id:"messageContainer",children:(0,pE.jsx)("h3",{children:"Add another user below!"})}),(0,pE.jsxs)("form",{id:"createRow",children:[(0,pE.jsx)("div",{id:"createInputWrapper",children:(0,pE.jsx)("input",{id:"createInput",type:"email",value:n,placeholder:"User email",onChange:e=>r(e.target.value)})}),(0,pE.jsx)("div",{id:"createButtonWrapper",children:(0,pE.jsx)("button",{id:"createNewButton",type:"submit",disabled:!IE(n)||u.sharedWith.includes(n),onClick:t=>{t.preventDefault(),e.onListChanged(e.currentListID,"sharedWith",u.sharedWith.concat([n])),r("")},children:(0,pE.jsx)(rE,{icon:lE})})})]})]})})},TE={ADD_TASK_MODE:"add_task_mode",EDIT_LISTS_MODE:"edit_lists_mode",SHARE_LISTS_MODE:"share_lists_mode",DEFAULT_MODE:"default_mode",EDIT_MODE:"edit_mode"},xE={ALL:"all",UNCOMPLETED:"uncompleted"};const CE=function(e){const[n,r]=(0,t.useState)(TE.DEFAULT_MODE),[i,s]=(0,t.useState)(xE.ALL),[o,a]=(0,t.useState)({});return(0,pE.jsxs)("div",{className:"App",children:[n===TE.SHARE_LISTS_MODE&&(0,pE.jsx)(SE,{appMode:n,setAppMode:r,user:e.user,lists:e.lists,onListChanged:e.onListChanged,currentListID:e.currentListID}),n===TE.EDIT_LISTS_MODE&&(0,pE.jsx)(_E,{appMode:n,setAppMode:r,lists:e.lists,user:e.user,onListAdded:e.onListAdded,onListChanged:e.onListChanged,onListDeleted:e.onListDeleted}),n===TE.ADD_TASK_MODE&&(0,pE.jsx)(wE,{appMode:n,setAppMode:r,onItemAdded:e.onTaskAdded}),(0,pE.jsx)(mE,{dataLength:e.data.length,lists:e.lists,appMode:n,setAppMode:r,applyDataChanges:function(){let t=[];Object.keys(o).forEach((function(n){"delete"in o[n]&&t.push(n),Object.keys(o[n]).filter((e=>"delete"!==e)).forEach((function(t){e.onTaskChanged(n,t,o[n][t])}))})),t.length>0&&e.onTasksDeleted(t)},setDataChanges:a,sortParameter:e.sortParameter,setSortParameter:e.setSortParameter}),(0,pE.jsx)(bE,{currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,lists:e.lists,setAppMode:r,user:e.user}),(0,pE.jsx)(yE,{data:e.data,lists:e.lists,onTaskChanged:e.onTaskChanged,appMode:n,tasksShowing:i,setDataChanges:a,dataChanges:o}),(0,pE.jsx)(vE,{data:e.data,appMode:n,tasksShowing:i,setTasksShowing:s,onTasksDeleted:e.onTasksDeleted,user:e.user,auth:e.auth})]})};const NE=function(e){return(0,pE.jsx)(pE.Fragment,{children:e.error&&(0,pE.jsx)("div",{id:"popUpBackground",className:"errorPopUp",children:(0,pE.jsxs)("div",{id:"popUp",children:[(0,pE.jsxs)("div",{id:"popUpHeader",children:[(0,pE.jsx)("button",{id:"closePopUp",onClick:()=>window.location.reload(!0),children:"X"}),(0,pE.jsx)("h2",{id:"errorTitle",children:"ERROR"}),(0,pE.jsx)("button",{children:"X"})]}),(0,pE.jsxs)("span",{id:"errorMessage",children:["Type: ",JSON.stringify(e.error.name),(0,pE.jsx)("br",{}),"Message: ",JSON.stringify(e.error.code)]})]})})})};const AE=function(e){const[n,r]=(0,t.useState)("priorityLevel desc"),[i,s]=(0,t.useState)(null);(0,t.useEffect)((()=>{e.currentListID?e.db.doc(e.currentListID).get().then((t=>{t.exists?s(e.db.doc(e.currentListID).collection("tasks").orderBy(n.split(" ")[0],n.split(" ")[1])):s(null)})).catch((e=>e)):s(null)}),[e.currentListID,e.db,n]);const[o,a,l]=cb(i),c=(null===o||void 0===o?void 0:o.docs.map((e=>e.data())))||[];return(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)(NE,{error:l}),a&&(0,pE.jsx)(EE,{}),(0,pE.jsx)(CE,{lists:e.lists,data:c,user:e.user,auth:e.auth,currentListID:e.currentListID,setCurrentListID:e.setCurrentListID,onListAdded:e.onListAdded,onListDeleted:e.onListDeleted,onListChanged:e.onListChanged,sortParameter:n,setSortParameter:r,onTaskAdded:function(t,n){const r=_r();e.db.doc(e.currentListID).collection("tasks").doc(r).set({id:r,taskName:t,priorityLevel:n,isChecked:!1,created:br.firestore.FieldValue.serverTimestamp()})},onTaskChanged:function(t,n,r){e.db.doc(e.currentListID).collection("tasks").doc(t).update({[n]:r})},onTasksDeleted:function(t){for(let n of t)e.db.doc(e.currentListID).collection("tasks").doc(n).delete()}})]})};br.initializeApp({apiKey:"AIzaSyDbDnRMAuOjcmsEB2iwcbt2_w6SPX-EAQo",authDomain:"cs124lab3.firebaseapp.com",projectId:"cs124lab3",storageBucket:"cs124lab3.appspot.com",messagingSenderId:"191143519167",appId:"1:191143519167:web:f33464f0d0ede5b538370a",measurementId:"G-B8CQHTFNQE"});const DE=br.firestore(),OE="lists";const PE=function(e){const[n,r]=(0,t.useState)(null),i=DE.collection(OE).where("sharedWith","array-contains",e.user.email),[s,o,a]=cb(i),[l,c]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{c((null===s||void 0===s?void 0:s.docs.map((e=>e.data())))||[])}),[s]),(0,t.useEffect)((()=>{null!==n||u||l.length>0&&r(l[0].id)}),[n,l,u]),(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)(NE,{error:a}),o&&(0,pE.jsx)(EE,{}),(0,pE.jsx)(AE,{lists:l,user:e.user,auth:e.auth,db:DE.collection(OE),currentListID:n,setCurrentListID:r,onListAdded:async function(t){h(!0);const n=_r();await DE.collection(OE).doc(n).set({id:n,listName:t,owner:e.user.email,sharedWith:[e.user.email]}),h(!1)},onListDeleted:async function(e){h(!0);let t=n;r(null);const i=await DE.collection(OE).doc(e).collection("tasks").get();await i.docs.forEach((e=>e.ref.delete())),await DE.collection(OE).doc(e).delete(),e!==t&&r(t),h(!1)},onListChanged:async function(t,i,s){h(!0),t===n&&"sharedWith"===i&&void 0===s.find((t=>t===e.user.email))&&r(null),await DE.collection(OE).doc(t).update({[i]:s}),h(!1)}})]})};const RE=function(e){const[n,r]=(0,t.useState)(!1);return(0,pE.jsx)("div",{id:"popUpBackground",children:(0,pE.jsxs)("div",{id:"popUp",children:[(0,pE.jsxs)("div",{id:"popUpHeader",children:[(0,pE.jsx)("button",{id:"closePopUp",onClick:()=>e.auth.signOut(),children:"X"}),(0,pE.jsx)("h2",{children:" Verify Email "}),(0,pE.jsx)("button",{children:"X"})]}),(0,pE.jsx)("div",{id:"verifyBody",children:n?(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsxs)("span",{id:"verifyMessage",children:["Check your email for a verification link:",(0,pE.jsx)("br",{}),e.user.email]}),(0,pE.jsx)("div",{id:"loader"}),(0,pE.jsx)("button",{id:"sendEmail",onClick:()=>window.location.reload(!0),children:"Refresh Page"})]}):(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsxs)("span",{id:"verifyMessage",children:["Click the button below to send a verification email to:",(0,pE.jsx)("br",{}),e.user.email]}),(0,pE.jsx)("button",{id:"sendEmail",onClick:()=>{r(!0),e.auth.currentUser.sendEmailVerification()},children:"Send Email"})]})})]})})},LE=br.auth();const ME=function(){const[e,t,n]=fr(LE),[r,i,s,o]=mr(LE),[a,l,c,u]=pr(LE);return(0,pE.jsxs)(pE.Fragment,{children:[(0,pE.jsx)(NE,{error:n}),t?(0,pE.jsx)(EE,{}):(0,pE.jsx)(pE.Fragment,{children:e?(0,pE.jsx)(pE.Fragment,{children:e.emailVerified?(0,pE.jsx)(PE,{user:e,auth:LE}):(0,pE.jsx)(RE,{auth:LE,user:e})}):(0,pE.jsx)(kE,{auth:LE,signInWithEmailAndPassword:r,signInUserCredential:i,signInLoading:s,signInError:o,createUserWithEmailAndPassword:a,signUpUserCredential:l,signUpLoading:c,signUpError:u})})]})};r.render((0,pE.jsx)(t.StrictMode,{children:(0,pE.jsx)(ME,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.c04db8db.js.map